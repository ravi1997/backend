<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="0" skipped="0" tests="78" time="52.198" timestamp="2026-01-09T19:52:26.123553+05:30" hostname="ravi-HP-Laptop-14-gr1xxx"><testcase classname="tests.test_advanced_features" name="test_conditional_required" time="0.993"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:__init__.py:36 Logging configured.
#x1B[32mINFO    #x1B[0m app:__init__.py:47 Using config: TestingConfig
#x1B[32mINFO    #x1B[0m app:__init__.py:62 MongoDB connected via MOCK
#x1B[32mINFO    #x1B[0m app:__init__.py:84 Middleware loaded: Compress, CORS
#x1B[32mINFO    #x1B[0m app:__init__.py:18 Blueprints registered: form, user, auth, ai, dashboards, workflows
#x1B[32mINFO    #x1B[0m app:__init__.py:88 Blueprints registered.
#x1B[32mINFO    #x1B[0m app:__init__.py:92 ✅ Flask app created successfully.
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_d1c1d1@ex.com', 'employee_id': 'A_d1c1d1', 'mobile': '2587083078', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_d1c1d1'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_d1c1d1
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_d1c1d1 (admin_d1c1d1@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_d1c1d1@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_d1c1d1@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_d1c1d1@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_d1c1d1 (ID: e1270cd0-8bb6-4343-846f-5bbc94d708ff), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_d1c1d1
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub_470a67@ex.com', 'employee_id': 'S_470a67', 'mobile': '2093352576', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_470a67'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sub_470a67
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sub_470a67 (sub_470a67@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub_470a67@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub_470a67@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub_470a67@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sub_470a67 (ID: 92104741-4035-45c5-955f-45853be4c012), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sub_470a67
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_d1c1d1 (ID: e1270cd0-8bb6-4343-846f-5bbc94d708ff) is attempting to create a form with data: {'is_public': True, 'slug': 'cond-f27ec2', 'status': 'published', 'title': 'Cond Form', 'versions': [{'sections': [{'id': '57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be', 'questions': [{'field_type': 'input', 'id': '42bfffa8-7643-4d11-a384-d340bac31aa8', 'label': 'Q1'}, {'field_type': 'input', 'id': 'd6172b1a-0826-41e5-8d43-a4b20d47f509', 'label': 'Q2', 'required_condition': "42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form a71184e1-e5e2-456f-872a-28d707a411c1 created successfully by user admin_d1c1d1 (ID: e1270cd0-8bb6-4343-846f-5bbc94d708ff)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: a71184e1-e5e2-456f-872a-28d707a411c1
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be': {'42bfffa8-7643-4d11-a384-d340bac31aa8': 'no'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 92104741-4035-45c5-955f-45853be4c012, Form title: Cond Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 42bfffa8-7643-4d11-a384-d340bac31aa8, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question d6172b1a-0826-41e5-8d43-a4b20d47f509, label=Q2
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes' -&gt; v_42bfffa8_7643_4d11_a384_d340bac31aa8 == 'yes'
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=18f101f5-e4a0-4a21-8276-d782adb80a4c, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: a71184e1-e5e2-456f-872a-28d707a411c1
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be': {'42bfffa8-7643-4d11-a384-d340bac31aa8': 'yes'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 92104741-4035-45c5-955f-45853be4c012, Form title: Cond Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 42bfffa8-7643-4d11-a384-d340bac31aa8, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question d6172b1a-0826-41e5-8d43-a4b20d47f509, label=Q2
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes' -&gt; v_42bfffa8_7643_4d11_a384_d340bac31aa8 == 'yes'
#x1B[35mDEBUG   #x1B[0m app:validation.py:143 Field d6172b1a-0826-41e5-8d43-a4b20d47f509 is mandatory due to condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes'
#x1B[33mWARNING #x1B[0m app:validation.py:186 d6172b1a-0826-41e5-8d43-a4b20d47f509: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': 'd6172b1a-0826-41e5-8d43-a4b20d47f509', 'error': 'Required field missing'}]
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: a71184e1-e5e2-456f-872a-28d707a411c1
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be': {'42bfffa8-7643-4d11-a384-d340bac31aa8': 'yes', 'd6172b1a-0826-41e5-8d43-a4b20d47f509': 'val'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 92104741-4035-45c5-955f-45853be4c012, Form title: Cond Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 42bfffa8-7643-4d11-a384-d340bac31aa8, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question d6172b1a-0826-41e5-8d43-a4b20d47f509, label=Q2
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes' -&gt; v_42bfffa8_7643_4d11_a384_d340bac31aa8 == 'yes'
#x1B[35mDEBUG   #x1B[0m app:validation.py:143 Field d6172b1a-0826-41e5-8d43-a4b20d47f509 is mandatory due to condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes'
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=a25a17a3-6f07-4fd5-ac02-c2d33ea32cb1, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Logging configured.
INFO:app:Using config: TestingConfig
INFO:app:MongoDB connected via MOCK
INFO:app:Middleware loaded: Compress, CORS
INFO:app:Blueprints registered: form, user, auth, ai, dashboards, workflows
INFO:app:Blueprints registered.
INFO:app:✅ Flask app created successfully.
INFO:app:Received registration data: {'email': 'admin_d1c1d1@ex.com', 'employee_id': 'A_d1c1d1', 'mobile': '2587083078', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_d1c1d1'}
INFO:app:#x1F512 Password set for user: admin_d1c1d1
INFO:app:✅ User registered successfully: admin_d1c1d1 (admin_d1c1d1@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_d1c1d1@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_d1c1d1@ex.com
INFO:app:Login successful for employee user admin_d1c1d1@ex.com
INFO:app:Issued JWT for user admin_d1c1d1 (ID: e1270cd0-8bb6-4343-846f-5bbc94d708ff), roles: ['admin']
INFO:app:Returning JSON response for user admin_d1c1d1
INFO:app:Received registration data: {'email': 'sub_470a67@ex.com', 'employee_id': 'S_470a67', 'mobile': '2093352576', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_470a67'}
INFO:app:#x1F512 Password set for user: sub_470a67
INFO:app:✅ User registered successfully: sub_470a67 (sub_470a67@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub_470a67@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub_470a67@ex.com
INFO:app:Login successful for employee user sub_470a67@ex.com
INFO:app:Issued JWT for user sub_470a67 (ID: 92104741-4035-45c5-955f-45853be4c012), roles: ['user']
INFO:app:Returning JSON response for user sub_470a67
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_d1c1d1 (ID: e1270cd0-8bb6-4343-846f-5bbc94d708ff) is attempting to create a form with data: {'is_public': True, 'slug': 'cond-f27ec2', 'status': 'published', 'title': 'Cond Form', 'versions': [{'sections': [{'id': '57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be', 'questions': [{'field_type': 'input', 'id': '42bfffa8-7643-4d11-a384-d340bac31aa8', 'label': 'Q1'}, {'field_type': 'input', 'id': 'd6172b1a-0826-41e5-8d43-a4b20d47f509', 'label': 'Q2', 'required_condition': "42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form a71184e1-e5e2-456f-872a-28d707a411c1 created successfully by user admin_d1c1d1 (ID: e1270cd0-8bb6-4343-846f-5bbc94d708ff)
INFO:app:Received submission for form_id: a71184e1-e5e2-456f-872a-28d707a411c1
INFO:app:Parsed JSON submission: {'57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be': {'42bfffa8-7643-4d11-a384-d340bac31aa8': 'no'}}
INFO:app:Current user: 92104741-4035-45c5-955f-45853be4c012, Form title: Cond Form
INFO:app:Processing section: 57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be, repeatable=False
DEBUG:app:Checking question 42bfffa8-7643-4d11-a384-d340bac31aa8, label=Q1
DEBUG:app:Checking question d6172b1a-0826-41e5-8d43-a4b20d47f509, label=Q2
DEBUG:app:Sanitized condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes' -&gt; v_42bfffa8_7643_4d11_a384_d340bac31aa8 == 'yes'
INFO:app:Submission saved: response_id=18f101f5-e4a0-4a21-8276-d782adb80a4c, is_draft=False
INFO:app:Received submission for form_id: a71184e1-e5e2-456f-872a-28d707a411c1
INFO:app:Parsed JSON submission: {'57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be': {'42bfffa8-7643-4d11-a384-d340bac31aa8': 'yes'}}
INFO:app:Current user: 92104741-4035-45c5-955f-45853be4c012, Form title: Cond Form
INFO:app:Processing section: 57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be, repeatable=False
DEBUG:app:Checking question 42bfffa8-7643-4d11-a384-d340bac31aa8, label=Q1
DEBUG:app:Checking question d6172b1a-0826-41e5-8d43-a4b20d47f509, label=Q2
DEBUG:app:Sanitized condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes' -&gt; v_42bfffa8_7643_4d11_a384_d340bac31aa8 == 'yes'
DEBUG:app:Field d6172b1a-0826-41e5-8d43-a4b20d47f509 is mandatory due to condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes'
WARNING:app:d6172b1a-0826-41e5-8d43-a4b20d47f509: Required field missing
WARNING:app:Validation failed with errors: [{'id': 'd6172b1a-0826-41e5-8d43-a4b20d47f509', 'error': 'Required field missing'}]
INFO:app:Received submission for form_id: a71184e1-e5e2-456f-872a-28d707a411c1
INFO:app:Parsed JSON submission: {'57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be': {'42bfffa8-7643-4d11-a384-d340bac31aa8': 'yes', 'd6172b1a-0826-41e5-8d43-a4b20d47f509': 'val'}}
INFO:app:Current user: 92104741-4035-45c5-955f-45853be4c012, Form title: Cond Form
INFO:app:Processing section: 57aed1d2-d7b1-4ff1-a602-b30f7c5fe9be, repeatable=False
DEBUG:app:Checking question 42bfffa8-7643-4d11-a384-d340bac31aa8, label=Q1
DEBUG:app:Checking question d6172b1a-0826-41e5-8d43-a4b20d47f509, label=Q2
DEBUG:app:Sanitized condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes' -&gt; v_42bfffa8_7643_4d11_a384_d340bac31aa8 == 'yes'
DEBUG:app:Field d6172b1a-0826-41e5-8d43-a4b20d47f509 is mandatory due to condition: 42bfffa8-7643-4d11-a384-d340bac31aa8 == 'yes'
INFO:app:Submission saved: response_id=a25a17a3-6f07-4fd5-ac02-c2d33ea32cb1, is_draft=False

</system-err></testcase><testcase classname="tests.test_advanced_features" name="test_history_tracking" time="0.995"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_a63981@ex.com', 'employee_id': 'A_a63981', 'mobile': '2711631768', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_a63981'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_a63981
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_a63981 (admin_a63981@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_a63981@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_a63981@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_a63981@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_a63981 (ID: ef38ebc7-2465-4e89-84f6-0d3e33a27d9b), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_a63981
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub_bd20b2@ex.com', 'employee_id': 'S_bd20b2', 'mobile': '2628969700', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_bd20b2'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sub_bd20b2
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sub_bd20b2 (sub_bd20b2@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub_bd20b2@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub_bd20b2@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub_bd20b2@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sub_bd20b2 (ID: 551243bc-92ae-45b2-8611-4e4c116ecbb6), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sub_bd20b2
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_a63981 (ID: ef38ebc7-2465-4e89-84f6-0d3e33a27d9b) is attempting to create a form with data: {'is_public': True, 'slug': 'hist-ff5971', 'status': 'published', 'title': 'Hist Form', 'versions': [{'sections': [{'id': '12e03e4c-cf26-4e40-ab1d-9adead8dda83', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 557731d4-3651-42fb-9d63-be1437dbd1fa created successfully by user admin_a63981 (ID: ef38ebc7-2465-4e89-84f6-0d3e33a27d9b)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 557731d4-3651-42fb-9d63-be1437dbd1fa
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'foo': 'bar'}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 551243bc-92ae-45b2-8611-4e4c116ecbb6, Form title: Hist Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 12e03e4c-cf26-4e40-ab1d-9adead8dda83, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=245191d2-bb25-49f2-863f-845cc4a5be37, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:306 Updating submission form=557731d4-3651-42fb-9d63-be1437dbd1fa resp=245191d2-bb25-49f2-863f-845cc4a5be37
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 12e03e4c-cf26-4e40-ab1d-9adead8dda83, repeatable=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_a63981@ex.com', 'employee_id': 'A_a63981', 'mobile': '2711631768', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_a63981'}
INFO:app:#x1F512 Password set for user: admin_a63981
INFO:app:✅ User registered successfully: admin_a63981 (admin_a63981@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_a63981@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_a63981@ex.com
INFO:app:Login successful for employee user admin_a63981@ex.com
INFO:app:Issued JWT for user admin_a63981 (ID: ef38ebc7-2465-4e89-84f6-0d3e33a27d9b), roles: ['admin']
INFO:app:Returning JSON response for user admin_a63981
INFO:app:Received registration data: {'email': 'sub_bd20b2@ex.com', 'employee_id': 'S_bd20b2', 'mobile': '2628969700', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_bd20b2'}
INFO:app:#x1F512 Password set for user: sub_bd20b2
INFO:app:✅ User registered successfully: sub_bd20b2 (sub_bd20b2@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub_bd20b2@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub_bd20b2@ex.com
INFO:app:Login successful for employee user sub_bd20b2@ex.com
INFO:app:Issued JWT for user sub_bd20b2 (ID: 551243bc-92ae-45b2-8611-4e4c116ecbb6), roles: ['user']
INFO:app:Returning JSON response for user sub_bd20b2
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_a63981 (ID: ef38ebc7-2465-4e89-84f6-0d3e33a27d9b) is attempting to create a form with data: {'is_public': True, 'slug': 'hist-ff5971', 'status': 'published', 'title': 'Hist Form', 'versions': [{'sections': [{'id': '12e03e4c-cf26-4e40-ab1d-9adead8dda83', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 557731d4-3651-42fb-9d63-be1437dbd1fa created successfully by user admin_a63981 (ID: ef38ebc7-2465-4e89-84f6-0d3e33a27d9b)
INFO:app:Received submission for form_id: 557731d4-3651-42fb-9d63-be1437dbd1fa
INFO:app:Parsed JSON submission: {'foo': 'bar'}
INFO:app:Current user: 551243bc-92ae-45b2-8611-4e4c116ecbb6, Form title: Hist Form
INFO:app:Processing section: 12e03e4c-cf26-4e40-ab1d-9adead8dda83, repeatable=False
INFO:app:Submission saved: response_id=245191d2-bb25-49f2-863f-845cc4a5be37, is_draft=False
INFO:app:Updating submission form=557731d4-3651-42fb-9d63-be1437dbd1fa resp=245191d2-bb25-49f2-863f-845cc4a5be37
INFO:app:Processing section: 12e03e4c-cf26-4e40-ab1d-9adead8dda83, repeatable=False

</system-err></testcase><testcase classname="tests.test_advanced_features" name="test_webhooks" time="0.996"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_64de10@ex.com', 'employee_id': 'A_64de10', 'mobile': '3123002264', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_64de10'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_64de10
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_64de10 (admin_64de10@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_64de10@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_64de10@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_64de10@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_64de10 (ID: a8fcdfe4-515a-4de4-8488-9577d68a1029), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_64de10
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub_f7f545@ex.com', 'employee_id': 'S_f7f545', 'mobile': '2977815352', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_f7f545'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sub_f7f545
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sub_f7f545 (sub_f7f545@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub_f7f545@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub_f7f545@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub_f7f545@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sub_f7f545 (ID: 66d4eced-bf1c-4f6a-9cba-8b42e188cfc1), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sub_f7f545
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_64de10 (ID: a8fcdfe4-515a-4de4-8488-9577d68a1029) is attempting to create a form with data: {'is_public': True, 'slug': 'hook-f2c09b', 'status': 'published', 'title': 'Hook Form', 'versions': [{'sections': [{'id': 'b713386d-be6a-419c-9372-99c01ed34d48', 'questions': [], 'title': 'S1'}], 'version': '1.0'}], 'webhooks': [{'events': ['submitted'], 'secret': 'xyz', 'url': 'http://mock-hook.com'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form df2d88ea-5924-4b20-8fc8-eaefc76a2520 created successfully by user admin_64de10 (ID: a8fcdfe4-515a-4de4-8488-9577d68a1029)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: df2d88ea-5924-4b20-8fc8-eaefc76a2520
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 66d4eced-bf1c-4f6a-9cba-8b42e188cfc1, Form title: Hook Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: b713386d-be6a-419c-9372-99c01ed34d48, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=5508c2f0-3640-40ee-96e6-308838441030, is_draft=False
#x1B[32mINFO    #x1B[0m app:webhooks.py:53 Webhook sent to http://mock-hook.com for event submitted. Status: &lt;MagicMock name='post().status_code' id='139201019028416'&gt;
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_64de10@ex.com', 'employee_id': 'A_64de10', 'mobile': '3123002264', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_64de10'}
INFO:app:#x1F512 Password set for user: admin_64de10
INFO:app:✅ User registered successfully: admin_64de10 (admin_64de10@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_64de10@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_64de10@ex.com
INFO:app:Login successful for employee user admin_64de10@ex.com
INFO:app:Issued JWT for user admin_64de10 (ID: a8fcdfe4-515a-4de4-8488-9577d68a1029), roles: ['admin']
INFO:app:Returning JSON response for user admin_64de10
INFO:app:Received registration data: {'email': 'sub_f7f545@ex.com', 'employee_id': 'S_f7f545', 'mobile': '2977815352', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_f7f545'}
INFO:app:#x1F512 Password set for user: sub_f7f545
INFO:app:✅ User registered successfully: sub_f7f545 (sub_f7f545@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub_f7f545@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub_f7f545@ex.com
INFO:app:Login successful for employee user sub_f7f545@ex.com
INFO:app:Issued JWT for user sub_f7f545 (ID: 66d4eced-bf1c-4f6a-9cba-8b42e188cfc1), roles: ['user']
INFO:app:Returning JSON response for user sub_f7f545
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_64de10 (ID: a8fcdfe4-515a-4de4-8488-9577d68a1029) is attempting to create a form with data: {'is_public': True, 'slug': 'hook-f2c09b', 'status': 'published', 'title': 'Hook Form', 'versions': [{'sections': [{'id': 'b713386d-be6a-419c-9372-99c01ed34d48', 'questions': [], 'title': 'S1'}], 'version': '1.0'}], 'webhooks': [{'events': ['submitted'], 'secret': 'xyz', 'url': 'http://mock-hook.com'}]}
INFO:app:Form df2d88ea-5924-4b20-8fc8-eaefc76a2520 created successfully by user admin_64de10 (ID: a8fcdfe4-515a-4de4-8488-9577d68a1029)
INFO:app:Received submission for form_id: df2d88ea-5924-4b20-8fc8-eaefc76a2520
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 66d4eced-bf1c-4f6a-9cba-8b42e188cfc1, Form title: Hook Form
INFO:app:Processing section: b713386d-be6a-419c-9372-99c01ed34d48, repeatable=False
INFO:app:Submission saved: response_id=5508c2f0-3640-40ee-96e6-308838441030, is_draft=False
INFO:app:Webhook sent to http://mock-hook.com for event submitted. Status: &lt;MagicMock name='post().status_code' id='139201019028416'&gt;

</system-err></testcase><testcase classname="tests.test_advanced_validation" name="test_global_custom_validation" time="0.482"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'adv_admin_a12da0@test.com', 'employee_id': 'EMP_36d6b9', 'mobile': '7751348936', 'roles': ['admin'], 'user_type': 'employee', 'username': 'adv_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: adv_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: adv_admin (adv_admin_a12da0@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'adv_admin_a12da0@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: adv_admin_a12da0@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user adv_admin_a12da0@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user adv_admin (ID: d3dca02e-66ee-4bb7-af7b-9ded38664a3f), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user adv_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User adv_admin (ID: d3dca02e-66ee-4bb7-af7b-9ded38664a3f) is attempting to create a form with data: {'is_public': True, 'slug': 'cross-val-fb2f05', 'status': 'published', 'title': 'Cross Validation Form', 'versions': [{'custom_validations': [{'error_message': 'Start must be before End', 'expression': 'v_95e4216c_236e_46ff_919a_cafff57c3ec5 &lt; v_130d84be_bdaa_44ad_8bda_14f160613fc3'}], 'sections': [{'id': 'ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6', 'questions': [{'field_type': 'input', 'id': '95e4216c-236e-46ff-919a-cafff57c3ec5', 'is_required': True, 'label': 'Start'}, {'field_type': 'input', 'id': '130d84be-bdaa-44ad-8bda-14f160613fc3', 'is_required': True, 'label': 'End'}], 'title': 'Dates'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 65c113ec-a6ad-43b3-b353-ae8201d53f05 created successfully by user adv_admin (ID: d3dca02e-66ee-4bb7-af7b-9ded38664a3f)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 65c113ec-a6ad-43b3-b353-ae8201d53f05
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6': {'130d84be-bdaa-44ad-8bda-14f160613fc3': '2023-01-02', '95e4216c-236e-46ff-919a-cafff57c3ec5': '2023-01-01'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: d3dca02e-66ee-4bb7-af7b-9ded38664a3f, Form title: Cross Validation Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 95e4216c-236e-46ff-919a-cafff57c3ec5, label=Start
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 130d84be-bdaa-44ad-8bda-14f160613fc3, label=End
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=4353b5cd-91c0-4955-94a0-02bf6a1e2293, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 65c113ec-a6ad-43b3-b353-ae8201d53f05
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6': {'130d84be-bdaa-44ad-8bda-14f160613fc3': '2023-01-01', '95e4216c-236e-46ff-919a-cafff57c3ec5': '2023-02-01'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: d3dca02e-66ee-4bb7-af7b-9ded38664a3f, Form title: Cross Validation Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 95e4216c-236e-46ff-919a-cafff57c3ec5, label=Start
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 130d84be-bdaa-44ad-8bda-14f160613fc3, label=End
#x1B[33mWARNING #x1B[0m app:validation.py:285 Global validation failed: v_95e4216c_236e_46ff_919a_cafff57c3ec5 &lt; v_130d84be_bdaa_44ad_8bda_14f160613fc3
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'global': True, 'error': 'Start must be before End'}]
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'adv_admin_a12da0@test.com', 'employee_id': 'EMP_36d6b9', 'mobile': '7751348936', 'roles': ['admin'], 'user_type': 'employee', 'username': 'adv_admin'}
INFO:app:#x1F512 Password set for user: adv_admin
INFO:app:✅ User registered successfully: adv_admin (adv_admin_a12da0@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'adv_admin_a12da0@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: adv_admin_a12da0@test.com
INFO:app:Login successful for employee user adv_admin_a12da0@test.com
INFO:app:Issued JWT for user adv_admin (ID: d3dca02e-66ee-4bb7-af7b-9ded38664a3f), roles: ['admin']
INFO:app:Returning JSON response for user adv_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User adv_admin (ID: d3dca02e-66ee-4bb7-af7b-9ded38664a3f) is attempting to create a form with data: {'is_public': True, 'slug': 'cross-val-fb2f05', 'status': 'published', 'title': 'Cross Validation Form', 'versions': [{'custom_validations': [{'error_message': 'Start must be before End', 'expression': 'v_95e4216c_236e_46ff_919a_cafff57c3ec5 &lt; v_130d84be_bdaa_44ad_8bda_14f160613fc3'}], 'sections': [{'id': 'ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6', 'questions': [{'field_type': 'input', 'id': '95e4216c-236e-46ff-919a-cafff57c3ec5', 'is_required': True, 'label': 'Start'}, {'field_type': 'input', 'id': '130d84be-bdaa-44ad-8bda-14f160613fc3', 'is_required': True, 'label': 'End'}], 'title': 'Dates'}], 'version': '1.0'}]}
INFO:app:Form 65c113ec-a6ad-43b3-b353-ae8201d53f05 created successfully by user adv_admin (ID: d3dca02e-66ee-4bb7-af7b-9ded38664a3f)
INFO:app:Received submission for form_id: 65c113ec-a6ad-43b3-b353-ae8201d53f05
INFO:app:Parsed JSON submission: {'ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6': {'130d84be-bdaa-44ad-8bda-14f160613fc3': '2023-01-02', '95e4216c-236e-46ff-919a-cafff57c3ec5': '2023-01-01'}}
INFO:app:Current user: d3dca02e-66ee-4bb7-af7b-9ded38664a3f, Form title: Cross Validation Form
INFO:app:Processing section: ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6, repeatable=False
DEBUG:app:Checking question 95e4216c-236e-46ff-919a-cafff57c3ec5, label=Start
DEBUG:app:Checking question 130d84be-bdaa-44ad-8bda-14f160613fc3, label=End
INFO:app:Submission saved: response_id=4353b5cd-91c0-4955-94a0-02bf6a1e2293, is_draft=False
INFO:app:Received submission for form_id: 65c113ec-a6ad-43b3-b353-ae8201d53f05
INFO:app:Parsed JSON submission: {'ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6': {'130d84be-bdaa-44ad-8bda-14f160613fc3': '2023-01-01', '95e4216c-236e-46ff-919a-cafff57c3ec5': '2023-02-01'}}
INFO:app:Current user: d3dca02e-66ee-4bb7-af7b-9ded38664a3f, Form title: Cross Validation Form
INFO:app:Processing section: ab3ed0f1-47bb-477d-a27c-a9c8fb8f8ad6, repeatable=False
DEBUG:app:Checking question 95e4216c-236e-46ff-919a-cafff57c3ec5, label=Start
DEBUG:app:Checking question 130d84be-bdaa-44ad-8bda-14f160613fc3, label=End
WARNING:app:Global validation failed: v_95e4216c_236e_46ff_919a_cafff57c3ec5 &lt; v_130d84be_bdaa_44ad_8bda_14f160613fc3
WARNING:app:Validation failed with errors: [{'global': True, 'error': 'Start must be before End'}]

</system-err></testcase><testcase classname="tests.test_ai_analysis" name="test_ai_analysis" time="0.481"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'ai@example.com', 'mobile': '1112223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'ai_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: ai_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: ai_tester (ai@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'ai@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: ai@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user ai@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user ai_tester (ID: 52374897-29ee-4842-bbad-001b877918b5), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user ai_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User ai_tester (ID: 52374897-29ee-4842-bbad-001b877918b5) is attempting to create a form with data: {'id': 'fad938a6-eb61-4d61-bdd6-9f62ce605446', 'slug': 'ai-test-f8479a', 'status': 'published', 'title': 'AI Test Form', 'versions': [{'sections': [{'id': '0ce3dfd2-0793-4f53-84d2-5067021f8a1c', 'questions': [{'field_type': 'textarea', 'id': 'f537ca8b-1281-40c9-bafe-9117e1198918', 'label': 'Feedback'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form fad938a6-eb61-4d61-bdd6-9f62ce605446 created successfully by user ai_tester (ID: 52374897-29ee-4842-bbad-001b877918b5)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: fad938a6-eb61-4d61-bdd6-9f62ce605446
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'0ce3dfd2-0793-4f53-84d2-5067021f8a1c': {'f537ca8b-1281-40c9-bafe-9117e1198918': 'This system is amazing! Contact me at test@example.com or 9998887776.'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 52374897-29ee-4842-bbad-001b877918b5, Form title: AI Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 0ce3dfd2-0793-4f53-84d2-5067021f8a1c, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f537ca8b-1281-40c9-bafe-9117e1198918, label=Feedback
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=08240e61-9652-4429-b15a-9553d08b685c, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'ai@example.com', 'mobile': '1112223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'ai_tester'}
INFO:app:#x1F512 Password set for user: ai_tester
INFO:app:✅ User registered successfully: ai_tester (ai@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'ai@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: ai@example.com
INFO:app:Login successful for employee user ai@example.com
INFO:app:Issued JWT for user ai_tester (ID: 52374897-29ee-4842-bbad-001b877918b5), roles: ['admin']
INFO:app:Returning JSON response for user ai_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User ai_tester (ID: 52374897-29ee-4842-bbad-001b877918b5) is attempting to create a form with data: {'id': 'fad938a6-eb61-4d61-bdd6-9f62ce605446', 'slug': 'ai-test-f8479a', 'status': 'published', 'title': 'AI Test Form', 'versions': [{'sections': [{'id': '0ce3dfd2-0793-4f53-84d2-5067021f8a1c', 'questions': [{'field_type': 'textarea', 'id': 'f537ca8b-1281-40c9-bafe-9117e1198918', 'label': 'Feedback'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form fad938a6-eb61-4d61-bdd6-9f62ce605446 created successfully by user ai_tester (ID: 52374897-29ee-4842-bbad-001b877918b5)
INFO:app:Received submission for form_id: fad938a6-eb61-4d61-bdd6-9f62ce605446
INFO:app:Parsed JSON submission: {'0ce3dfd2-0793-4f53-84d2-5067021f8a1c': {'f537ca8b-1281-40c9-bafe-9117e1198918': 'This system is amazing! Contact me at test@example.com or 9998887776.'}}
INFO:app:Current user: 52374897-29ee-4842-bbad-001b877918b5, Form title: AI Test Form
INFO:app:Processing section: 0ce3dfd2-0793-4f53-84d2-5067021f8a1c, repeatable=False
DEBUG:app:Checking question f537ca8b-1281-40c9-bafe-9117e1198918, label=Feedback
INFO:app:Submission saved: response_id=08240e61-9652-4429-b15a-9553d08b685c, is_draft=False

</system-err></testcase><testcase classname="tests.test_ai_anomalies" name="test_ai_anomaly_detection" time="0.493"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'anomaly@example.com', 'mobile': '9993334445', 'roles': ['admin'], 'user_type': 'employee', 'username': 'anomaly_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: anomaly_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: anomaly_tester (anomaly@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'anomaly@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: anomaly@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user anomaly@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user anomaly_tester (ID: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user anomaly_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User anomaly_tester (ID: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8) is attempting to create a form with data: {'id': 'e05170e6-7ffd-4044-8294-bd8e4776f16a', 'slug': 'anomaly-test-3c2404', 'status': 'published', 'title': 'Anomaly Test Form', 'versions': [{'sections': [{'id': '1b80f17c-c593-4331-a7bb-8a1b20efff1a', 'questions': [{'field_type': 'input', 'id': '9e3fca65-460d-4d50-8638-e914b0386eb2', 'label': 'Score'}, {'field_type': 'textarea', 'id': '4b33ab5b-9561-44f8-89f8-8c98cb30fd50', 'label': 'Comment'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form e05170e6-7ffd-4044-8294-bd8e4776f16a created successfully by user anomaly_tester (ID: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=1c59cc90-70ff-4f78-a3c4-9080d8d0a5e6, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=cf140a1f-f504-4c18-9f1c-9d61e67413f1, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=05f1fabd-2451-4743-904d-f22e923dd1f6, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=2e2e8560-035e-4896-ac4b-ee440897a8fd, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=efcaa9a1-8a00-470c-86e8-1b9f6af2757a, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Outlier data', '9e3fca65-460d-4d50-8638-e914b0386eb2': 500}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=2a354a5c-a453-4041-82af-59765c11a45a, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=8ecb91d2-d3fb-47ae-b070-37a1edd2ae45, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'qwrtpsdfghjklzxcvbnm', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=49b0b494-b591-4730-b8f0-c87dd31c6c9e, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'anomaly@example.com', 'mobile': '9993334445', 'roles': ['admin'], 'user_type': 'employee', 'username': 'anomaly_tester'}
INFO:app:#x1F512 Password set for user: anomaly_tester
INFO:app:✅ User registered successfully: anomaly_tester (anomaly@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'anomaly@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: anomaly@example.com
INFO:app:Login successful for employee user anomaly@example.com
INFO:app:Issued JWT for user anomaly_tester (ID: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8), roles: ['admin']
INFO:app:Returning JSON response for user anomaly_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User anomaly_tester (ID: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8) is attempting to create a form with data: {'id': 'e05170e6-7ffd-4044-8294-bd8e4776f16a', 'slug': 'anomaly-test-3c2404', 'status': 'published', 'title': 'Anomaly Test Form', 'versions': [{'sections': [{'id': '1b80f17c-c593-4331-a7bb-8a1b20efff1a', 'questions': [{'field_type': 'input', 'id': '9e3fca65-460d-4d50-8638-e914b0386eb2', 'label': 'Score'}, {'field_type': 'textarea', 'id': '4b33ab5b-9561-44f8-89f8-8c98cb30fd50', 'label': 'Comment'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form e05170e6-7ffd-4044-8294-bd8e4776f16a created successfully by user anomaly_tester (ID: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8)
INFO:app:Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
INFO:app:Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
INFO:app:Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
INFO:app:Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
DEBUG:app:Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
DEBUG:app:Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
INFO:app:Submission saved: response_id=1c59cc90-70ff-4f78-a3c4-9080d8d0a5e6, is_draft=False
INFO:app:Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
INFO:app:Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
INFO:app:Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
INFO:app:Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
DEBUG:app:Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
DEBUG:app:Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
INFO:app:Submission saved: response_id=cf140a1f-f504-4c18-9f1c-9d61e67413f1, is_draft=False
INFO:app:Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
INFO:app:Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
INFO:app:Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
INFO:app:Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
DEBUG:app:Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
DEBUG:app:Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
INFO:app:Submission saved: response_id=05f1fabd-2451-4743-904d-f22e923dd1f6, is_draft=False
INFO:app:Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
INFO:app:Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
INFO:app:Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
INFO:app:Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
DEBUG:app:Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
DEBUG:app:Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
INFO:app:Submission saved: response_id=2e2e8560-035e-4896-ac4b-ee440897a8fd, is_draft=False
INFO:app:Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
INFO:app:Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
INFO:app:Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
INFO:app:Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
DEBUG:app:Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
DEBUG:app:Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
INFO:app:Submission saved: response_id=efcaa9a1-8a00-470c-86e8-1b9f6af2757a, is_draft=False
INFO:app:Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
INFO:app:Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Outlier data', '9e3fca65-460d-4d50-8638-e914b0386eb2': 500}}
INFO:app:Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
INFO:app:Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
DEBUG:app:Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
DEBUG:app:Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
INFO:app:Submission saved: response_id=2a354a5c-a453-4041-82af-59765c11a45a, is_draft=False
INFO:app:Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
INFO:app:Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'Everything is working fine.', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
INFO:app:Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
INFO:app:Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
DEBUG:app:Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
DEBUG:app:Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
INFO:app:Submission saved: response_id=8ecb91d2-d3fb-47ae-b070-37a1edd2ae45, is_draft=False
INFO:app:Received submission for form_id: e05170e6-7ffd-4044-8294-bd8e4776f16a
INFO:app:Parsed JSON submission: {'1b80f17c-c593-4331-a7bb-8a1b20efff1a': {'4b33ab5b-9561-44f8-89f8-8c98cb30fd50': 'qwrtpsdfghjklzxcvbnm', '9e3fca65-460d-4d50-8638-e914b0386eb2': 10}}
INFO:app:Current user: 8e9f13ed-a3a2-4e10-b0f2-13ed8eff72a8, Form title: Anomaly Test Form
INFO:app:Processing section: 1b80f17c-c593-4331-a7bb-8a1b20efff1a, repeatable=False
DEBUG:app:Checking question 9e3fca65-460d-4d50-8638-e914b0386eb2, label=Score
DEBUG:app:Checking question 4b33ab5b-9561-44f8-89f8-8c98cb30fd50, label=Comment
INFO:app:Submission saved: response_id=49b0b494-b591-4730-b8f0-c87dd31c6c9e, is_draft=False

</system-err></testcase><testcase classname="tests.test_ai_generation" name="test_ai_form_generation" time="0.541"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'gen@example.com', 'mobile': '9998881112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'gen_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: gen_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: gen_tester (gen@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'gen@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: gen@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user gen@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user gen_tester (ID: b8e35604-adb7-46b7-9101-c606d4559161), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user gen_tester
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'gen@example.com', 'mobile': '9998881112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'gen_tester'}
INFO:app:#x1F512 Password set for user: gen_tester
INFO:app:✅ User registered successfully: gen_tester (gen@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'gen@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: gen@example.com
INFO:app:Login successful for employee user gen@example.com
INFO:app:Issued JWT for user gen_tester (ID: b8e35604-adb7-46b7-9101-c606d4559161), roles: ['admin']
INFO:app:Returning JSON response for user gen_tester

</system-err></testcase><testcase classname="tests.test_ai_moderation" name="test_ai_moderation" time="0.486"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'mod@example.com', 'mobile': '9990001112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'mod_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: mod_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: mod_tester (mod@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'mod@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: mod@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user mod@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user mod_tester (ID: 73f45c2e-4f5e-46b2-8e96-5671032850d3), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user mod_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User mod_tester (ID: 73f45c2e-4f5e-46b2-8e96-5671032850d3) is attempting to create a form with data: {'id': 'ee07717a-4505-4f48-ab4e-a70a4c00785e', 'slug': 'mod-test-07ac7a', 'status': 'published', 'title': 'Moderation Test Form', 'versions': [{'sections': [{'id': '3f86c2ef-e0ac-4cbc-a201-f3c6026891dc', 'questions': [{'field_type': 'textarea', 'id': 'b16084e4-46c5-4728-941a-581c4c0bf046', 'label': 'Text'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form ee07717a-4505-4f48-ab4e-a70a4c00785e created successfully by user mod_tester (ID: 73f45c2e-4f5e-46b2-8e96-5671032850d3)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: ee07717a-4505-4f48-ab4e-a70a4c00785e
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'3f86c2ef-e0ac-4cbc-a201-f3c6026891dc': {'b16084e4-46c5-4728-941a-581c4c0bf046': 'Patient has diabetes. SSN is 111-22-3333. This comment is offensive. &lt;script&gt;alert(1)&lt;/script&gt;'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 73f45c2e-4f5e-46b2-8e96-5671032850d3, Form title: Moderation Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 3f86c2ef-e0ac-4cbc-a201-f3c6026891dc, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question b16084e4-46c5-4728-941a-581c4c0bf046, label=Text
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=d1b476e4-6134-41db-9875-6a178048e662, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'mod@example.com', 'mobile': '9990001112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'mod_tester'}
INFO:app:#x1F512 Password set for user: mod_tester
INFO:app:✅ User registered successfully: mod_tester (mod@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'mod@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: mod@example.com
INFO:app:Login successful for employee user mod@example.com
INFO:app:Issued JWT for user mod_tester (ID: 73f45c2e-4f5e-46b2-8e96-5671032850d3), roles: ['admin']
INFO:app:Returning JSON response for user mod_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User mod_tester (ID: 73f45c2e-4f5e-46b2-8e96-5671032850d3) is attempting to create a form with data: {'id': 'ee07717a-4505-4f48-ab4e-a70a4c00785e', 'slug': 'mod-test-07ac7a', 'status': 'published', 'title': 'Moderation Test Form', 'versions': [{'sections': [{'id': '3f86c2ef-e0ac-4cbc-a201-f3c6026891dc', 'questions': [{'field_type': 'textarea', 'id': 'b16084e4-46c5-4728-941a-581c4c0bf046', 'label': 'Text'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form ee07717a-4505-4f48-ab4e-a70a4c00785e created successfully by user mod_tester (ID: 73f45c2e-4f5e-46b2-8e96-5671032850d3)
INFO:app:Received submission for form_id: ee07717a-4505-4f48-ab4e-a70a4c00785e
INFO:app:Parsed JSON submission: {'3f86c2ef-e0ac-4cbc-a201-f3c6026891dc': {'b16084e4-46c5-4728-941a-581c4c0bf046': 'Patient has diabetes. SSN is 111-22-3333. This comment is offensive. &lt;script&gt;alert(1)&lt;/script&gt;'}}
INFO:app:Current user: 73f45c2e-4f5e-46b2-8e96-5671032850d3, Form title: Moderation Test Form
INFO:app:Processing section: 3f86c2ef-e0ac-4cbc-a201-f3c6026891dc, repeatable=False
DEBUG:app:Checking question b16084e4-46c5-4728-941a-581c4c0bf046, label=Text
INFO:app:Submission saved: response_id=d1b476e4-6134-41db-9875-6a178048e662, is_draft=False

</system-err></testcase><testcase classname="tests.test_ai_search" name="test_ai_search" time="0.496"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'search@example.com', 'mobile': '9992223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'search_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: search_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: search_tester (search@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'search@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: search@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user search@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user search_tester (ID: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user search_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User search_tester (ID: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1) is attempting to create a form with data: {'id': '4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee', 'slug': 'search-test-a3fe89', 'status': 'published', 'title': 'Search Test Form', 'versions': [{'sections': [{'id': 'fd123374-65bf-42d7-af67-16ff08456d29', 'questions': [{'field_type': 'input', 'id': '6693f442-55b0-43af-9ff9-ece9b678741f', 'label': 'Name'}, {'field_type': 'input', 'id': 'df1454c8-157f-40e1-9811-115959039ed0', 'label': 'Age'}, {'field_type': 'input', 'id': 'b009eec6-ea80-4747-ad46-4af5c24984cf', 'label': 'Condition'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee created successfully by user search_tester (ID: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'fd123374-65bf-42d7-af67-16ff08456d29': {'6693f442-55b0-43af-9ff9-ece9b678741f': 'John', 'b009eec6-ea80-4747-ad46-4af5c24984cf': 'Diabetes', 'df1454c8-157f-40e1-9811-115959039ed0': 65}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1, Form title: Search Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: fd123374-65bf-42d7-af67-16ff08456d29, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6693f442-55b0-43af-9ff9-ece9b678741f, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question df1454c8-157f-40e1-9811-115959039ed0, label=Age
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question b009eec6-ea80-4747-ad46-4af5c24984cf, label=Condition
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=cfc066f3-5d58-4ca0-8e9d-04340b2e035d, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'fd123374-65bf-42d7-af67-16ff08456d29': {'6693f442-55b0-43af-9ff9-ece9b678741f': 'Jane', 'b009eec6-ea80-4747-ad46-4af5c24984cf': 'Healthy', 'df1454c8-157f-40e1-9811-115959039ed0': 25}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1, Form title: Search Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: fd123374-65bf-42d7-af67-16ff08456d29, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6693f442-55b0-43af-9ff9-ece9b678741f, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question df1454c8-157f-40e1-9811-115959039ed0, label=Age
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question b009eec6-ea80-4747-ad46-4af5c24984cf, label=Condition
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=580b3ed3-6add-4fbf-8387-08839475252a, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'fd123374-65bf-42d7-af67-16ff08456d29': {'6693f442-55b0-43af-9ff9-ece9b678741f': 'Bob', 'b009eec6-ea80-4747-ad46-4af5c24984cf': 'Flu', 'df1454c8-157f-40e1-9811-115959039ed0': 70}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1, Form title: Search Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: fd123374-65bf-42d7-af67-16ff08456d29, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6693f442-55b0-43af-9ff9-ece9b678741f, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question df1454c8-157f-40e1-9811-115959039ed0, label=Age
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question b009eec6-ea80-4747-ad46-4af5c24984cf, label=Condition
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=9a02e38b-d2f7-483d-84f5-3eaea4e4b627, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'search@example.com', 'mobile': '9992223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'search_tester'}
INFO:app:#x1F512 Password set for user: search_tester
INFO:app:✅ User registered successfully: search_tester (search@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'search@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: search@example.com
INFO:app:Login successful for employee user search@example.com
INFO:app:Issued JWT for user search_tester (ID: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1), roles: ['admin']
INFO:app:Returning JSON response for user search_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User search_tester (ID: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1) is attempting to create a form with data: {'id': '4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee', 'slug': 'search-test-a3fe89', 'status': 'published', 'title': 'Search Test Form', 'versions': [{'sections': [{'id': 'fd123374-65bf-42d7-af67-16ff08456d29', 'questions': [{'field_type': 'input', 'id': '6693f442-55b0-43af-9ff9-ece9b678741f', 'label': 'Name'}, {'field_type': 'input', 'id': 'df1454c8-157f-40e1-9811-115959039ed0', 'label': 'Age'}, {'field_type': 'input', 'id': 'b009eec6-ea80-4747-ad46-4af5c24984cf', 'label': 'Condition'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee created successfully by user search_tester (ID: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1)
INFO:app:Received submission for form_id: 4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee
INFO:app:Parsed JSON submission: {'fd123374-65bf-42d7-af67-16ff08456d29': {'6693f442-55b0-43af-9ff9-ece9b678741f': 'John', 'b009eec6-ea80-4747-ad46-4af5c24984cf': 'Diabetes', 'df1454c8-157f-40e1-9811-115959039ed0': 65}}
INFO:app:Current user: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1, Form title: Search Test Form
INFO:app:Processing section: fd123374-65bf-42d7-af67-16ff08456d29, repeatable=False
DEBUG:app:Checking question 6693f442-55b0-43af-9ff9-ece9b678741f, label=Name
DEBUG:app:Checking question df1454c8-157f-40e1-9811-115959039ed0, label=Age
DEBUG:app:Checking question b009eec6-ea80-4747-ad46-4af5c24984cf, label=Condition
INFO:app:Submission saved: response_id=cfc066f3-5d58-4ca0-8e9d-04340b2e035d, is_draft=False
INFO:app:Received submission for form_id: 4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee
INFO:app:Parsed JSON submission: {'fd123374-65bf-42d7-af67-16ff08456d29': {'6693f442-55b0-43af-9ff9-ece9b678741f': 'Jane', 'b009eec6-ea80-4747-ad46-4af5c24984cf': 'Healthy', 'df1454c8-157f-40e1-9811-115959039ed0': 25}}
INFO:app:Current user: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1, Form title: Search Test Form
INFO:app:Processing section: fd123374-65bf-42d7-af67-16ff08456d29, repeatable=False
DEBUG:app:Checking question 6693f442-55b0-43af-9ff9-ece9b678741f, label=Name
DEBUG:app:Checking question df1454c8-157f-40e1-9811-115959039ed0, label=Age
DEBUG:app:Checking question b009eec6-ea80-4747-ad46-4af5c24984cf, label=Condition
INFO:app:Submission saved: response_id=580b3ed3-6add-4fbf-8387-08839475252a, is_draft=False
INFO:app:Received submission for form_id: 4d4a1084-f8c4-4ebb-a78b-1c7e1f9e56ee
INFO:app:Parsed JSON submission: {'fd123374-65bf-42d7-af67-16ff08456d29': {'6693f442-55b0-43af-9ff9-ece9b678741f': 'Bob', 'b009eec6-ea80-4747-ad46-4af5c24984cf': 'Flu', 'df1454c8-157f-40e1-9811-115959039ed0': 70}}
INFO:app:Current user: 7cc7b5d3-a4e5-4234-ae92-685d9d9242f1, Form title: Search Test Form
INFO:app:Processing section: fd123374-65bf-42d7-af67-16ff08456d29, repeatable=False
DEBUG:app:Checking question 6693f442-55b0-43af-9ff9-ece9b678741f, label=Name
DEBUG:app:Checking question df1454c8-157f-40e1-9811-115959039ed0, label=Age
DEBUG:app:Checking question b009eec6-ea80-4747-ad46-4af5c24984cf, label=Condition
INFO:app:Submission saved: response_id=9a02e38b-d2f7-483d-84f5-3eaea4e4b627, is_draft=False

</system-err></testcase><testcase classname="tests.test_ai_security_scan" name="test_ai_security_scan" time="0.490"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sec@example.com', 'mobile': '9998881112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sec_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sec_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sec_tester (sec@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sec@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sec@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sec@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sec_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65) is attempting to create a form with data: {'id': 'ee8bd3c1-7584-469b-aa86-5b61f2f9d196', 'is_public': True, 'slug': 'sec-test-3ce374', 'status': 'published', 'title': 'Insecure Form', 'versions': [{'sections': [{'id': '27faa7a8-fcf5-40c0-854a-03f9e5420734', 'questions': [{'field_type': 'input', 'id': '2761d508-a0d5-4e36-b32c-61780ed67fc6', 'label': 'Full Name'}, {'field_type': 'textarea', 'id': '08dd217d-7763-499c-86d9-4c1ec047ad0e', 'label': 'Address'}, {'field_type': 'input', 'id': '7c7d1268-eb0d-4b77-a0a5-b8f6a655af6a', 'label': 'SSN'}, {'field_type': 'textarea', 'id': 'd03fb485-8a92-42d8-b547-1a8edcbea7d4', 'label': 'Comments'}, {'field_type': 'textarea', 'id': 'd5749d8b-7d94-47af-a17a-db11ffce999f', 'label': 'Notes'}, {'field_type': 'textarea', 'id': '1abea188-46dd-4e2f-857f-52228e17a159', 'label': 'Feedback'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form ee8bd3c1-7584-469b-aa86-5b61f2f9d196 created successfully by user sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65) is attempting to create a form with data: {'id': '9138be24-97f0-46b2-a0d9-7dd299b1095c', 'is_public': False, 'slug': 'secure-test-868596', 'status': 'published', 'title': 'Secure Form', 'versions': [{'sections': [{'id': '27faa7a8-fcf5-40c0-854a-03f9e5420734', 'questions': [{'field_type': 'input', 'id': '8d2c477c-2bd4-4d3d-95b6-438b6aa65f57', 'is_required': True, 'label': 'Name'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 9138be24-97f0-46b2-a0d9-7dd299b1095c created successfully by user sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'sec@example.com', 'mobile': '9998881112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sec_tester'}
INFO:app:#x1F512 Password set for user: sec_tester
INFO:app:✅ User registered successfully: sec_tester (sec@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sec@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: sec@example.com
INFO:app:Login successful for employee user sec@example.com
INFO:app:Issued JWT for user sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65), roles: ['admin']
INFO:app:Returning JSON response for user sec_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65) is attempting to create a form with data: {'id': 'ee8bd3c1-7584-469b-aa86-5b61f2f9d196', 'is_public': True, 'slug': 'sec-test-3ce374', 'status': 'published', 'title': 'Insecure Form', 'versions': [{'sections': [{'id': '27faa7a8-fcf5-40c0-854a-03f9e5420734', 'questions': [{'field_type': 'input', 'id': '2761d508-a0d5-4e36-b32c-61780ed67fc6', 'label': 'Full Name'}, {'field_type': 'textarea', 'id': '08dd217d-7763-499c-86d9-4c1ec047ad0e', 'label': 'Address'}, {'field_type': 'input', 'id': '7c7d1268-eb0d-4b77-a0a5-b8f6a655af6a', 'label': 'SSN'}, {'field_type': 'textarea', 'id': 'd03fb485-8a92-42d8-b547-1a8edcbea7d4', 'label': 'Comments'}, {'field_type': 'textarea', 'id': 'd5749d8b-7d94-47af-a17a-db11ffce999f', 'label': 'Notes'}, {'field_type': 'textarea', 'id': '1abea188-46dd-4e2f-857f-52228e17a159', 'label': 'Feedback'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form ee8bd3c1-7584-469b-aa86-5b61f2f9d196 created successfully by user sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65) is attempting to create a form with data: {'id': '9138be24-97f0-46b2-a0d9-7dd299b1095c', 'is_public': False, 'slug': 'secure-test-868596', 'status': 'published', 'title': 'Secure Form', 'versions': [{'sections': [{'id': '27faa7a8-fcf5-40c0-854a-03f9e5420734', 'questions': [{'field_type': 'input', 'id': '8d2c477c-2bd4-4d3d-95b6-438b6aa65f57', 'is_required': True, 'label': 'Name'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 9138be24-97f0-46b2-a0d9-7dd299b1095c created successfully by user sec_tester (ID: 7940293e-6269-4237-9d9e-708309816f65)

</system-err></testcase><testcase classname="tests.test_ai_templates" name="test_ai_template_generation" time="0.495"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'tpl@example.com', 'mobile': '9997771112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'tpl_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: tpl_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: tpl_tester (tpl@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'tpl@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: tpl@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user tpl@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user tpl_tester (ID: 49ecf23a-0acc-40d1-8375-5f06133ce59f), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user tpl_tester
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'tpl@example.com', 'mobile': '9997771112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'tpl_tester'}
INFO:app:#x1F512 Password set for user: tpl_tester
INFO:app:✅ User registered successfully: tpl_tester (tpl@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'tpl@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: tpl@example.com
INFO:app:Login successful for employee user tpl@example.com
INFO:app:Issued JWT for user tpl_tester (ID: 49ecf23a-0acc-40d1-8375-5f06133ce59f), roles: ['admin']
INFO:app:Returning JSON response for user tpl_tester

</system-err></testcase><testcase classname="tests.test_analytics" name="test_analytics_endpoints" time="0.497"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'analytics_admin_be1f3f@test.com', 'employee_id': 'EMP_4164cd', 'mobile': '7741558327', 'roles': ['admin'], 'user_type': 'employee', 'username': 'analytics_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: analytics_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: analytics_admin (analytics_admin_be1f3f@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'analytics_admin_be1f3f@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: analytics_admin_be1f3f@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user analytics_admin_be1f3f@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user analytics_admin (ID: d02f8c4b-874d-4247-912c-3d3ac8d681a1), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user analytics_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User analytics_admin (ID: d02f8c4b-874d-4247-912c-3d3ac8d681a1) is attempting to create a form with data: {'is_public': True, 'slug': 'analytics-form-47ac1d', 'status': 'published', 'title': 'Analytics Form', 'versions': [{'sections': [{'id': '363dd578-99d8-42fe-9857-5f75362cf0f0', 'questions': [{'field_type': 'radio', 'id': '5fd54b6d-33ce-4d89-861a-230513129a2e', 'is_required': True, 'label': 'Favorite Color', 'options': [{'option_label': 'Red', 'option_value': 'Red'}, {'option_label': 'Blue', 'option_value': 'Blue'}]}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form d8933da4-02fe-4a9d-af6c-6982833a442d created successfully by user analytics_admin (ID: d02f8c4b-874d-4247-912c-3d3ac8d681a1)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: d8933da4-02fe-4a9d-af6c-6982833a442d
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'363dd578-99d8-42fe-9857-5f75362cf0f0': {'5fd54b6d-33ce-4d89-861a-230513129a2e': 'Red'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: d02f8c4b-874d-4247-912c-3d3ac8d681a1, Form title: Analytics Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 363dd578-99d8-42fe-9857-5f75362cf0f0, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 5fd54b6d-33ce-4d89-861a-230513129a2e, label=Favorite Color
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=f8b18121-f1ac-4cfa-b5ba-037c52e06f3b, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: d8933da4-02fe-4a9d-af6c-6982833a442d
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'363dd578-99d8-42fe-9857-5f75362cf0f0': {'5fd54b6d-33ce-4d89-861a-230513129a2e': 'Red'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: d02f8c4b-874d-4247-912c-3d3ac8d681a1, Form title: Analytics Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 363dd578-99d8-42fe-9857-5f75362cf0f0, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 5fd54b6d-33ce-4d89-861a-230513129a2e, label=Favorite Color
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=5cb0a547-c4aa-4c37-b42e-248e559e2b4c, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: d8933da4-02fe-4a9d-af6c-6982833a442d
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'363dd578-99d8-42fe-9857-5f75362cf0f0': {'5fd54b6d-33ce-4d89-861a-230513129a2e': 'Blue'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: d02f8c4b-874d-4247-912c-3d3ac8d681a1, Form title: Analytics Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 363dd578-99d8-42fe-9857-5f75362cf0f0, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 5fd54b6d-33ce-4d89-861a-230513129a2e, label=Favorite Color
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=8cc49581-230b-49aa-9d25-25bae36a9ed9, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'analytics_admin_be1f3f@test.com', 'employee_id': 'EMP_4164cd', 'mobile': '7741558327', 'roles': ['admin'], 'user_type': 'employee', 'username': 'analytics_admin'}
INFO:app:#x1F512 Password set for user: analytics_admin
INFO:app:✅ User registered successfully: analytics_admin (analytics_admin_be1f3f@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'analytics_admin_be1f3f@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: analytics_admin_be1f3f@test.com
INFO:app:Login successful for employee user analytics_admin_be1f3f@test.com
INFO:app:Issued JWT for user analytics_admin (ID: d02f8c4b-874d-4247-912c-3d3ac8d681a1), roles: ['admin']
INFO:app:Returning JSON response for user analytics_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User analytics_admin (ID: d02f8c4b-874d-4247-912c-3d3ac8d681a1) is attempting to create a form with data: {'is_public': True, 'slug': 'analytics-form-47ac1d', 'status': 'published', 'title': 'Analytics Form', 'versions': [{'sections': [{'id': '363dd578-99d8-42fe-9857-5f75362cf0f0', 'questions': [{'field_type': 'radio', 'id': '5fd54b6d-33ce-4d89-861a-230513129a2e', 'is_required': True, 'label': 'Favorite Color', 'options': [{'option_label': 'Red', 'option_value': 'Red'}, {'option_label': 'Blue', 'option_value': 'Blue'}]}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form d8933da4-02fe-4a9d-af6c-6982833a442d created successfully by user analytics_admin (ID: d02f8c4b-874d-4247-912c-3d3ac8d681a1)
INFO:app:Received submission for form_id: d8933da4-02fe-4a9d-af6c-6982833a442d
INFO:app:Parsed JSON submission: {'363dd578-99d8-42fe-9857-5f75362cf0f0': {'5fd54b6d-33ce-4d89-861a-230513129a2e': 'Red'}}
INFO:app:Current user: d02f8c4b-874d-4247-912c-3d3ac8d681a1, Form title: Analytics Form
INFO:app:Processing section: 363dd578-99d8-42fe-9857-5f75362cf0f0, repeatable=False
DEBUG:app:Checking question 5fd54b6d-33ce-4d89-861a-230513129a2e, label=Favorite Color
INFO:app:Submission saved: response_id=f8b18121-f1ac-4cfa-b5ba-037c52e06f3b, is_draft=False
INFO:app:Received submission for form_id: d8933da4-02fe-4a9d-af6c-6982833a442d
INFO:app:Parsed JSON submission: {'363dd578-99d8-42fe-9857-5f75362cf0f0': {'5fd54b6d-33ce-4d89-861a-230513129a2e': 'Red'}}
INFO:app:Current user: d02f8c4b-874d-4247-912c-3d3ac8d681a1, Form title: Analytics Form
INFO:app:Processing section: 363dd578-99d8-42fe-9857-5f75362cf0f0, repeatable=False
DEBUG:app:Checking question 5fd54b6d-33ce-4d89-861a-230513129a2e, label=Favorite Color
INFO:app:Submission saved: response_id=5cb0a547-c4aa-4c37-b42e-248e559e2b4c, is_draft=False
INFO:app:Received submission for form_id: d8933da4-02fe-4a9d-af6c-6982833a442d
INFO:app:Parsed JSON submission: {'363dd578-99d8-42fe-9857-5f75362cf0f0': {'5fd54b6d-33ce-4d89-861a-230513129a2e': 'Blue'}}
INFO:app:Current user: d02f8c4b-874d-4247-912c-3d3ac8d681a1, Form title: Analytics Form
INFO:app:Processing section: 363dd578-99d8-42fe-9857-5f75362cf0f0, repeatable=False
DEBUG:app:Checking question 5fd54b6d-33ce-4d89-861a-230513129a2e, label=Favorite Color
INFO:app:Submission saved: response_id=8cc49581-230b-49aa-9d25-25bae36a9ed9, is_draft=False

</system-err></testcase><testcase classname="tests.test_api" name="test_handle_uhid_api" time="0.513"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: api_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: api_user (api@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user api_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda) is attempting to create a form with data: {'is_public': True, 'slug': 'uhid-form', 'title': 'UHID Form', 'versions': [{'sections': [{'id': '99999999-9999-9999-9999-999999999999', 'questions': [{'field_api_call': 'uhid', 'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'label': 'UHID'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 79a72097-b565-40e4-89d9-f6b6726a31cc created successfully by user api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda)
#x1B[32mINFO    #x1B[0m app:api.py:25 User api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:51 User api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda) is calling eHospital UHID API
#x1B[33mWARNING #x1B[0m app:api.py:59 UHID found(ID: 123456)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
INFO:app:#x1F512 Password set for user: api_user
INFO:app:✅ User registered successfully: api_user (api@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: api@ex.com
INFO:app:Login successful for employee user api@ex.com
INFO:app:Issued JWT for user api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda), roles: ['admin']
INFO:app:Returning JSON response for user api_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda) is attempting to create a form with data: {'is_public': True, 'slug': 'uhid-form', 'title': 'UHID Form', 'versions': [{'sections': [{'id': '99999999-9999-9999-9999-999999999999', 'questions': [{'field_api_call': 'uhid', 'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'label': 'UHID'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 79a72097-b565-40e4-89d9-f6b6726a31cc created successfully by user api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda)
INFO:app:User api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda) is attempting to retrieve UHID
INFO:app:User api_user (ID: 73569fd4-7aa2-4693-90e3-38fddd597dda) is calling eHospital UHID API
WARNING:app:UHID found(ID: 123456)

</system-err></testcase><testcase classname="tests.test_api" name="test_handle_otp_api" time="0.489"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: api_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: api_user (api@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user api_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783) is attempting to create a form with data: {'is_public': True, 'slug': 'otp-form', 'title': 'OTP Form', 'versions': [{'sections': [{'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'questions': [{'field_api_call': 'otp', 'field_type': 'input', 'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'label': 'Mobile'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form ca8ff315-8d7f-4538-a99c-89e2330532cb created successfully by user api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783)
#x1B[32mINFO    #x1B[0m app:api.py:25 User api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:62 User api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783) is calling OTP API
#x1B[32mINFO    #x1B[0m app:api.py:68 OTP sent successfully to 9876543210 for user api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
INFO:app:#x1F512 Password set for user: api_user
INFO:app:✅ User registered successfully: api_user (api@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: api@ex.com
INFO:app:Login successful for employee user api@ex.com
INFO:app:Issued JWT for user api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783), roles: ['admin']
INFO:app:Returning JSON response for user api_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783) is attempting to create a form with data: {'is_public': True, 'slug': 'otp-form', 'title': 'OTP Form', 'versions': [{'sections': [{'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'questions': [{'field_api_call': 'otp', 'field_type': 'input', 'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'label': 'Mobile'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form ca8ff315-8d7f-4538-a99c-89e2330532cb created successfully by user api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783)
INFO:app:User api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783) is attempting to retrieve UHID
INFO:app:User api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783) is calling OTP API
INFO:app:OTP sent successfully to 9876543210 for user api_user (ID: 1e851216-bd93-4c49-9ad3-ddb576589783)

</system-err></testcase><testcase classname="tests.test_api" name="test_handle_form_api" time="0.531"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: api_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: api_user (api@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user api_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is attempting to create a form with data: {'is_public': True, 'slug': 'target', 'status': 'published', 'title': 'Target', 'versions': [{'sections': [{'id': 'ffffffff-ffff-ffff-ffff-ffffffffffff', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 920c4744-be2b-4c22-80ba-a522850d91bb created successfully by user api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is attempting to create a form with data: {'is_public': True, 'slug': 'caller-form', 'title': 'Caller Form', 'versions': [{'sections': [{'id': 'dddddddd-dddd-dddd-dddd-dddddddddddd', 'questions': [{'field_api_call': 'form', 'field_type': 'input', 'id': 'eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee', 'label': 'Search'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 612d4ea4-4220-4ff6-92a3-119ee396857f created successfully by user api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3)
#x1B[32mINFO    #x1B[0m app:api.py:25 User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:74 User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is calling Form API
#x1B[32mINFO    #x1B[0m app:responses.py:585 User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is searching responses for form ID: 920c4744-be2b-4c22-80ba-a522850d91bb
#x1B[35mDEBUG   #x1B[0m app:responses.py:590 Received filters: {'form_id': '920c4744-be2b-4c22-80ba-a522850d91bb', 'data': {}}
#x1B[32mINFO    #x1B[0m app:api.py:102 Form data retrieved successfully for user api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
INFO:app:#x1F512 Password set for user: api_user
INFO:app:✅ User registered successfully: api_user (api@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: api@ex.com
INFO:app:Login successful for employee user api@ex.com
INFO:app:Issued JWT for user api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3), roles: ['admin']
INFO:app:Returning JSON response for user api_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is attempting to create a form with data: {'is_public': True, 'slug': 'target', 'status': 'published', 'title': 'Target', 'versions': [{'sections': [{'id': 'ffffffff-ffff-ffff-ffff-ffffffffffff', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 920c4744-be2b-4c22-80ba-a522850d91bb created successfully by user api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is attempting to create a form with data: {'is_public': True, 'slug': 'caller-form', 'title': 'Caller Form', 'versions': [{'sections': [{'id': 'dddddddd-dddd-dddd-dddd-dddddddddddd', 'questions': [{'field_api_call': 'form', 'field_type': 'input', 'id': 'eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee', 'label': 'Search'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 612d4ea4-4220-4ff6-92a3-119ee396857f created successfully by user api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3)
INFO:app:User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is attempting to retrieve UHID
INFO:app:User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is calling Form API
INFO:app:User api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3) is searching responses for form ID: 920c4744-be2b-4c22-80ba-a522850d91bb
DEBUG:app:Received filters: {'form_id': '920c4744-be2b-4c22-80ba-a522850d91bb', 'data': {}}
INFO:app:Form data retrieved successfully for user api_user (ID: 5d91bd77-dd27-4dac-a876-fef8283a37b3)

</system-err></testcase><testcase classname="tests.test_approval_workflow" name="test_approval_workflow" time="1.019"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin@example.com', 'mobile': '1231231234', 'roles': ['admin'], 'user_type': 'employee', 'username': 'final_boss'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: final_boss
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: final_boss (admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user final_boss (ID: 8314bc99-7223-42d6-93fe-6b575f8a0488), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user final_boss
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'joe@example.com', 'mobile': '4324324321', 'roles': ['manager'], 'user_type': 'employee', 'username': 'manager_joe'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: manager_joe
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: manager_joe (joe@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'joe@example.com', 'password': 'ManagerPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: joe@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user joe@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user manager_joe (ID: 4eaecd1e-9518-4a37-bac5-a169b598cc2e), roles: ['manager']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user manager_joe
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User final_boss (ID: 8314bc99-7223-42d6-93fe-6b575f8a0488) is attempting to create a form with data: {'approval_enabled': True, 'approval_steps': [{'name': 'Manager Review', 'order': 1, 'required_role': 'manager'}, {'name': 'Admin Review', 'order': 2, 'required_role': 'admin'}], 'is_public': True, 'slug': 'app-test-05d00e', 'status': 'published', 'title': 'Approval Form', 'versions': [{'sections': [{'id': 'f9ac54cb-be31-4a7b-8dbb-92e2015894ab', 'questions': [{'field_type': 'input', 'id': 'beb4032c-ceae-47c2-a93f-8e09fd5ac6ac', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form fe963db4-1f53-4240-9aa2-837222f7af5f created successfully by user final_boss (ID: 8314bc99-7223-42d6-93fe-6b575f8a0488)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: fe963db4-1f53-4240-9aa2-837222f7af5f
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'f9ac54cb-be31-4a7b-8dbb-92e2015894ab': {'beb4032c-ceae-47c2-a93f-8e09fd5ac6ac': 'Submit'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 4eaecd1e-9518-4a37-bac5-a169b598cc2e, Form title: Approval Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: f9ac54cb-be31-4a7b-8dbb-92e2015894ab, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question beb4032c-ceae-47c2-a93f-8e09fd5ac6ac, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=eb4932c9-6160-4d8b-ab25-c835d14beaff, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin@example.com', 'mobile': '1231231234', 'roles': ['admin'], 'user_type': 'employee', 'username': 'final_boss'}
INFO:app:#x1F512 Password set for user: final_boss
INFO:app:✅ User registered successfully: final_boss (admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin@example.com
INFO:app:Login successful for employee user admin@example.com
INFO:app:Issued JWT for user final_boss (ID: 8314bc99-7223-42d6-93fe-6b575f8a0488), roles: ['admin']
INFO:app:Returning JSON response for user final_boss
INFO:app:Received registration data: {'email': 'joe@example.com', 'mobile': '4324324321', 'roles': ['manager'], 'user_type': 'employee', 'username': 'manager_joe'}
INFO:app:#x1F512 Password set for user: manager_joe
INFO:app:✅ User registered successfully: manager_joe (joe@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'joe@example.com', 'password': 'ManagerPassword123'}
INFO:app:Employee login attempt with identifier: joe@example.com
INFO:app:Login successful for employee user joe@example.com
INFO:app:Issued JWT for user manager_joe (ID: 4eaecd1e-9518-4a37-bac5-a169b598cc2e), roles: ['manager']
INFO:app:Returning JSON response for user manager_joe
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User final_boss (ID: 8314bc99-7223-42d6-93fe-6b575f8a0488) is attempting to create a form with data: {'approval_enabled': True, 'approval_steps': [{'name': 'Manager Review', 'order': 1, 'required_role': 'manager'}, {'name': 'Admin Review', 'order': 2, 'required_role': 'admin'}], 'is_public': True, 'slug': 'app-test-05d00e', 'status': 'published', 'title': 'Approval Form', 'versions': [{'sections': [{'id': 'f9ac54cb-be31-4a7b-8dbb-92e2015894ab', 'questions': [{'field_type': 'input', 'id': 'beb4032c-ceae-47c2-a93f-8e09fd5ac6ac', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form fe963db4-1f53-4240-9aa2-837222f7af5f created successfully by user final_boss (ID: 8314bc99-7223-42d6-93fe-6b575f8a0488)
INFO:app:Received submission for form_id: fe963db4-1f53-4240-9aa2-837222f7af5f
INFO:app:Parsed JSON submission: {'f9ac54cb-be31-4a7b-8dbb-92e2015894ab': {'beb4032c-ceae-47c2-a93f-8e09fd5ac6ac': 'Submit'}}
INFO:app:Current user: 4eaecd1e-9518-4a37-bac5-a169b598cc2e, Form title: Approval Form
INFO:app:Processing section: f9ac54cb-be31-4a7b-8dbb-92e2015894ab, repeatable=False
DEBUG:app:Checking question beb4032c-ceae-47c2-a93f-8e09fd5ac6ac, label=Q1
INFO:app:Submission saved: response_id=eb4932c9-6160-4d8b-ab25-c835d14beaff, is_draft=False

</system-err></testcase><testcase classname="tests.test_auth" name="test_register_success" time="0.330"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin@example.com', 'employee_id': 'EMP001', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'testadmin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: testadmin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: testadmin (admin@example.com)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin@example.com', 'employee_id': 'EMP001', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'testadmin'}
INFO:app:#x1F512 Password set for user: testadmin
INFO:app:✅ User registered successfully: testadmin (admin@example.com)

</system-err></testcase><testcase classname="tests.test_auth" name="test_register_duplicate_email" time="0.495"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user@example.com', 'employee_id': 'EMP002', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'user1'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user1
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user1 (user@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user@example.com', 'employee_id': 'EMP002', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'user1'}
#x1B[33mWARNING #x1B[0m app:auth_route.py:37 ⚠️  Email already registered: user@example.com
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'user@example.com', 'employee_id': 'EMP002', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'user1'}
INFO:app:#x1F512 Password set for user: user1
INFO:app:✅ User registered successfully: user1 (user@example.com)
INFO:app:Received registration data: {'email': 'user@example.com', 'employee_id': 'EMP002', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'user1'}
WARNING:app:⚠️  Email already registered: user@example.com

</system-err></testcase><testcase classname="tests.test_auth" name="test_login_success" time="0.493"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'login@example.com', 'employee_id': 'EMP003', 'mobile': '2233445566', 'roles': ['user'], 'user_type': 'employee', 'username': 'loginuser'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: loginuser
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: loginuser (login@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'login@example.com', 'password': 'SecretPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: login@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user login@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user loginuser (ID: 3cc502bc-091a-4d65-8a3b-823affe7f8f1), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user loginuser
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'login@example.com', 'employee_id': 'EMP003', 'mobile': '2233445566', 'roles': ['user'], 'user_type': 'employee', 'username': 'loginuser'}
INFO:app:#x1F512 Password set for user: loginuser
INFO:app:✅ User registered successfully: loginuser (login@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'login@example.com', 'password': 'SecretPassword123'}
INFO:app:Employee login attempt with identifier: login@example.com
INFO:app:Login successful for employee user login@example.com
INFO:app:Issued JWT for user loginuser (ID: 3cc502bc-091a-4d65-8a3b-823affe7f8f1), roles: ['user']
INFO:app:Returning JSON response for user loginuser

</system-err></testcase><testcase classname="tests.test_auth" name="test_login_invalid_credentials" time="0.001"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'nonexistent@example.com', 'password': 'wrongpassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: nonexistent@example.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:88 Login failed: No user found for identifier nonexistent@example.com
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'nonexistent@example.com', 'password': 'wrongpassword'}
INFO:app:Employee login attempt with identifier: nonexistent@example.com
WARNING:app:Login failed: No user found for identifier nonexistent@example.com

</system-err></testcase><testcase classname="tests.test_auth" name="test_generate_otp_success" time="0.334"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'otp@example.com', 'mobile': '1234567890', 'roles': ['user'], 'user_type': 'employee', 'username': 'otp_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: otp_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: otp_user (otp@example.com)
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:201 [DEBUG] OTP for 1234567890: 873714
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'otp@example.com', 'mobile': '1234567890', 'roles': ['user'], 'user_type': 'employee', 'username': 'otp_user'}
INFO:app:#x1F512 Password set for user: otp_user
INFO:app:✅ User registered successfully: otp_user (otp@example.com)
DEBUG:app:[DEBUG] OTP for 1234567890: 873714

</system-err></testcase><testcase classname="tests.test_auth" name="test_logout" time="0.508"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'logout@example.com', 'employee_id': 'EMP004', 'mobile': '4455667788', 'roles': ['user'], 'user_type': 'employee', 'username': 'logoutuser'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: logoutuser
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: logoutuser (logout@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'logout@example.com', 'password': 'Password123!'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: logout@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user logout@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user logoutuser (ID: 45aa77e5-93f3-46a4-a4a2-3a8a5b320415), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user logoutuser
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'logout@example.com', 'employee_id': 'EMP004', 'mobile': '4455667788', 'roles': ['user'], 'user_type': 'employee', 'username': 'logoutuser'}
INFO:app:#x1F512 Password set for user: logoutuser
INFO:app:✅ User registered successfully: logoutuser (logout@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'logout@example.com', 'password': 'Password123!'}
INFO:app:Employee login attempt with identifier: logout@example.com
INFO:app:Login successful for employee user logout@example.com
INFO:app:Issued JWT for user logoutuser (ID: 45aa77e5-93f3-46a4-a4a2-3a8a5b320415), roles: ['user']
INFO:app:Returning JSON response for user logoutuser

</system-err></testcase><testcase classname="tests.test_bulk_features" name="test_bulk_response_export" time="0.504"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'bulk_admin@example.com', 'mobile': '9998887770', 'roles': ['admin'], 'user_type': 'employee', 'username': 'bulk_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: bulk_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: bulk_admin (bulk_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'bulk_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: bulk_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user bulk_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user bulk_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a) is attempting to create a form with data: {'id': '20bcc336-5164-46d8-a848-803bc2d07718', 'slug': 'slug-20bcc336', 'status': 'published', 'title': 'Form One', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 20bcc336-5164-46d8-a848-803bc2d07718 created successfully by user bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 20bcc336-5164-46d8-a848-803bc2d07718
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'section_id_placeholder': {'question_id_placeholder': 'answer'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 19c05a72-7be6-4c41-a489-6ed2acc52e3a, Form title: Form One
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 9008704a-0dc1-4519-9303-b16f2b9e0712, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f7029f84-e409-4fe2-a587-c3ffbc955c8d, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=1fabd7df-ab85-49df-bf23-914da3b4a8fa, is_draft=False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a) is attempting to create a form with data: {'id': '35a407f8-b13d-4b4a-94a8-ea4c744c0c24', 'slug': 'slug-35a407f8', 'status': 'published', 'title': 'Form Two', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 35a407f8-b13d-4b4a-94a8-ea4c744c0c24 created successfully by user bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 35a407f8-b13d-4b4a-94a8-ea4c744c0c24
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'section_id_placeholder': {'question_id_placeholder': 'answer'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 19c05a72-7be6-4c41-a489-6ed2acc52e3a, Form title: Form Two
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 7ce8be2b-acc4-4411-a343-405075c8bbf8, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question bd9a13db-9f9c-4a4a-a16f-7b3479e7f11a, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=8181fbe1-74a4-45a8-9682-de5d52be9114, is_draft=False
--------------------------------- Captured Out ---------------------------------
ZIP files: ['Form One_20bcc336.csv', 'Form Two_35a407f8.csv']

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'bulk_admin@example.com', 'mobile': '9998887770', 'roles': ['admin'], 'user_type': 'employee', 'username': 'bulk_admin'}
INFO:app:#x1F512 Password set for user: bulk_admin
INFO:app:✅ User registered successfully: bulk_admin (bulk_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'bulk_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: bulk_admin@example.com
INFO:app:Login successful for employee user bulk_admin@example.com
INFO:app:Issued JWT for user bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a), roles: ['admin']
INFO:app:Returning JSON response for user bulk_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a) is attempting to create a form with data: {'id': '20bcc336-5164-46d8-a848-803bc2d07718', 'slug': 'slug-20bcc336', 'status': 'published', 'title': 'Form One', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 20bcc336-5164-46d8-a848-803bc2d07718 created successfully by user bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a)
INFO:app:Received submission for form_id: 20bcc336-5164-46d8-a848-803bc2d07718
INFO:app:Parsed JSON submission: {'section_id_placeholder': {'question_id_placeholder': 'answer'}}
INFO:app:Current user: 19c05a72-7be6-4c41-a489-6ed2acc52e3a, Form title: Form One
INFO:app:Processing section: 9008704a-0dc1-4519-9303-b16f2b9e0712, repeatable=False
DEBUG:app:Checking question f7029f84-e409-4fe2-a587-c3ffbc955c8d, label=Q1
INFO:app:Submission saved: response_id=1fabd7df-ab85-49df-bf23-914da3b4a8fa, is_draft=False
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a) is attempting to create a form with data: {'id': '35a407f8-b13d-4b4a-94a8-ea4c744c0c24', 'slug': 'slug-35a407f8', 'status': 'published', 'title': 'Form Two', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 35a407f8-b13d-4b4a-94a8-ea4c744c0c24 created successfully by user bulk_admin (ID: 19c05a72-7be6-4c41-a489-6ed2acc52e3a)
INFO:app:Received submission for form_id: 35a407f8-b13d-4b4a-94a8-ea4c744c0c24
INFO:app:Parsed JSON submission: {'section_id_placeholder': {'question_id_placeholder': 'answer'}}
INFO:app:Current user: 19c05a72-7be6-4c41-a489-6ed2acc52e3a, Form title: Form Two
INFO:app:Processing section: 7ce8be2b-acc4-4411-a343-405075c8bbf8, repeatable=False
DEBUG:app:Checking question bd9a13db-9f9c-4a4a-a16f-7b3479e7f11a, label=Q1
INFO:app:Submission saved: response_id=8181fbe1-74a4-45a8-9682-de5d52be9114, is_draft=False

</system-err></testcase><testcase classname="tests.test_bulk_features" name="test_bulk_option_import" time="0.528"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'bulk_admin@example.com', 'mobile': '9998887770', 'roles': ['admin'], 'user_type': 'employee', 'username': 'bulk_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: bulk_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: bulk_admin (bulk_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'bulk_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: bulk_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user bulk_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user bulk_admin (ID: 61439715-9a34-47e8-a7a2-dbdbdbc3b6f6), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user bulk_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User bulk_admin (ID: 61439715-9a34-47e8-a7a2-dbdbdbc3b6f6) is attempting to create a form with data: {'id': '433a53e6-b0a9-4f7c-94b8-fd098d07d105', 'slug': 'opt-test-bc5de3', 'title': 'Option Import Test', 'versions': [{'sections': [{'id': 'c7998b2d-25c4-4f06-b2dd-67e833329f47', 'questions': [{'field_type': 'radio', 'id': 'ecb61094-23b2-4c58-b78c-dbdfcdd57b36', 'label': 'Select Category', 'options': []}], 'title': 'Section'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 433a53e6-b0a9-4f7c-94b8-fd098d07d105 created successfully by user bulk_admin (ID: 61439715-9a34-47e8-a7a2-dbdbdbc3b6f6)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'bulk_admin@example.com', 'mobile': '9998887770', 'roles': ['admin'], 'user_type': 'employee', 'username': 'bulk_admin'}
INFO:app:#x1F512 Password set for user: bulk_admin
INFO:app:✅ User registered successfully: bulk_admin (bulk_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'bulk_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: bulk_admin@example.com
INFO:app:Login successful for employee user bulk_admin@example.com
INFO:app:Issued JWT for user bulk_admin (ID: 61439715-9a34-47e8-a7a2-dbdbdbc3b6f6), roles: ['admin']
INFO:app:Returning JSON response for user bulk_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User bulk_admin (ID: 61439715-9a34-47e8-a7a2-dbdbdbc3b6f6) is attempting to create a form with data: {'id': '433a53e6-b0a9-4f7c-94b8-fd098d07d105', 'slug': 'opt-test-bc5de3', 'title': 'Option Import Test', 'versions': [{'sections': [{'id': 'c7998b2d-25c4-4f06-b2dd-67e833329f47', 'questions': [{'field_type': 'radio', 'id': 'ecb61094-23b2-4c58-b78c-dbdfcdd57b36', 'label': 'Select Category', 'options': []}], 'title': 'Section'}], 'version': '1.0'}]}
INFO:app:Form 433a53e6-b0a9-4f7c-94b8-fd098d07d105 created successfully by user bulk_admin (ID: 61439715-9a34-47e8-a7a2-dbdbdbc3b6f6)

</system-err></testcase><testcase classname="tests.test_cloning" name="test_cloning_and_templates" time="0.498"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'clone_admin_8cd313@test.com', 'employee_id': 'EMP_57ec47', 'mobile': '7752701894', 'roles': ['admin'], 'user_type': 'employee', 'username': 'clone_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: clone_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: clone_admin (clone_admin_8cd313@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'clone_admin_8cd313@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: clone_admin_8cd313@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user clone_admin_8cd313@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user clone_admin (ID: 1c384744-7c4b-4c87-8518-2e888c2c56d7), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user clone_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User clone_admin (ID: 1c384744-7c4b-4c87-8518-2e888c2c56d7) is attempting to create a form with data: {'is_public': True, 'is_template': True, 'slug': 'orig-e011fe', 'status': 'published', 'title': 'Original Form', 'versions': [{'sections': [{'id': '49cf3580-7bc2-434e-9378-064ef6fbfc5b', 'questions': [], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form c1fd36ef-5cb4-4014-896a-be315ed17ce9 created successfully by user clone_admin (ID: 1c384744-7c4b-4c87-8518-2e888c2c56d7)
#x1B[32mINFO    #x1B[0m app:form.py:256 Form c1fd36ef-5cb4-4014-896a-be315ed17ce9 cloned to 5a040710-8cc0-4d27-b027-1c2c79bc276f by clone_admin
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'clone_admin_8cd313@test.com', 'employee_id': 'EMP_57ec47', 'mobile': '7752701894', 'roles': ['admin'], 'user_type': 'employee', 'username': 'clone_admin'}
INFO:app:#x1F512 Password set for user: clone_admin
INFO:app:✅ User registered successfully: clone_admin (clone_admin_8cd313@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'clone_admin_8cd313@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: clone_admin_8cd313@test.com
INFO:app:Login successful for employee user clone_admin_8cd313@test.com
INFO:app:Issued JWT for user clone_admin (ID: 1c384744-7c4b-4c87-8518-2e888c2c56d7), roles: ['admin']
INFO:app:Returning JSON response for user clone_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User clone_admin (ID: 1c384744-7c4b-4c87-8518-2e888c2c56d7) is attempting to create a form with data: {'is_public': True, 'is_template': True, 'slug': 'orig-e011fe', 'status': 'published', 'title': 'Original Form', 'versions': [{'sections': [{'id': '49cf3580-7bc2-434e-9378-064ef6fbfc5b', 'questions': [], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form c1fd36ef-5cb4-4014-896a-be315ed17ce9 created successfully by user clone_admin (ID: 1c384744-7c4b-4c87-8518-2e888c2c56d7)
INFO:app:Form c1fd36ef-5cb4-4014-896a-be315ed17ce9 cloned to 5a040710-8cc0-4d27-b027-1c2c79bc276f by clone_admin

</system-err></testcase><testcase classname="tests.test_comments" name="test_response_comments" time="0.502"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'comm_admin_44ef3f@test.com', 'employee_id': 'EMP_029fed', 'mobile': '7763858393', 'roles': ['admin'], 'user_type': 'employee', 'username': 'comm_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: comm_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: comm_admin (comm_admin_44ef3f@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'comm_admin_44ef3f@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: comm_admin_44ef3f@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user comm_admin_44ef3f@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user comm_admin (ID: 021f76c7-1647-4346-9df1-b279e9f32aa0), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user comm_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User comm_admin (ID: 021f76c7-1647-4346-9df1-b279e9f32aa0) is attempting to create a form with data: {'is_public': True, 'slug': 'comm-form-7a73df', 'status': 'published', 'title': 'Comment Form', 'versions': [{'sections': [], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form e6ace59b-62c3-4453-afd4-9af9779b02bb created successfully by user comm_admin (ID: 021f76c7-1647-4346-9df1-b279e9f32aa0)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e6ace59b-62c3-4453-afd4-9af9779b02bb
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 021f76c7-1647-4346-9df1-b279e9f32aa0, Form title: Comment Form
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=16ccc27d-1da3-4556-a2f5-fa7a75a21927, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'comm_admin_44ef3f@test.com', 'employee_id': 'EMP_029fed', 'mobile': '7763858393', 'roles': ['admin'], 'user_type': 'employee', 'username': 'comm_admin'}
INFO:app:#x1F512 Password set for user: comm_admin
INFO:app:✅ User registered successfully: comm_admin (comm_admin_44ef3f@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'comm_admin_44ef3f@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: comm_admin_44ef3f@test.com
INFO:app:Login successful for employee user comm_admin_44ef3f@test.com
INFO:app:Issued JWT for user comm_admin (ID: 021f76c7-1647-4346-9df1-b279e9f32aa0), roles: ['admin']
INFO:app:Returning JSON response for user comm_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User comm_admin (ID: 021f76c7-1647-4346-9df1-b279e9f32aa0) is attempting to create a form with data: {'is_public': True, 'slug': 'comm-form-7a73df', 'status': 'published', 'title': 'Comment Form', 'versions': [{'sections': [], 'version': '1.0'}]}
INFO:app:Form e6ace59b-62c3-4453-afd4-9af9779b02bb created successfully by user comm_admin (ID: 021f76c7-1647-4346-9df1-b279e9f32aa0)
INFO:app:Received submission for form_id: e6ace59b-62c3-4453-afd4-9af9779b02bb
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 021f76c7-1647-4346-9df1-b279e9f32aa0, Form title: Comment Form
INFO:app:Submission saved: response_id=16ccc27d-1da3-4556-a2f5-fa7a75a21927, is_draft=False

</system-err></testcase><testcase classname="tests.test_conditional_validation" name="test_conditional_required_logic" time="1.039"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_cond@ex.com', 'employee_id': 'ACOND1', 'mobile': '9988770011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_cond'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_cond (admin_cond@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_cond@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_cond (ID: fe39cbae-1a1d-4f70-9ce2-5084c5cc1f72), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_cond@ex.com', 'employee_id': 'UCOND1', 'mobile': '8877660022', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_cond'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_cond (user_cond@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_cond@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_cond (ID: 72001650-abe5-4b8c-9ca4-6080fef627fe), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_cond
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_cond (ID: fe39cbae-1a1d-4f70-9ce2-5084c5cc1f72) is attempting to create a form with data: {'is_public': True, 'slug': 'cond-form', 'status': 'published', 'title': 'Conditional Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'radio', 'id': '22222222-2222-2222-2222-222222222222', 'label': 'Do you need extra info?', 'options': [{'option_label': 'Yes', 'option_value': 'yes'}, {'option_label': 'No', 'option_value': 'no'}]}, {'field_type': 'input', 'id': '33333333-3333-3333-3333-333333333333', 'is_required': False, 'label': 'Please specify', 'required_condition': "22222222-2222-2222-2222-222222222222 == 'yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form b98b9f9e-805a-429c-85a6-ce13372e2839 created successfully by user admin_cond (ID: fe39cbae-1a1d-4f70-9ce2-5084c5cc1f72)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: b98b9f9e-805a-429c-85a6-ce13372e2839
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'no', '33333333-3333-3333-3333-333333333333': ''}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 72001650-abe5-4b8c-9ca4-6080fef627fe, Form title: Conditional Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=79c8eafb-049b-4975-adee-0b4ae8c9ce78, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: b98b9f9e-805a-429c-85a6-ce13372e2839
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'yes', '33333333-3333-3333-3333-333333333333': ''}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 72001650-abe5-4b8c-9ca4-6080fef627fe, Form title: Conditional Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
#x1B[35mDEBUG   #x1B[0m app:validation.py:143 Field 33333333-3333-3333-3333-333333333333 is mandatory due to condition: 22222222-2222-2222-2222-222222222222 == 'yes'
#x1B[33mWARNING #x1B[0m app:validation.py:186 33333333-3333-3333-3333-333333333333: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': '33333333-3333-3333-3333-333333333333', 'error': 'Required field missing'}]
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: b98b9f9e-805a-429c-85a6-ce13372e2839
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'yes', '33333333-3333-3333-3333-333333333333': 'Some info'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 72001650-abe5-4b8c-9ca4-6080fef627fe, Form title: Conditional Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
#x1B[35mDEBUG   #x1B[0m app:validation.py:143 Field 33333333-3333-3333-3333-333333333333 is mandatory due to condition: 22222222-2222-2222-2222-222222222222 == 'yes'
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=209e0fce-89d6-441b-8c7b-439dd5394fd9, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_cond@ex.com', 'employee_id': 'ACOND1', 'mobile': '9988770011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_cond'}
INFO:app:#x1F512 Password set for user: admin_cond
INFO:app:✅ User registered successfully: admin_cond (admin_cond@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_cond@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_cond@ex.com
INFO:app:Login successful for employee user admin_cond@ex.com
INFO:app:Issued JWT for user admin_cond (ID: fe39cbae-1a1d-4f70-9ce2-5084c5cc1f72), roles: ['admin']
INFO:app:Returning JSON response for user admin_cond
INFO:app:Received registration data: {'email': 'user_cond@ex.com', 'employee_id': 'UCOND1', 'mobile': '8877660022', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_cond'}
INFO:app:#x1F512 Password set for user: user_cond
INFO:app:✅ User registered successfully: user_cond (user_cond@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_cond@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_cond@ex.com
INFO:app:Login successful for employee user user_cond@ex.com
INFO:app:Issued JWT for user user_cond (ID: 72001650-abe5-4b8c-9ca4-6080fef627fe), roles: ['user']
INFO:app:Returning JSON response for user user_cond
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_cond (ID: fe39cbae-1a1d-4f70-9ce2-5084c5cc1f72) is attempting to create a form with data: {'is_public': True, 'slug': 'cond-form', 'status': 'published', 'title': 'Conditional Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'radio', 'id': '22222222-2222-2222-2222-222222222222', 'label': 'Do you need extra info?', 'options': [{'option_label': 'Yes', 'option_value': 'yes'}, {'option_label': 'No', 'option_value': 'no'}]}, {'field_type': 'input', 'id': '33333333-3333-3333-3333-333333333333', 'is_required': False, 'label': 'Please specify', 'required_condition': "22222222-2222-2222-2222-222222222222 == 'yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form b98b9f9e-805a-429c-85a6-ce13372e2839 created successfully by user admin_cond (ID: fe39cbae-1a1d-4f70-9ce2-5084c5cc1f72)
INFO:app:Received submission for form_id: b98b9f9e-805a-429c-85a6-ce13372e2839
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'no', '33333333-3333-3333-3333-333333333333': ''}}
INFO:app:Current user: 72001650-abe5-4b8c-9ca4-6080fef627fe, Form title: Conditional Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
DEBUG:app:Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
DEBUG:app:Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
INFO:app:Submission saved: response_id=79c8eafb-049b-4975-adee-0b4ae8c9ce78, is_draft=False
INFO:app:Received submission for form_id: b98b9f9e-805a-429c-85a6-ce13372e2839
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'yes', '33333333-3333-3333-3333-333333333333': ''}}
INFO:app:Current user: 72001650-abe5-4b8c-9ca4-6080fef627fe, Form title: Conditional Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
DEBUG:app:Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
DEBUG:app:Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
DEBUG:app:Field 33333333-3333-3333-3333-333333333333 is mandatory due to condition: 22222222-2222-2222-2222-222222222222 == 'yes'
WARNING:app:33333333-3333-3333-3333-333333333333: Required field missing
WARNING:app:Validation failed with errors: [{'id': '33333333-3333-3333-3333-333333333333', 'error': 'Required field missing'}]
INFO:app:Received submission for form_id: b98b9f9e-805a-429c-85a6-ce13372e2839
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'yes', '33333333-3333-3333-3333-333333333333': 'Some info'}}
INFO:app:Current user: 72001650-abe5-4b8c-9ca4-6080fef627fe, Form title: Conditional Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
DEBUG:app:Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
DEBUG:app:Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
DEBUG:app:Field 33333333-3333-3333-3333-333333333333 is mandatory due to condition: 22222222-2222-2222-2222-222222222222 == 'yes'
INFO:app:Submission saved: response_id=209e0fce-89d6-441b-8c7b-439dd5394fd9, is_draft=False

</system-err></testcase><testcase classname="tests.test_conditional_validation" name="test_public_submission_validation" time="1.003"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_cond@ex.com', 'employee_id': 'ACOND1', 'mobile': '9988770011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_cond'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_cond (admin_cond@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_cond@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_cond (ID: 835ee89d-9cd4-4ef8-8073-a7bad8910de3), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_cond@ex.com', 'employee_id': 'UCOND1', 'mobile': '8877660022', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_cond'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_cond (user_cond@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_cond@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_cond (ID: 0f3e525b-932d-4289-9a57-9b755b059fdd), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_cond
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_cond (ID: 835ee89d-9cd4-4ef8-8073-a7bad8910de3) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-val-form', 'status': 'published', 'title': 'Public Val Form', 'versions': [{'sections': [{'id': '44444444-4444-4444-4444-444444444444', 'questions': [{'field_type': 'input', 'id': '55555555-5555-5555-5555-555555555555', 'is_required': True, 'label': 'Req'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 3f3fb2e7-82c2-4839-8f14-a5b24909856f created successfully by user admin_cond (ID: 835ee89d-9cd4-4ef8-8073-a7bad8910de3)
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 44444444-4444-4444-4444-444444444444, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 55555555-5555-5555-5555-555555555555, label=Req
#x1B[33mWARNING #x1B[0m app:validation.py:186 55555555-5555-5555-5555-555555555555: Required field missing
#x1B[33mWARNING #x1B[0m app:misc.py:68 Public validation failed: [{'id': '55555555-5555-5555-5555-555555555555', 'error': 'Required field missing'}]
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_cond@ex.com', 'employee_id': 'ACOND1', 'mobile': '9988770011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_cond'}
INFO:app:#x1F512 Password set for user: admin_cond
INFO:app:✅ User registered successfully: admin_cond (admin_cond@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_cond@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_cond@ex.com
INFO:app:Login successful for employee user admin_cond@ex.com
INFO:app:Issued JWT for user admin_cond (ID: 835ee89d-9cd4-4ef8-8073-a7bad8910de3), roles: ['admin']
INFO:app:Returning JSON response for user admin_cond
INFO:app:Received registration data: {'email': 'user_cond@ex.com', 'employee_id': 'UCOND1', 'mobile': '8877660022', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_cond'}
INFO:app:#x1F512 Password set for user: user_cond
INFO:app:✅ User registered successfully: user_cond (user_cond@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_cond@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_cond@ex.com
INFO:app:Login successful for employee user user_cond@ex.com
INFO:app:Issued JWT for user user_cond (ID: 0f3e525b-932d-4289-9a57-9b755b059fdd), roles: ['user']
INFO:app:Returning JSON response for user user_cond
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_cond (ID: 835ee89d-9cd4-4ef8-8073-a7bad8910de3) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-val-form', 'status': 'published', 'title': 'Public Val Form', 'versions': [{'sections': [{'id': '44444444-4444-4444-4444-444444444444', 'questions': [{'field_type': 'input', 'id': '55555555-5555-5555-5555-555555555555', 'is_required': True, 'label': 'Req'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 3f3fb2e7-82c2-4839-8f14-a5b24909856f created successfully by user admin_cond (ID: 835ee89d-9cd4-4ef8-8073-a7bad8910de3)
INFO:app:Processing section: 44444444-4444-4444-4444-444444444444, repeatable=False
DEBUG:app:Checking question 55555555-5555-5555-5555-555555555555, label=Req
WARNING:app:55555555-5555-5555-5555-555555555555: Required field missing
WARNING:app:Public validation failed: [{'id': '55555555-5555-5555-5555-555555555555', 'error': 'Required field missing'}]

</system-err></testcase><testcase classname="tests.test_custom_scripts" name="test_custom_script_success" time="0.500"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_script
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_script (admin_script@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_script
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc) is attempting to create a form with data: {'slug': 'script-form', 'title': 'Script Form', 'ui': 'flex', 'versions': [{'sections': [{'questions': [{'custom_script': "result = input['a'] + input['b']", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Calc'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form cf962ac2-db75-4847-a8fe-cbfe8a7b2839 created successfully by user admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc)
#x1B[32mINFO    #x1B[0m app:api.py:25 User admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:115 User admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc) is calling Custom API
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
INFO:app:#x1F512 Password set for user: admin_script
INFO:app:✅ User registered successfully: admin_script (admin_script@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_script@example.com
INFO:app:Login successful for employee user admin_script@example.com
INFO:app:Issued JWT for user admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc), roles: ['admin']
INFO:app:Returning JSON response for user admin_script
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc) is attempting to create a form with data: {'slug': 'script-form', 'title': 'Script Form', 'ui': 'flex', 'versions': [{'sections': [{'questions': [{'custom_script': "result = input['a'] + input['b']", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Calc'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form cf962ac2-db75-4847-a8fe-cbfe8a7b2839 created successfully by user admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc)
INFO:app:User admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc) is attempting to retrieve UHID
INFO:app:User admin_script (ID: 5d577453-c79f-404d-91ad-f5e84c1210cc) is calling Custom API

</system-err></testcase><testcase classname="tests.test_custom_scripts" name="test_custom_script_security" time="0.504"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_script
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_script (admin_script@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_script
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6) is attempting to create a form with data: {'slug': 'sec-form', 'title': 'Security Form', 'versions': [{'sections': [{'questions': [{'custom_script': "import os; result = os.listdir('.')", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Hack'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 2599bdb4-4891-413c-b960-f75a02eb7568 created successfully by user admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6)
#x1B[32mINFO    #x1B[0m app:api.py:25 User admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:115 User admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6) is calling Custom API
#x1B[31m#x1B[1mERROR   #x1B[0m app:api.py:143 Error executing custom script for user admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6): Script execution failed: __import__ not found
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
INFO:app:#x1F512 Password set for user: admin_script
INFO:app:✅ User registered successfully: admin_script (admin_script@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_script@example.com
INFO:app:Login successful for employee user admin_script@example.com
INFO:app:Issued JWT for user admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6), roles: ['admin']
INFO:app:Returning JSON response for user admin_script
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6) is attempting to create a form with data: {'slug': 'sec-form', 'title': 'Security Form', 'versions': [{'sections': [{'questions': [{'custom_script': "import os; result = os.listdir('.')", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Hack'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form 2599bdb4-4891-413c-b960-f75a02eb7568 created successfully by user admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6)
INFO:app:User admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6) is attempting to retrieve UHID
INFO:app:User admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6) is calling Custom API
ERROR:app:Error executing custom script for user admin_script (ID: 6b3b5b3b-44a3-446a-91f9-e881e7de58e6): Script execution failed: __import__ not found

</system-err></testcase><testcase classname="tests.test_custom_scripts" name="test_custom_script_math_module" time="0.500"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_script
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_script (admin_script@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_script
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d) is attempting to create a form with data: {'slug': 'math-form', 'title': 'Math Form', 'versions': [{'sections': [{'questions': [{'custom_script': "result = math.sqrt(input['val'])", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Math'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form b93c14c9-1349-4e13-86dc-c2069288e500 created successfully by user admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d)
#x1B[32mINFO    #x1B[0m app:api.py:25 User admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:115 User admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d) is calling Custom API
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
INFO:app:#x1F512 Password set for user: admin_script
INFO:app:✅ User registered successfully: admin_script (admin_script@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_script@example.com
INFO:app:Login successful for employee user admin_script@example.com
INFO:app:Issued JWT for user admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d), roles: ['admin']
INFO:app:Returning JSON response for user admin_script
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d) is attempting to create a form with data: {'slug': 'math-form', 'title': 'Math Form', 'versions': [{'sections': [{'questions': [{'custom_script': "result = math.sqrt(input['val'])", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Math'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form b93c14c9-1349-4e13-86dc-c2069288e500 created successfully by user admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d)
INFO:app:User admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d) is attempting to retrieve UHID
INFO:app:User admin_script (ID: 7ebb5845-34bc-41f2-a50a-c10b51acda8d) is calling Custom API

</system-err></testcase><testcase classname="tests.test_custom_scripts" name="test_custom_script_implicit_return" time="0.501"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_script
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_script (admin_script@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_script
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd) is attempting to create a form with data: {'slug': 'implicit-form', 'title': 'Implicit Form', 'versions': [{'sections': [{'questions': [{'custom_script': 'x = 5; y = 10; z = x * y', 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Implicit'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 14e0889f-81e5-47f6-99e0-a2ce69154d85 created successfully by user admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd)
#x1B[32mINFO    #x1B[0m app:api.py:25 User admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:115 User admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd) is calling Custom API
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
INFO:app:#x1F512 Password set for user: admin_script
INFO:app:✅ User registered successfully: admin_script (admin_script@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_script@example.com
INFO:app:Login successful for employee user admin_script@example.com
INFO:app:Issued JWT for user admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd), roles: ['admin']
INFO:app:Returning JSON response for user admin_script
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd) is attempting to create a form with data: {'slug': 'implicit-form', 'title': 'Implicit Form', 'versions': [{'sections': [{'questions': [{'custom_script': 'x = 5; y = 10; z = x * y', 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Implicit'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form 14e0889f-81e5-47f6-99e0-a2ce69154d85 created successfully by user admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd)
INFO:app:User admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd) is attempting to retrieve UHID
INFO:app:User admin_script (ID: 86e4b166-89f6-4f3c-90e8-40c70c5d96cd) is calling Custom API

</system-err></testcase><testcase classname="tests.test_dashboard" name="test_dashboard_lifecycle" time="1.581"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_dash@example.com', 'employee_id': 'ADM_DASH', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_dash'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_dash
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_dash (admin_dash@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_dash@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_dash@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_dash@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_dash (ID: aafd18fa-bbcb-4bfb-a641-6ad907ffffc6), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_dash
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'deo@example.com', 'employee_id': 'DEO001', 'mobile': '0987654321', 'roles': ['deo'], 'user_type': 'employee', 'username': 'deo_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: deo_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: deo_user (deo@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'deo@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: deo@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user deo@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user deo_user (ID: b728069f-f14e-4103-acc0-3dc02f94c319), roles: ['deo']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user deo_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'other@example.com', 'employee_id': 'OTH001', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'other_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: other_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: other_user (other@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'other@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: other@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user other@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user other_user (ID: 3f9ae699-9925-4d1e-be2a-8e69d59f8cd1), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user other_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_dash@example.com', 'employee_id': 'ADM_DASH', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_dash'}
INFO:app:#x1F512 Password set for user: admin_dash
INFO:app:✅ User registered successfully: admin_dash (admin_dash@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_dash@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: admin_dash@example.com
INFO:app:Login successful for employee user admin_dash@example.com
INFO:app:Issued JWT for user admin_dash (ID: aafd18fa-bbcb-4bfb-a641-6ad907ffffc6), roles: ['admin']
INFO:app:Returning JSON response for user admin_dash
INFO:app:Received registration data: {'email': 'deo@example.com', 'employee_id': 'DEO001', 'mobile': '0987654321', 'roles': ['deo'], 'user_type': 'employee', 'username': 'deo_user'}
INFO:app:#x1F512 Password set for user: deo_user
INFO:app:✅ User registered successfully: deo_user (deo@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'deo@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: deo@example.com
INFO:app:Login successful for employee user deo@example.com
INFO:app:Issued JWT for user deo_user (ID: b728069f-f14e-4103-acc0-3dc02f94c319), roles: ['deo']
INFO:app:Returning JSON response for user deo_user
INFO:app:Received registration data: {'email': 'other@example.com', 'employee_id': 'OTH001', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'other_user'}
INFO:app:#x1F512 Password set for user: other_user
INFO:app:✅ User registered successfully: other_user (other@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'other@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: other@example.com
INFO:app:Login successful for employee user other@example.com
INFO:app:Issued JWT for user other_user (ID: 3f9ae699-9925-4d1e-be2a-8e69d59f8cd1), roles: ['user']
INFO:app:Returning JSON response for user other_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_data_integrity" name="test_hidden_field_stripping" time="0.527"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'integrity_admin_000c9c@test.com', 'employee_id': 'EMP_3eec51', 'mobile': '7728153856', 'roles': ['admin'], 'user_type': 'employee', 'username': 'integrity_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: integrity_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: integrity_admin (integrity_admin_000c9c@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'integrity_admin_000c9c@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: integrity_admin_000c9c@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user integrity_admin_000c9c@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user integrity_admin (ID: 40347a54-efb5-446c-b6f7-29722d1595e0), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user integrity_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User integrity_admin (ID: 40347a54-efb5-446c-b6f7-29722d1595e0) is attempting to create a form with data: {'is_public': True, 'slug': 'integrity-form-7882c1', 'status': 'published', 'title': 'Integrity Form', 'versions': [{'sections': [{'id': '3ff26320-6238-4907-ac37-c81a81a2c8ac', 'questions': [{'field_type': 'radio', 'id': 'fb8c74e1-8612-4d2a-8bb4-7559518ab0b4', 'is_required': True, 'label': 'Do you agree?', 'options': [{'option_label': 'Yes', 'option_value': 'Yes'}, {'option_label': 'No', 'option_value': 'No'}]}, {'field_type': 'input', 'id': 'c4ec2f75-c4ab-4942-9285-dc634042cb3d', 'is_required': False, 'label': 'Reason', 'visibility_condition': "v_fb8c74e1_8612_4d2a_8bb4_7559518ab0b4 == 'Yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form b4512378-025f-46aa-b5e9-648678d0d965 created successfully by user integrity_admin (ID: 40347a54-efb5-446c-b6f7-29722d1595e0)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: b4512378-025f-46aa-b5e9-648678d0d965
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'3ff26320-6238-4907-ac37-c81a81a2c8ac': {'c4ec2f75-c4ab-4942-9285-dc634042cb3d': 'ShouldBeHidden', 'fb8c74e1-8612-4d2a-8bb4-7559518ab0b4': 'No'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 40347a54-efb5-446c-b6f7-29722d1595e0, Form title: Integrity Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 3ff26320-6238-4907-ac37-c81a81a2c8ac, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question fb8c74e1-8612-4d2a-8bb4-7559518ab0b4, label=Do you agree?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question c4ec2f75-c4ab-4942-9285-dc634042cb3d, label=Reason
#x1B[35mDEBUG   #x1B[0m app:validation.py:132 Visibility of c4ec2f75-c4ab-4942-9285-dc634042cb3d: False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=a1b4386b-78b8-44b0-984b-d83e84f4d318, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: b4512378-025f-46aa-b5e9-648678d0d965
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'3ff26320-6238-4907-ac37-c81a81a2c8ac': {'c4ec2f75-c4ab-4942-9285-dc634042cb3d': 'VisibleReason', 'fb8c74e1-8612-4d2a-8bb4-7559518ab0b4': 'Yes'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 40347a54-efb5-446c-b6f7-29722d1595e0, Form title: Integrity Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 3ff26320-6238-4907-ac37-c81a81a2c8ac, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question fb8c74e1-8612-4d2a-8bb4-7559518ab0b4, label=Do you agree?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question c4ec2f75-c4ab-4942-9285-dc634042cb3d, label=Reason
#x1B[35mDEBUG   #x1B[0m app:validation.py:132 Visibility of c4ec2f75-c4ab-4942-9285-dc634042cb3d: True
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=e4ac37f1-f144-4892-aee2-96087ab7a857, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'integrity_admin_000c9c@test.com', 'employee_id': 'EMP_3eec51', 'mobile': '7728153856', 'roles': ['admin'], 'user_type': 'employee', 'username': 'integrity_admin'}
INFO:app:#x1F512 Password set for user: integrity_admin
INFO:app:✅ User registered successfully: integrity_admin (integrity_admin_000c9c@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'integrity_admin_000c9c@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: integrity_admin_000c9c@test.com
INFO:app:Login successful for employee user integrity_admin_000c9c@test.com
INFO:app:Issued JWT for user integrity_admin (ID: 40347a54-efb5-446c-b6f7-29722d1595e0), roles: ['admin']
INFO:app:Returning JSON response for user integrity_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User integrity_admin (ID: 40347a54-efb5-446c-b6f7-29722d1595e0) is attempting to create a form with data: {'is_public': True, 'slug': 'integrity-form-7882c1', 'status': 'published', 'title': 'Integrity Form', 'versions': [{'sections': [{'id': '3ff26320-6238-4907-ac37-c81a81a2c8ac', 'questions': [{'field_type': 'radio', 'id': 'fb8c74e1-8612-4d2a-8bb4-7559518ab0b4', 'is_required': True, 'label': 'Do you agree?', 'options': [{'option_label': 'Yes', 'option_value': 'Yes'}, {'option_label': 'No', 'option_value': 'No'}]}, {'field_type': 'input', 'id': 'c4ec2f75-c4ab-4942-9285-dc634042cb3d', 'is_required': False, 'label': 'Reason', 'visibility_condition': "v_fb8c74e1_8612_4d2a_8bb4_7559518ab0b4 == 'Yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form b4512378-025f-46aa-b5e9-648678d0d965 created successfully by user integrity_admin (ID: 40347a54-efb5-446c-b6f7-29722d1595e0)
INFO:app:Received submission for form_id: b4512378-025f-46aa-b5e9-648678d0d965
INFO:app:Parsed JSON submission: {'3ff26320-6238-4907-ac37-c81a81a2c8ac': {'c4ec2f75-c4ab-4942-9285-dc634042cb3d': 'ShouldBeHidden', 'fb8c74e1-8612-4d2a-8bb4-7559518ab0b4': 'No'}}
INFO:app:Current user: 40347a54-efb5-446c-b6f7-29722d1595e0, Form title: Integrity Form
INFO:app:Processing section: 3ff26320-6238-4907-ac37-c81a81a2c8ac, repeatable=False
DEBUG:app:Checking question fb8c74e1-8612-4d2a-8bb4-7559518ab0b4, label=Do you agree?
DEBUG:app:Checking question c4ec2f75-c4ab-4942-9285-dc634042cb3d, label=Reason
DEBUG:app:Visibility of c4ec2f75-c4ab-4942-9285-dc634042cb3d: False
INFO:app:Submission saved: response_id=a1b4386b-78b8-44b0-984b-d83e84f4d318, is_draft=False
INFO:app:Received submission for form_id: b4512378-025f-46aa-b5e9-648678d0d965
INFO:app:Parsed JSON submission: {'3ff26320-6238-4907-ac37-c81a81a2c8ac': {'c4ec2f75-c4ab-4942-9285-dc634042cb3d': 'VisibleReason', 'fb8c74e1-8612-4d2a-8bb4-7559518ab0b4': 'Yes'}}
INFO:app:Current user: 40347a54-efb5-446c-b6f7-29722d1595e0, Form title: Integrity Form
INFO:app:Processing section: 3ff26320-6238-4907-ac37-c81a81a2c8ac, repeatable=False
DEBUG:app:Checking question fb8c74e1-8612-4d2a-8bb4-7559518ab0b4, label=Do you agree?
DEBUG:app:Checking question c4ec2f75-c4ab-4942-9285-dc634042cb3d, label=Reason
DEBUG:app:Visibility of c4ec2f75-c4ab-4942-9285-dc634042cb3d: True
INFO:app:Submission saved: response_id=e4ac37f1-f144-4892-aee2-96087ab7a857, is_draft=False

</system-err></testcase><testcase classname="tests.test_data_integrity" name="test_validation_blockcheck" time="0.507"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'integrity_admin_26647f@test.com', 'employee_id': 'EMP_493068', 'mobile': '7730030263', 'roles': ['admin'], 'user_type': 'employee', 'username': 'integrity_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: integrity_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: integrity_admin (integrity_admin_26647f@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'integrity_admin_26647f@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: integrity_admin_26647f@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user integrity_admin_26647f@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user integrity_admin (ID: ae6e1a1c-d32d-4d9e-aa0f-cc8060845c1b), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user integrity_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User integrity_admin (ID: ae6e1a1c-d32d-4d9e-aa0f-cc8060845c1b) is attempting to create a form with data: {'is_public': True, 'slug': 'val-form-073d57', 'status': 'published', 'title': 'Validation Form', 'versions': [{'sections': [{'id': '3e07c065-94dd-46fb-a49d-6a6ff31a936c', 'questions': [{'field_type': 'input', 'id': '6f838ffd-3d5a-46c4-be24-36cd5a68a634', 'is_required': True, 'label': 'Req'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form b31b9c27-5c7d-4ccb-834e-f20c528fbf66 created successfully by user integrity_admin (ID: ae6e1a1c-d32d-4d9e-aa0f-cc8060845c1b)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: b31b9c27-5c7d-4ccb-834e-f20c528fbf66
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'3e07c065-94dd-46fb-a49d-6a6ff31a936c': {'6f838ffd-3d5a-46c4-be24-36cd5a68a634': ''}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: ae6e1a1c-d32d-4d9e-aa0f-cc8060845c1b, Form title: Validation Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 3e07c065-94dd-46fb-a49d-6a6ff31a936c, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6f838ffd-3d5a-46c4-be24-36cd5a68a634, label=Req
#x1B[33mWARNING #x1B[0m app:validation.py:186 6f838ffd-3d5a-46c4-be24-36cd5a68a634: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': '6f838ffd-3d5a-46c4-be24-36cd5a68a634', 'error': 'Required field missing'}]
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'integrity_admin_26647f@test.com', 'employee_id': 'EMP_493068', 'mobile': '7730030263', 'roles': ['admin'], 'user_type': 'employee', 'username': 'integrity_admin'}
INFO:app:#x1F512 Password set for user: integrity_admin
INFO:app:✅ User registered successfully: integrity_admin (integrity_admin_26647f@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'integrity_admin_26647f@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: integrity_admin_26647f@test.com
INFO:app:Login successful for employee user integrity_admin_26647f@test.com
INFO:app:Issued JWT for user integrity_admin (ID: ae6e1a1c-d32d-4d9e-aa0f-cc8060845c1b), roles: ['admin']
INFO:app:Returning JSON response for user integrity_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User integrity_admin (ID: ae6e1a1c-d32d-4d9e-aa0f-cc8060845c1b) is attempting to create a form with data: {'is_public': True, 'slug': 'val-form-073d57', 'status': 'published', 'title': 'Validation Form', 'versions': [{'sections': [{'id': '3e07c065-94dd-46fb-a49d-6a6ff31a936c', 'questions': [{'field_type': 'input', 'id': '6f838ffd-3d5a-46c4-be24-36cd5a68a634', 'is_required': True, 'label': 'Req'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form b31b9c27-5c7d-4ccb-834e-f20c528fbf66 created successfully by user integrity_admin (ID: ae6e1a1c-d32d-4d9e-aa0f-cc8060845c1b)
INFO:app:Received submission for form_id: b31b9c27-5c7d-4ccb-834e-f20c528fbf66
INFO:app:Parsed JSON submission: {'3e07c065-94dd-46fb-a49d-6a6ff31a936c': {'6f838ffd-3d5a-46c4-be24-36cd5a68a634': ''}}
INFO:app:Current user: ae6e1a1c-d32d-4d9e-aa0f-cc8060845c1b, Form title: Validation Form
INFO:app:Processing section: 3e07c065-94dd-46fb-a49d-6a6ff31a936c, repeatable=False
DEBUG:app:Checking question 6f838ffd-3d5a-46c4-be24-36cd5a68a634, label=Req
WARNING:app:6f838ffd-3d5a-46c4-be24-36cd5a68a634: Required field missing
WARNING:app:Validation failed with errors: [{'id': '6f838ffd-3d5a-46c4-be24-36cd5a68a634', 'error': 'Required field missing'}]

</system-err></testcase><testcase classname="tests.test_email_notifications" name="test_email_notification_on_submit" time="0.500"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_8d7111@test.com', 'employee_id': 'EMP_2ad650', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_8d7111@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_8d7111@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_8d7111@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_8d7111@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 8c2c293b-dbe9-43bd-aa71-83f8a66219a5), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_user (ID: 8c2c293b-dbe9-43bd-aa71-83f8a66219a5) is attempting to create a form with data: {'notification_emails': ['admin@example.com', 'manager@example.com'], 'slug': 'email-form-b3a18d', 'status': 'published', 'title': 'Email Form', 'versions': [{'sections': [{'id': '7e182d44-eb05-46ba-9e56-d7caa7aef91e', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 44fb235a-d4ae-45f1-8e9d-3b4b10b92a97 created successfully by user admin_user (ID: 8c2c293b-dbe9-43bd-aa71-83f8a66219a5)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 44fb235a-d4ae-45f1-8e9d-3b4b10b92a97
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8c2c293b-dbe9-43bd-aa71-83f8a66219a5, Form title: Email Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 7e182d44-eb05-46ba-9e56-d7caa7aef91e, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=ac330877-5d1e-41f4-b5bc-7d5314b144d3, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_8d7111@test.com', 'employee_id': 'EMP_2ad650', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_8d7111@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_8d7111@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: admin_8d7111@test.com
INFO:app:Login successful for employee user admin_8d7111@test.com
INFO:app:Issued JWT for user admin_user (ID: 8c2c293b-dbe9-43bd-aa71-83f8a66219a5), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_user (ID: 8c2c293b-dbe9-43bd-aa71-83f8a66219a5) is attempting to create a form with data: {'notification_emails': ['admin@example.com', 'manager@example.com'], 'slug': 'email-form-b3a18d', 'status': 'published', 'title': 'Email Form', 'versions': [{'sections': [{'id': '7e182d44-eb05-46ba-9e56-d7caa7aef91e', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 44fb235a-d4ae-45f1-8e9d-3b4b10b92a97 created successfully by user admin_user (ID: 8c2c293b-dbe9-43bd-aa71-83f8a66219a5)
INFO:app:Received submission for form_id: 44fb235a-d4ae-45f1-8e9d-3b4b10b92a97
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 8c2c293b-dbe9-43bd-aa71-83f8a66219a5, Form title: Email Form
INFO:app:Processing section: 7e182d44-eb05-46ba-9e56-d7caa7aef91e, repeatable=False
INFO:app:Submission saved: response_id=ac330877-5d1e-41f4-b5bc-7d5314b144d3, is_draft=False

</system-err></testcase><testcase classname="tests.test_email_notifications" name="test_public_email_notification_on_submit" time="0.505"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_297130@test.com', 'employee_id': 'EMP_7d727f', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_297130@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_297130@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_297130@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_297130@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 2423b664-9e0e-483e-b043-e721e55379fc), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_user (ID: 2423b664-9e0e-483e-b043-e721e55379fc) is attempting to create a form with data: {'is_public': True, 'notification_emails': ['public@example.com'], 'slug': 'pub-email-c2806f', 'status': 'published', 'title': 'Public Email Form', 'versions': [{'sections': [{'id': 'b1bd0f61-aa01-4542-9e29-525e8cc0c4f3', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form ebf4d75c-bfc4-45be-b4c3-081b5d625b34 created successfully by user admin_user (ID: 2423b664-9e0e-483e-b043-e721e55379fc)
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: b1bd0f61-aa01-4542-9e29-525e8cc0c4f3, repeatable=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_297130@test.com', 'employee_id': 'EMP_7d727f', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_297130@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_297130@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: admin_297130@test.com
INFO:app:Login successful for employee user admin_297130@test.com
INFO:app:Issued JWT for user admin_user (ID: 2423b664-9e0e-483e-b043-e721e55379fc), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_user (ID: 2423b664-9e0e-483e-b043-e721e55379fc) is attempting to create a form with data: {'is_public': True, 'notification_emails': ['public@example.com'], 'slug': 'pub-email-c2806f', 'status': 'published', 'title': 'Public Email Form', 'versions': [{'sections': [{'id': 'b1bd0f61-aa01-4542-9e29-525e8cc0c4f3', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form ebf4d75c-bfc4-45be-b4c3-081b5d625b34 created successfully by user admin_user (ID: 2423b664-9e0e-483e-b043-e721e55379fc)
INFO:app:Processing section: b1bd0f61-aa01-4542-9e29-525e8cc0c4f3, repeatable=False

</system-err></testcase><testcase classname="tests.test_export" name="test_csv_export_flattening" time="0.501"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'export_admin_0683c9@test.com', 'employee_id': 'EMP_674c46', 'mobile': '7718084639', 'roles': ['admin'], 'user_type': 'employee', 'username': 'export_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: export_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: export_admin (export_admin_0683c9@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'export_admin_0683c9@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: export_admin_0683c9@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user export_admin_0683c9@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user export_admin (ID: 975baa0b-8578-41b8-949e-08c784f38f60), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user export_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User export_admin (ID: 975baa0b-8578-41b8-949e-08c784f38f60) is attempting to create a form with data: {'is_public': True, 'slug': 'export-form-388800', 'status': 'published', 'title': 'Export Form', 'versions': [{'sections': [{'id': '054a60a1-723a-4666-a308-a1edab741382', 'questions': [{'field_type': 'input', 'id': '33f72010-c4c3-45cc-8997-cbbb903776cc', 'is_required': True, 'label': 'Full Name'}, {'field_type': 'input', 'id': 'db53b776-2612-46f1-a9e9-4416abed1196', 'is_required': True, 'label': 'Age'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 034c93da-3c7a-4824-b53a-e97e67b0cfb3 created successfully by user export_admin (ID: 975baa0b-8578-41b8-949e-08c784f38f60)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 034c93da-3c7a-4824-b53a-e97e67b0cfb3
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'054a60a1-723a-4666-a308-a1edab741382': {'33f72010-c4c3-45cc-8997-cbbb903776cc': 'John Doe', 'db53b776-2612-46f1-a9e9-4416abed1196': '30'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 975baa0b-8578-41b8-949e-08c784f38f60, Form title: Export Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 054a60a1-723a-4666-a308-a1edab741382, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 33f72010-c4c3-45cc-8997-cbbb903776cc, label=Full Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question db53b776-2612-46f1-a9e9-4416abed1196, label=Age
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=8e4923d3-b934-4383-ae15-1831c6aad764, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'export_admin_0683c9@test.com', 'employee_id': 'EMP_674c46', 'mobile': '7718084639', 'roles': ['admin'], 'user_type': 'employee', 'username': 'export_admin'}
INFO:app:#x1F512 Password set for user: export_admin
INFO:app:✅ User registered successfully: export_admin (export_admin_0683c9@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'export_admin_0683c9@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: export_admin_0683c9@test.com
INFO:app:Login successful for employee user export_admin_0683c9@test.com
INFO:app:Issued JWT for user export_admin (ID: 975baa0b-8578-41b8-949e-08c784f38f60), roles: ['admin']
INFO:app:Returning JSON response for user export_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User export_admin (ID: 975baa0b-8578-41b8-949e-08c784f38f60) is attempting to create a form with data: {'is_public': True, 'slug': 'export-form-388800', 'status': 'published', 'title': 'Export Form', 'versions': [{'sections': [{'id': '054a60a1-723a-4666-a308-a1edab741382', 'questions': [{'field_type': 'input', 'id': '33f72010-c4c3-45cc-8997-cbbb903776cc', 'is_required': True, 'label': 'Full Name'}, {'field_type': 'input', 'id': 'db53b776-2612-46f1-a9e9-4416abed1196', 'is_required': True, 'label': 'Age'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form 034c93da-3c7a-4824-b53a-e97e67b0cfb3 created successfully by user export_admin (ID: 975baa0b-8578-41b8-949e-08c784f38f60)
INFO:app:Received submission for form_id: 034c93da-3c7a-4824-b53a-e97e67b0cfb3
INFO:app:Parsed JSON submission: {'054a60a1-723a-4666-a308-a1edab741382': {'33f72010-c4c3-45cc-8997-cbbb903776cc': 'John Doe', 'db53b776-2612-46f1-a9e9-4416abed1196': '30'}}
INFO:app:Current user: 975baa0b-8578-41b8-949e-08c784f38f60, Form title: Export Form
INFO:app:Processing section: 054a60a1-723a-4666-a308-a1edab741382, repeatable=False
DEBUG:app:Checking question 33f72010-c4c3-45cc-8997-cbbb903776cc, label=Full Name
DEBUG:app:Checking question db53b776-2612-46f1-a9e9-4416abed1196, label=Age
INFO:app:Submission saved: response_id=8e4923d3-b934-4383-ae15-1831c6aad764, is_draft=False

</system-err></testcase><testcase classname="tests.test_export" name="test_csv_export_repeatable" time="0.510"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'export_admin_4bc2bc@test.com', 'employee_id': 'EMP_051d6c', 'mobile': '7760296417', 'roles': ['admin'], 'user_type': 'employee', 'username': 'export_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: export_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: export_admin (export_admin_4bc2bc@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'export_admin_4bc2bc@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: export_admin_4bc2bc@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user export_admin_4bc2bc@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user export_admin (ID: b08febb4-a29c-4191-9eda-d54bdc9eff8a), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user export_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User export_admin (ID: b08febb4-a29c-4191-9eda-d54bdc9eff8a) is attempting to create a form with data: {'is_public': True, 'slug': 'export-rep-5dd0d3', 'status': 'published', 'title': 'Export Repeatable', 'versions': [{'sections': [{'id': '86bdbbf0-4a67-4ea4-925c-76f367151446', 'is_repeatable_section': True, 'questions': [{'field_type': 'input', 'id': '2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80', 'is_required': True, 'label': 'Name'}], 'title': 'Family'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 19c311a1-d249-41f1-a92c-06c16a790604 created successfully by user export_admin (ID: b08febb4-a29c-4191-9eda-d54bdc9eff8a)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 19c311a1-d249-41f1-a92c-06c16a790604
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'86bdbbf0-4a67-4ea4-925c-76f367151446': [{'2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80': 'Alice'}, {'2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80': 'Bob'}]}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: b08febb4-a29c-4191-9eda-d54bdc9eff8a, Form title: Export Repeatable
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 86bdbbf0-4a67-4ea4-925c-76f367151446, repeatable=True
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80, label=Name
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=7d27a02b-27f6-4281-8e57-2d3edfc0d37a, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'export_admin_4bc2bc@test.com', 'employee_id': 'EMP_051d6c', 'mobile': '7760296417', 'roles': ['admin'], 'user_type': 'employee', 'username': 'export_admin'}
INFO:app:#x1F512 Password set for user: export_admin
INFO:app:✅ User registered successfully: export_admin (export_admin_4bc2bc@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'export_admin_4bc2bc@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: export_admin_4bc2bc@test.com
INFO:app:Login successful for employee user export_admin_4bc2bc@test.com
INFO:app:Issued JWT for user export_admin (ID: b08febb4-a29c-4191-9eda-d54bdc9eff8a), roles: ['admin']
INFO:app:Returning JSON response for user export_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User export_admin (ID: b08febb4-a29c-4191-9eda-d54bdc9eff8a) is attempting to create a form with data: {'is_public': True, 'slug': 'export-rep-5dd0d3', 'status': 'published', 'title': 'Export Repeatable', 'versions': [{'sections': [{'id': '86bdbbf0-4a67-4ea4-925c-76f367151446', 'is_repeatable_section': True, 'questions': [{'field_type': 'input', 'id': '2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80', 'is_required': True, 'label': 'Name'}], 'title': 'Family'}], 'version': '1.0'}]}
INFO:app:Form 19c311a1-d249-41f1-a92c-06c16a790604 created successfully by user export_admin (ID: b08febb4-a29c-4191-9eda-d54bdc9eff8a)
INFO:app:Received submission for form_id: 19c311a1-d249-41f1-a92c-06c16a790604
INFO:app:Parsed JSON submission: {'86bdbbf0-4a67-4ea4-925c-76f367151446': [{'2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80': 'Alice'}, {'2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80': 'Bob'}]}
INFO:app:Current user: b08febb4-a29c-4191-9eda-d54bdc9eff8a, Form title: Export Repeatable
INFO:app:Processing section: 86bdbbf0-4a67-4ea4-925c-76f367151446, repeatable=True
DEBUG:app:Checking question 2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80, label=Name
DEBUG:app:Checking question 2837a3f9-b4e3-4d9b-8b24-a3ae9f72fb80, label=Name
INFO:app:Submission saved: response_id=7d27a02b-27f6-4281-8e57-2d3edfc0d37a, is_draft=False

</system-err></testcase><testcase classname="tests.test_form" name="test_create_form_success" time="0.502"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: dee375f5-84f1-4f92-b31d-62eedf0ba590), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: dee375f5-84f1-4f92-b31d-62eedf0ba590) is attempting to create a form with data: {'is_public': True, 'slug': 'new-form', 'title': 'New Form', 'versions': [{'sections': [{'id': '77777777-7777-7777-7777-777777777777', 'questions': [{'field_type': 'input', 'id': '88888888-8888-8888-8888-888888888888', 'label': 'Question 1'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form c2bd2132-05ce-492d-92d4-4a72137aab52 created successfully by user form_creator (ID: dee375f5-84f1-4f92-b31d-62eedf0ba590)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: dee375f5-84f1-4f92-b31d-62eedf0ba590), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: dee375f5-84f1-4f92-b31d-62eedf0ba590) is attempting to create a form with data: {'is_public': True, 'slug': 'new-form', 'title': 'New Form', 'versions': [{'sections': [{'id': '77777777-7777-7777-7777-777777777777', 'questions': [{'field_type': 'input', 'id': '88888888-8888-8888-8888-888888888888', 'label': 'Question 1'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form c2bd2132-05ce-492d-92d4-4a72137aab52 created successfully by user form_creator (ID: dee375f5-84f1-4f92-b31d-62eedf0ba590)

</system-err></testcase><testcase classname="tests.test_form" name="test_list_forms" time="0.504"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361) is attempting to create a form with data: {'slug': 'f1', 'title': 'F1'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form cc7f4548-71bb-4087-8685-f5a361d46a39 created successfully by user form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361) is attempting to create a form with data: {'slug': 'f2', 'title': 'F2'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 91806836-53df-44c4-bc75-d3577b663d46 created successfully by user form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361) is attempting to create a form with data: {'slug': 'f1', 'title': 'F1'}
INFO:app:Form cc7f4548-71bb-4087-8685-f5a361d46a39 created successfully by user form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361) is attempting to create a form with data: {'slug': 'f2', 'title': 'F2'}
INFO:app:Form 91806836-53df-44c4-bc75-d3577b663d46 created successfully by user form_creator (ID: 9e63c6d5-a2fb-4c70-a60e-78b2e0fb0361)

</system-err></testcase><testcase classname="tests.test_form" name="test_get_form_details" time="0.521"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: 034c49e1-49e9-4288-abe5-1be443e51564), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: 034c49e1-49e9-4288-abe5-1be443e51564) is attempting to create a form with data: {'slug': 'details-form', 'title': 'Details Form'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 885a012a-f727-4834-992c-44d6bafd7ca5 created successfully by user form_creator (ID: 034c49e1-49e9-4288-abe5-1be443e51564)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: 034c49e1-49e9-4288-abe5-1be443e51564), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: 034c49e1-49e9-4288-abe5-1be443e51564) is attempting to create a form with data: {'slug': 'details-form', 'title': 'Details Form'}
INFO:app:Form 885a012a-f727-4834-992c-44d6bafd7ca5 created successfully by user form_creator (ID: 034c49e1-49e9-4288-abe5-1be443e51564)

</system-err></testcase><testcase classname="tests.test_form" name="test_update_form" time="0.546"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: 702dd22f-7094-46a0-8620-8a537c495e57), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: 702dd22f-7094-46a0-8620-8a537c495e57) is attempting to create a form with data: {'slug': 'old-slug', 'title': 'Old Title'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form b41efca9-6fee-46bd-9b50-a216d72cb617 created successfully by user form_creator (ID: 702dd22f-7094-46a0-8620-8a537c495e57)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: 702dd22f-7094-46a0-8620-8a537c495e57), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: 702dd22f-7094-46a0-8620-8a537c495e57) is attempting to create a form with data: {'slug': 'old-slug', 'title': 'Old Title'}
INFO:app:Form b41efca9-6fee-46bd-9b50-a216d72cb617 created successfully by user form_creator (ID: 702dd22f-7094-46a0-8620-8a537c495e57)

</system-err></testcase><testcase classname="tests.test_form" name="test_delete_form_admin" time="0.999"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: da901163-ba7a-4660-b75b-d32abbcbe1f3), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_form@example.com', 'employee_id': 'ADM002', 'mobile': '4433221100', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user_form'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user_form
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user_form (admin_form@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_form@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_form@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_form@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user_form (ID: d8490d01-6cfc-46cc-9a6a-56638a05dd4f), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user_form
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: da901163-ba7a-4660-b75b-d32abbcbe1f3) is attempting to create a form with data: {'slug': 'delete-me', 'title': 'Delete Me'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 0bd41f5f-37d5-4d28-be32-90b73cd3b43f created successfully by user form_creator (ID: da901163-ba7a-4660-b75b-d32abbcbe1f3)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[33mWARNING #x1B[0m app:decorator.py:39 Access forbidden for user da901163-ba7a-4660-b75b-d32abbcbe1f3. Required: ('admin', 'superadmin'), Actual: ['creator']
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: da901163-ba7a-4660-b75b-d32abbcbe1f3), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
INFO:app:Received registration data: {'email': 'admin_form@example.com', 'employee_id': 'ADM002', 'mobile': '4433221100', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user_form'}
INFO:app:#x1F512 Password set for user: admin_user_form
INFO:app:✅ User registered successfully: admin_user_form (admin_form@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_form@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_form@example.com
INFO:app:Login successful for employee user admin_form@example.com
INFO:app:Issued JWT for user admin_user_form (ID: d8490d01-6cfc-46cc-9a6a-56638a05dd4f), roles: ['admin']
INFO:app:Returning JSON response for user admin_user_form
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: da901163-ba7a-4660-b75b-d32abbcbe1f3) is attempting to create a form with data: {'slug': 'delete-me', 'title': 'Delete Me'}
INFO:app:Form 0bd41f5f-37d5-4d28-be32-90b73cd3b43f created successfully by user form_creator (ID: da901163-ba7a-4660-b75b-d32abbcbe1f3)
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
WARNING:app:Access forbidden for user da901163-ba7a-4660-b75b-d32abbcbe1f3. Required: ('admin', 'superadmin'), Actual: ['creator']
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_form_versioning" name="test_form_versioning" time="0.509"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'v_admin@example.com', 'mobile': '5556667778', 'roles': ['admin'], 'user_type': 'employee', 'username': 'v_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: v_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: v_admin (v_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'v_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: v_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user v_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user v_admin (ID: 5bde6abb-9713-4448-9313-0a107222c37e), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user v_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User v_admin (ID: 5bde6abb-9713-4448-9313-0a107222c37e) is attempting to create a form with data: {'id': '6d8c68a1-c7eb-44d4-b7e9-de75262289fd', 'slug': 'v-test-684ef7', 'status': 'published', 'title': 'Version Form', 'versions': [{'sections': [{'id': '0debf1e8-fb91-489a-b292-1c5ee8240e9d', 'questions': [{'field_type': 'input', 'id': 'b268ead7-fac4-47c6-8e0e-f94a9f4d8e30', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 6d8c68a1-c7eb-44d4-b7e9-de75262289fd created successfully by user v_admin (ID: 5bde6abb-9713-4448-9313-0a107222c37e)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 6d8c68a1-c7eb-44d4-b7e9-de75262289fd
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'0debf1e8-fb91-489a-b292-1c5ee8240e9d': {'b268ead7-fac4-47c6-8e0e-f94a9f4d8e30': 'val'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 5bde6abb-9713-4448-9313-0a107222c37e, Form title: Version Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 0debf1e8-fb91-489a-b292-1c5ee8240e9d, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question b268ead7-fac4-47c6-8e0e-f94a9f4d8e30, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=d851ed40-7fe5-4844-ac55-9c0c50057efe, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'v_admin@example.com', 'mobile': '5556667778', 'roles': ['admin'], 'user_type': 'employee', 'username': 'v_admin'}
INFO:app:#x1F512 Password set for user: v_admin
INFO:app:✅ User registered successfully: v_admin (v_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'v_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: v_admin@example.com
INFO:app:Login successful for employee user v_admin@example.com
INFO:app:Issued JWT for user v_admin (ID: 5bde6abb-9713-4448-9313-0a107222c37e), roles: ['admin']
INFO:app:Returning JSON response for user v_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User v_admin (ID: 5bde6abb-9713-4448-9313-0a107222c37e) is attempting to create a form with data: {'id': '6d8c68a1-c7eb-44d4-b7e9-de75262289fd', 'slug': 'v-test-684ef7', 'status': 'published', 'title': 'Version Form', 'versions': [{'sections': [{'id': '0debf1e8-fb91-489a-b292-1c5ee8240e9d', 'questions': [{'field_type': 'input', 'id': 'b268ead7-fac4-47c6-8e0e-f94a9f4d8e30', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 6d8c68a1-c7eb-44d4-b7e9-de75262289fd created successfully by user v_admin (ID: 5bde6abb-9713-4448-9313-0a107222c37e)
INFO:app:Received submission for form_id: 6d8c68a1-c7eb-44d4-b7e9-de75262289fd
INFO:app:Parsed JSON submission: {'0debf1e8-fb91-489a-b292-1c5ee8240e9d': {'b268ead7-fac4-47c6-8e0e-f94a9f4d8e30': 'val'}}
INFO:app:Current user: 5bde6abb-9713-4448-9313-0a107222c37e, Form title: Version Form
INFO:app:Processing section: 0debf1e8-fb91-489a-b292-1c5ee8240e9d, repeatable=False
DEBUG:app:Checking question b268ead7-fac4-47c6-8e0e-f94a9f4d8e30, label=Q1
INFO:app:Submission saved: response_id=d851ed40-7fe5-4844-ac55-9c0c50057efe, is_draft=False

</system-err></testcase><testcase classname="tests.test_integration_flow" name="test_full_response_lifecycle_flow" time="0.533"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_39c887@test.com', 'employee_id': 'EMP_5038bd', 'mobile': '1767968572', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_39c887@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_39c887@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_39c887@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_39c887@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 1229415a-9ae0-499c-b2ec-365a9893d159), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_user (ID: 1229415a-9ae0-499c-b2ec-365a9893d159) is attempting to create a form with data: {'slug': 'slug-9d314e', 'status': 'published', 'title': 'Lifecycle Form', 'versions': [{'sections': [{'id': '88908d76-6019-4aa8-93d0-3f41aa2860ae', 'questions': [], 'title': 'S1'}], 'version': '2.1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 80f116c4-4dcc-4897-88ba-0ddc357ca7c9 created successfully by user admin_user (ID: 1229415a-9ae0-499c-b2ec-365a9893d159)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 80f116c4-4dcc-4897-88ba-0ddc357ca7c9
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 1229415a-9ae0-499c-b2ec-365a9893d159, Form title: Lifecycle Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 88908d76-6019-4aa8-93d0-3f41aa2860ae, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=351b8c62-776d-485c-8b35-68fdc4972a1e, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_39c887@test.com', 'employee_id': 'EMP_5038bd', 'mobile': '1767968572', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_39c887@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_39c887@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: admin_39c887@test.com
INFO:app:Login successful for employee user admin_39c887@test.com
INFO:app:Issued JWT for user admin_user (ID: 1229415a-9ae0-499c-b2ec-365a9893d159), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_user (ID: 1229415a-9ae0-499c-b2ec-365a9893d159) is attempting to create a form with data: {'slug': 'slug-9d314e', 'status': 'published', 'title': 'Lifecycle Form', 'versions': [{'sections': [{'id': '88908d76-6019-4aa8-93d0-3f41aa2860ae', 'questions': [], 'title': 'S1'}], 'version': '2.1.0'}]}
INFO:app:Form 80f116c4-4dcc-4897-88ba-0ddc357ca7c9 created successfully by user admin_user (ID: 1229415a-9ae0-499c-b2ec-365a9893d159)
INFO:app:Received submission for form_id: 80f116c4-4dcc-4897-88ba-0ddc357ca7c9
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 1229415a-9ae0-499c-b2ec-365a9893d159, Form title: Lifecycle Form
INFO:app:Processing section: 88908d76-6019-4aa8-93d0-3f41aa2860ae, repeatable=False
INFO:app:Submission saved: response_id=351b8c62-776d-485c-8b35-68fdc4972a1e, is_draft=False

</system-err></testcase><testcase classname="tests.test_integration_flow" name="test_account_lockout_integration" time="1.171"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'lockout_22e341@test.com', 'employee_id': 'EMP_344e2c', 'mobile': '1767968573', 'roles': ['user'], 'user_type': 'employee', 'username': 'lockout_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: lockout_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: lockout_user (lockout_22e341@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_22e341@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_22e341@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_22e341@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_22e341@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_22e341@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_22e341@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_22e341@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_22e341@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_22e341@test.com
#x1B[33mWARNING #x1B[0m auth:User.py:97 User 7466eafb-7277-437e-87d5-dfae89ea9fe1 locked until 2026-01-10 14:22:54.329519+00:00
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_22e341@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'CorrectPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_22e341@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:92 Login failed: User lockout_22e341@test.com is locked until 2026-01-10 14:22:54.329000
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'lockout_22e341@test.com', 'employee_id': 'EMP_344e2c', 'mobile': '1767968573', 'roles': ['user'], 'user_type': 'employee', 'username': 'lockout_user'}
INFO:app:#x1F512 Password set for user: lockout_user
INFO:app:✅ User registered successfully: lockout_user (lockout_22e341@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_22e341@test.com
WARNING:app:Login failed: Incorrect password for user lockout_22e341@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_22e341@test.com
WARNING:app:Login failed: Incorrect password for user lockout_22e341@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_22e341@test.com
WARNING:app:Login failed: Incorrect password for user lockout_22e341@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_22e341@test.com
WARNING:app:Login failed: Incorrect password for user lockout_22e341@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_22e341@test.com
WARNING:auth:User 7466eafb-7277-437e-87d5-dfae89ea9fe1 locked until 2026-01-10 14:22:54.329519+00:00
WARNING:app:Login failed: Incorrect password for user lockout_22e341@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_22e341@test.com', 'password': 'CorrectPassword'}
INFO:app:Employee login attempt with identifier: lockout_22e341@test.com
WARNING:app:Login failed: User lockout_22e341@test.com is locked until 2026-01-10 14:22:54.329000

</system-err></testcase><testcase classname="tests.test_integration_flow" name="test_password_expiration_integration" time="0.496"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'expire_7bfcb3@test.com', 'employee_id': 'EMP_a7c4cb', 'mobile': '1767968574', 'roles': ['user'], 'user_type': 'employee', 'username': 'expire_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: expire_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: expire_user (expire_7bfcb3@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'expire_7bfcb3@test.com', 'password': 'SecurePassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: expire_7bfcb3@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:101 Login failed: Password expired for user expire_7bfcb3@test.com
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'expire_7bfcb3@test.com', 'employee_id': 'EMP_a7c4cb', 'mobile': '1767968574', 'roles': ['user'], 'user_type': 'employee', 'username': 'expire_user'}
INFO:app:#x1F512 Password set for user: expire_user
INFO:app:✅ User registered successfully: expire_user (expire_7bfcb3@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'expire_7bfcb3@test.com', 'password': 'SecurePassword'}
INFO:app:Employee login attempt with identifier: expire_7bfcb3@test.com
WARNING:app:Login failed: Password expired for user expire_7bfcb3@test.com

</system-err></testcase><testcase classname="tests.test_misc" name="test_get_form_analytics" time="1.045"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: fe42b05a-4eb7-4300-9859-75ed47df01b7), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: f56b1122-8269-4b99-bb48-b19416b39347), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: fe42b05a-4eb7-4300-9859-75ed47df01b7) is attempting to create a form with data: {'is_public': True, 'slug': 'ana-form', 'status': 'published', 'title': 'Analytic Form', 'versions': [{'sections': [{'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 76200bb2-4d67-4d8b-8c7e-10ff0281d9ec created successfully by user admin_misc (ID: fe42b05a-4eb7-4300-9859-75ed47df01b7)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 76200bb2-4d67-4d8b-8c7e-10ff0281d9ec
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa': {}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: f56b1122-8269-4b99-bb48-b19416b39347, Form title: Analytic Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=932d5b05-bb4c-4336-a515-c094a29ae45c, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: fe42b05a-4eb7-4300-9859-75ed47df01b7), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: f56b1122-8269-4b99-bb48-b19416b39347), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: fe42b05a-4eb7-4300-9859-75ed47df01b7) is attempting to create a form with data: {'is_public': True, 'slug': 'ana-form', 'status': 'published', 'title': 'Analytic Form', 'versions': [{'sections': [{'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 76200bb2-4d67-4d8b-8c7e-10ff0281d9ec created successfully by user admin_misc (ID: fe42b05a-4eb7-4300-9859-75ed47df01b7)
INFO:app:Received submission for form_id: 76200bb2-4d67-4d8b-8c7e-10ff0281d9ec
INFO:app:Parsed JSON submission: {'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa': {}}
INFO:app:Current user: f56b1122-8269-4b99-bb48-b19416b39347, Form title: Analytic Form
INFO:app:Processing section: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, repeatable=False
INFO:app:Submission saved: response_id=932d5b05-bb4c-4336-a515-c094a29ae45c, is_draft=False

</system-err></testcase><testcase classname="tests.test_misc" name="test_public_submit_success" time="1.022"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 31b34f77-745a-4383-a2b4-b65386cb347e), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: ebac02fb-4dd0-4984-848b-d0ef61864ea1), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: 31b34f77-745a-4383-a2b4-b65386cb347e) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-form-misc', 'status': 'published', 'title': 'Public Form', 'versions': [{'sections': [{'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'questions': [{'field_type': 'input', 'id': 'dddddddd-dddd-dddd-dddd-dddddddddddd', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 24a668d4-6c67-432c-a2a6-51e927ddadcc created successfully by user admin_misc (ID: 31b34f77-745a-4383-a2b4-b65386cb347e)
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: cccccccc-cccc-cccc-cccc-cccccccccccc, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question dddddddd-dddd-dddd-dddd-dddddddddddd, label=Q1
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 31b34f77-745a-4383-a2b4-b65386cb347e), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: ebac02fb-4dd0-4984-848b-d0ef61864ea1), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: 31b34f77-745a-4383-a2b4-b65386cb347e) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-form-misc', 'status': 'published', 'title': 'Public Form', 'versions': [{'sections': [{'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'questions': [{'field_type': 'input', 'id': 'dddddddd-dddd-dddd-dddd-dddddddddddd', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 24a668d4-6c67-432c-a2a6-51e927ddadcc created successfully by user admin_misc (ID: 31b34f77-745a-4383-a2b4-b65386cb347e)
INFO:app:Processing section: cccccccc-cccc-cccc-cccc-cccccccccccc, repeatable=False
DEBUG:app:Checking question dddddddd-dddd-dddd-dddd-dddddddddddd, label=Q1

</system-err></testcase><testcase classname="tests.test_misc" name="test_public_submit_failure_non_public" time="0.997"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 008e6216-83d9-4223-b797-35f24a46438b), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: 88309982-175a-4f90-8277-e4f60aa9eadf), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: 008e6216-83d9-4223-b797-35f24a46438b) is attempting to create a form with data: {'is_public': False, 'slug': 'priv-form', 'status': 'published', 'title': 'Private Form'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 638f7f4c-8647-4ca7-95d7-0d6ffdd5ee3f created successfully by user admin_misc (ID: 008e6216-83d9-4223-b797-35f24a46438b)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 008e6216-83d9-4223-b797-35f24a46438b), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: 88309982-175a-4f90-8277-e4f60aa9eadf), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: 008e6216-83d9-4223-b797-35f24a46438b) is attempting to create a form with data: {'is_public': False, 'slug': 'priv-form', 'status': 'published', 'title': 'Private Form'}
INFO:app:Form 638f7f4c-8647-4ca7-95d7-0d6ffdd5ee3f created successfully by user admin_misc (ID: 008e6216-83d9-4223-b797-35f24a46438b)

</system-err></testcase><testcase classname="tests.test_misc" name="test_set_form_expiration" time="1.019"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 8262bce5-b335-407e-901f-9792e35df60f), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: 4f5a9b35-4c41-4330-9378-9b91846a5cdf), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: 8262bce5-b335-407e-901f-9792e35df60f) is attempting to create a form with data: {'is_public': True, 'slug': 'exp-form', 'title': 'Exp Form'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form f1600695-9592-4e0f-922b-e0f984f14972 created successfully by user admin_misc (ID: 8262bce5-b335-407e-901f-9792e35df60f)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 8262bce5-b335-407e-901f-9792e35df60f), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: 4f5a9b35-4c41-4330-9378-9b91846a5cdf), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: 8262bce5-b335-407e-901f-9792e35df60f) is attempting to create a form with data: {'is_public': True, 'slug': 'exp-form', 'title': 'Exp Form'}
INFO:app:Form f1600695-9592-4e0f-922b-e0f984f14972 created successfully by user admin_misc (ID: 8262bce5-b335-407e-901f-9792e35df60f)
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_misc" name="test_list_expired_forms" time="1.030"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: a3f5c167-d67a-4ecc-99b2-ef85ae4f0ee0), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: 945af1a1-bcbf-414f-a4ce-df3eb2be3173), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: a3f5c167-d67a-4ecc-99b2-ef85ae4f0ee0), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: 945af1a1-bcbf-414f-a4ce-df3eb2be3173), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_misc" name="test_export_responses" time="1.018"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 7f15b8fe-9ea0-4b36-a126-c4b9df033810), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: 3488b9b6-9f98-4cf9-b8aa-5e63bc970a57), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: 7f15b8fe-9ea0-4b36-a126-c4b9df033810) is attempting to create a form with data: {'is_public': True, 'slug': 'ex-form', 'status': 'published', 'title': 'Export Form', 'versions': [{'sections': [{'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form ac982813-a3ce-4414-9c1c-30bb0c5d590a created successfully by user admin_misc (ID: 7f15b8fe-9ea0-4b36-a126-c4b9df033810)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: ac982813-a3ce-4414-9c1c-30bb0c5d590a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 3488b9b6-9f98-4cf9-b8aa-5e63bc970a57, Form title: Export Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=e4685ccb-5413-42e1-8a72-73e0cb73506f, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 7f15b8fe-9ea0-4b36-a126-c4b9df033810), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: 3488b9b6-9f98-4cf9-b8aa-5e63bc970a57), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: 7f15b8fe-9ea0-4b36-a126-c4b9df033810) is attempting to create a form with data: {'is_public': True, 'slug': 'ex-form', 'status': 'published', 'title': 'Export Form', 'versions': [{'sections': [{'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form ac982813-a3ce-4414-9c1c-30bb0c5d590a created successfully by user admin_misc (ID: 7f15b8fe-9ea0-4b36-a126-c4b9df033810)
INFO:app:Received submission for form_id: ac982813-a3ce-4414-9c1c-30bb0c5d590a
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 3488b9b6-9f98-4cf9-b8aa-5e63bc970a57, Form title: Export Form
INFO:app:Processing section: bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, repeatable=False
INFO:app:Submission saved: response_id=e4685ccb-5413-42e1-8a72-73e0cb73506f, is_draft=False

</system-err></testcase><testcase classname="tests.test_multi_language" name="test_multi_language_form" time="0.518"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'lang_admin@example.com', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'lang_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: lang_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: lang_admin (lang_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lang_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lang_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user lang_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user lang_admin (ID: a38a73a0-5d17-44e4-8015-95dd8721ca72), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user lang_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User lang_admin (ID: a38a73a0-5d17-44e4-8015-95dd8721ca72) is attempting to create a form with data: {'slug': 'lang-test-e11758', 'title': 'Registration Form', 'versions': [{'sections': [{'id': 'ba12232e-96f4-42a2-8e29-ff3790d1e6e1', 'questions': [{'field_type': 'input', 'id': '8514bc30-60fd-4d5e-abde-bc0375682457', 'label': 'Name', 'options': [{'id': '035bde39-c990-4df1-adca-a1778afa0d64', 'option_label': 'Male', 'option_value': 'male'}]}], 'title': 'Personal Info'}], 'translations': {'hi': {'questions': {'8514bc30-60fd-4d5e-abde-bc0375682457': {'label': 'नाम', 'options': {'035bde39-c990-4df1-adca-a1778afa0d64': 'पुरुष'}}}, 'sections': {'ba12232e-96f4-42a2-8e29-ff3790d1e6e1': {'title': 'व्यक्तिगत जानकारी'}}, 'title': 'पंजीकरण फॉर्म'}}, 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 34b1bb86-0599-41e4-a093-ba805c2ba72b created successfully by user lang_admin (ID: a38a73a0-5d17-44e4-8015-95dd8721ca72)
--------------------------------- Captured Out ---------------------------------
Reg Response: 201, b'{\n  "message": "User registered"\n}\n'
Login Response: 200, b'{\n  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc2Nzk2ODU4MSwianRpIjoiMWU1MDc2NjEtZTdjZS00NmMxLTg4NTktYTA1MTczOTVkYjhmIiwidHlwZSI6ImFjY2VzcyIsInN1YiI6ImEzOGE3M2EwLTVkMTctNDRlNC04MDE1LTk1ZGQ4NzIxY2E3MiIsIm5iZiI6MTc2Nzk2ODU4MSwiZXhwIjoxNzY3OTY5NDgxLCJyb2xlcyI6WyJhZG1pbiJdfQ.Vea3bn0L2u3wVVxfSowIEQjArbyKMqPTYAZ4RBhkBYU",\n  "success": true\n}\n'

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'lang_admin@example.com', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'lang_admin'}
INFO:app:#x1F512 Password set for user: lang_admin
INFO:app:✅ User registered successfully: lang_admin (lang_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lang_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: lang_admin@example.com
INFO:app:Login successful for employee user lang_admin@example.com
INFO:app:Issued JWT for user lang_admin (ID: a38a73a0-5d17-44e4-8015-95dd8721ca72), roles: ['admin']
INFO:app:Returning JSON response for user lang_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User lang_admin (ID: a38a73a0-5d17-44e4-8015-95dd8721ca72) is attempting to create a form with data: {'slug': 'lang-test-e11758', 'title': 'Registration Form', 'versions': [{'sections': [{'id': 'ba12232e-96f4-42a2-8e29-ff3790d1e6e1', 'questions': [{'field_type': 'input', 'id': '8514bc30-60fd-4d5e-abde-bc0375682457', 'label': 'Name', 'options': [{'id': '035bde39-c990-4df1-adca-a1778afa0d64', 'option_label': 'Male', 'option_value': 'male'}]}], 'title': 'Personal Info'}], 'translations': {'hi': {'questions': {'8514bc30-60fd-4d5e-abde-bc0375682457': {'label': 'नाम', 'options': {'035bde39-c990-4df1-adca-a1778afa0d64': 'पुरुष'}}}, 'sections': {'ba12232e-96f4-42a2-8e29-ff3790d1e6e1': {'title': 'व्यक्तिगत जानकारी'}}, 'title': 'पंजीकरण फॉर्म'}}, 'version': '1.0'}]}
INFO:app:Form 34b1bb86-0599-41e4-a093-ba805c2ba72b created successfully by user lang_admin (ID: a38a73a0-5d17-44e4-8015-95dd8721ca72)

</system-err></testcase><testcase classname="tests.test_preview_mode" name="test_preview_valid_submission" time="0.502"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_preview@example.com', 'employee_id': 'PREV001', 'mobile': '6655443311', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_preview'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_preview
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_preview (admin_preview@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_preview@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_preview@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_preview@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_preview (ID: a9bb2e7d-a489-4139-9eac-a064215e267a), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_preview
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_preview (ID: a9bb2e7d-a489-4139-9eac-a064215e267a) is attempting to create a form with data: {'slug': 'preview-form', 'title': 'Preview Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 079c1519-2add-4979-8daf-e309fa6c567f created successfully by user admin_preview (ID: a9bb2e7d-a489-4139-9eac-a064215e267a)
#x1B[32mINFO    #x1B[0m app:responses.py:892 Received preview/validation request for form_id: 079c1519-2add-4979-8daf-e309fa6c567f
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_preview@example.com', 'employee_id': 'PREV001', 'mobile': '6655443311', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_preview'}
INFO:app:#x1F512 Password set for user: admin_preview
INFO:app:✅ User registered successfully: admin_preview (admin_preview@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_preview@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_preview@example.com
INFO:app:Login successful for employee user admin_preview@example.com
INFO:app:Issued JWT for user admin_preview (ID: a9bb2e7d-a489-4139-9eac-a064215e267a), roles: ['admin']
INFO:app:Returning JSON response for user admin_preview
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_preview (ID: a9bb2e7d-a489-4139-9eac-a064215e267a) is attempting to create a form with data: {'slug': 'preview-form', 'title': 'Preview Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 079c1519-2add-4979-8daf-e309fa6c567f created successfully by user admin_preview (ID: a9bb2e7d-a489-4139-9eac-a064215e267a)
INFO:app:Received preview/validation request for form_id: 079c1519-2add-4979-8daf-e309fa6c567f
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1

</system-err></testcase><testcase classname="tests.test_preview_mode" name="test_preview_invalid_submission" time="0.506"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_preview@example.com', 'employee_id': 'PREV001', 'mobile': '6655443311', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_preview'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_preview
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_preview (admin_preview@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_preview@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_preview@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_preview@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_preview (ID: 4b418add-be59-49b2-9c68-b08412dad22d), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_preview
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_preview (ID: 4b418add-be59-49b2-9c68-b08412dad22d) is attempting to create a form with data: {'slug': 'prev-inv-form', 'title': 'Preview Invalid Form', 'versions': [{'sections': [{'id': '22222222-2222-2222-2222-222222222222', 'questions': [{'field_type': 'input', 'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 4d673405-9e7c-4052-a1ef-6de435e08dde created successfully by user admin_preview (ID: 4b418add-be59-49b2-9c68-b08412dad22d)
#x1B[32mINFO    #x1B[0m app:responses.py:892 Received preview/validation request for form_id: 4d673405-9e7c-4052-a1ef-6de435e08dde
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 22222222-2222-2222-2222-222222222222, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, label=Q1
#x1B[33mWARNING #x1B[0m app:validation.py:186 bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb: Required field missing
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_preview@example.com', 'employee_id': 'PREV001', 'mobile': '6655443311', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_preview'}
INFO:app:#x1F512 Password set for user: admin_preview
INFO:app:✅ User registered successfully: admin_preview (admin_preview@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_preview@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_preview@example.com
INFO:app:Login successful for employee user admin_preview@example.com
INFO:app:Issued JWT for user admin_preview (ID: 4b418add-be59-49b2-9c68-b08412dad22d), roles: ['admin']
INFO:app:Returning JSON response for user admin_preview
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_preview (ID: 4b418add-be59-49b2-9c68-b08412dad22d) is attempting to create a form with data: {'slug': 'prev-inv-form', 'title': 'Preview Invalid Form', 'versions': [{'sections': [{'id': '22222222-2222-2222-2222-222222222222', 'questions': [{'field_type': 'input', 'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 4d673405-9e7c-4052-a1ef-6de435e08dde created successfully by user admin_preview (ID: 4b418add-be59-49b2-9c68-b08412dad22d)
INFO:app:Received preview/validation request for form_id: 4d673405-9e7c-4052-a1ef-6de435e08dde
INFO:app:Processing section: 22222222-2222-2222-2222-222222222222, repeatable=False
DEBUG:app:Checking question bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, label=Q1
WARNING:app:bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb: Required field missing

</system-err></testcase><testcase classname="tests.test_reordering" name="test_reorder_sections" time="0.505"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_order@example.com', 'employee_id': 'ORD001', 'mobile': '6655443322', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_order'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_order
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_order (admin_order@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_order@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_order@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_order@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_order (ID: 718cade0-845b-47e5-92d2-03add760d1e4), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_order
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_order (ID: 718cade0-845b-47e5-92d2-03add760d1e4) is attempting to create a form with data: {'slug': 'reorder-form', 'title': 'Reorder Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [], 'title': 'Section 1'}, {'id': '22222222-2222-2222-2222-222222222222', 'questions': [], 'title': 'Section 2'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 5b4d211c-e4e6-487c-95ed-c3e10604b645 created successfully by user admin_order (ID: 718cade0-845b-47e5-92d2-03add760d1e4)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_order@example.com', 'employee_id': 'ORD001', 'mobile': '6655443322', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_order'}
INFO:app:#x1F512 Password set for user: admin_order
INFO:app:✅ User registered successfully: admin_order (admin_order@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_order@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_order@example.com
INFO:app:Login successful for employee user admin_order@example.com
INFO:app:Issued JWT for user admin_order (ID: 718cade0-845b-47e5-92d2-03add760d1e4), roles: ['admin']
INFO:app:Returning JSON response for user admin_order
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_order (ID: 718cade0-845b-47e5-92d2-03add760d1e4) is attempting to create a form with data: {'slug': 'reorder-form', 'title': 'Reorder Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [], 'title': 'Section 1'}, {'id': '22222222-2222-2222-2222-222222222222', 'questions': [], 'title': 'Section 2'}], 'version': '1.0'}]}
INFO:app:Form 5b4d211c-e4e6-487c-95ed-c3e10604b645 created successfully by user admin_order (ID: 718cade0-845b-47e5-92d2-03add760d1e4)

</system-err></testcase><testcase classname="tests.test_reordering" name="test_reorder_questions" time="0.491"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_order@example.com', 'employee_id': 'ORD001', 'mobile': '6655443322', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_order'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_order
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_order (admin_order@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_order@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_order@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_order@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_order (ID: 149de6d9-5d23-4489-becc-0cf48ea12595), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_order
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_order (ID: 149de6d9-5d23-4489-becc-0cf48ea12595) is attempting to create a form with data: {'slug': 'q-reorder-form', 'title': 'Question Reorder Form', 'versions': [{'sections': [{'id': '33333333-3333-3333-3333-333333333333', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'label': 'Q1'}, {'field_type': 'input', 'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'label': 'Q2'}, {'field_type': 'input', 'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'label': 'Q3'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form f3169aa0-b468-421a-89a7-a20506a1ae10 created successfully by user admin_order (ID: 149de6d9-5d23-4489-becc-0cf48ea12595)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_order@example.com', 'employee_id': 'ORD001', 'mobile': '6655443322', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_order'}
INFO:app:#x1F512 Password set for user: admin_order
INFO:app:✅ User registered successfully: admin_order (admin_order@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_order@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_order@example.com
INFO:app:Login successful for employee user admin_order@example.com
INFO:app:Issued JWT for user admin_order (ID: 149de6d9-5d23-4489-becc-0cf48ea12595), roles: ['admin']
INFO:app:Returning JSON response for user admin_order
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_order (ID: 149de6d9-5d23-4489-becc-0cf48ea12595) is attempting to create a form with data: {'slug': 'q-reorder-form', 'title': 'Question Reorder Form', 'versions': [{'sections': [{'id': '33333333-3333-3333-3333-333333333333', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'label': 'Q1'}, {'field_type': 'input', 'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'label': 'Q2'}, {'field_type': 'input', 'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'label': 'Q3'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form f3169aa0-b468-421a-89a7-a20506a1ae10 created successfully by user admin_order (ID: 149de6d9-5d23-4489-becc-0cf48ea12595)

</system-err></testcase><testcase classname="tests.test_response_drafts" name="test_draft_lifecycle" time="0.503"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_drafts@example.com', 'employee_id': 'DRAFT001', 'mobile': '7788990011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_drafts'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_drafts
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_drafts (admin_drafts@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_drafts@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_drafts@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_drafts@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_drafts (ID: adac0ecd-65e3-4ab3-8931-3ef4573e9954), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_drafts
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_drafts (ID: adac0ecd-65e3-4ab3-8931-3ef4573e9954) is attempting to create a form with data: {'slug': 'draft-form', 'status': 'published', 'title': 'Draft Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 18243260-fe3a-490b-8421-bf555fb194bb created successfully by user admin_drafts (ID: adac0ecd-65e3-4ab3-8931-3ef4573e9954)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 18243260-fe3a-490b-8421-bf555fb194bb
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: adac0ecd-65e3-4ab3-8931-3ef4573e9954, Form title: Draft Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
#x1B[33mWARNING #x1B[0m app:validation.py:186 aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'error': 'Required field missing'}]
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 18243260-fe3a-490b-8421-bf555fb194bb
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: adac0ecd-65e3-4ab3-8931-3ef4573e9954, Form title: Draft Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=6f711e38-00fd-429e-8733-ea074cf5109b, is_draft=True
#x1B[32mINFO    #x1B[0m app:responses.py:306 Updating submission form=18243260-fe3a-490b-8421-bf555fb194bb resp=6f711e38-00fd-429e-8733-ea074cf5109b
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:306 Updating submission form=18243260-fe3a-490b-8421-bf555fb194bb resp=6f711e38-00fd-429e-8733-ea074cf5109b
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_drafts@example.com', 'employee_id': 'DRAFT001', 'mobile': '7788990011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_drafts'}
INFO:app:#x1F512 Password set for user: admin_drafts
INFO:app:✅ User registered successfully: admin_drafts (admin_drafts@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_drafts@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_drafts@example.com
INFO:app:Login successful for employee user admin_drafts@example.com
INFO:app:Issued JWT for user admin_drafts (ID: adac0ecd-65e3-4ab3-8931-3ef4573e9954), roles: ['admin']
INFO:app:Returning JSON response for user admin_drafts
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_drafts (ID: adac0ecd-65e3-4ab3-8931-3ef4573e9954) is attempting to create a form with data: {'slug': 'draft-form', 'status': 'published', 'title': 'Draft Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 18243260-fe3a-490b-8421-bf555fb194bb created successfully by user admin_drafts (ID: adac0ecd-65e3-4ab3-8931-3ef4573e9954)
INFO:app:Received submission for form_id: 18243260-fe3a-490b-8421-bf555fb194bb
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {}}
INFO:app:Current user: adac0ecd-65e3-4ab3-8931-3ef4573e9954, Form title: Draft Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
WARNING:app:aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa: Required field missing
WARNING:app:Validation failed with errors: [{'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'error': 'Required field missing'}]
INFO:app:Received submission for form_id: 18243260-fe3a-490b-8421-bf555fb194bb
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {}}
INFO:app:Current user: adac0ecd-65e3-4ab3-8931-3ef4573e9954, Form title: Draft Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
INFO:app:Submission saved: response_id=6f711e38-00fd-429e-8733-ea074cf5109b, is_draft=True
INFO:app:Updating submission form=18243260-fe3a-490b-8421-bf555fb194bb resp=6f711e38-00fd-429e-8733-ea074cf5109b
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
INFO:app:Updating submission form=18243260-fe3a-490b-8421-bf555fb194bb resp=6f711e38-00fd-429e-8733-ea074cf5109b
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1

</system-err></testcase><testcase classname="tests.test_response_drafts" name="test_draft_filtering" time="0.495"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_drafts@example.com', 'employee_id': 'DRAFT001', 'mobile': '7788990011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_drafts'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_drafts
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_drafts (admin_drafts@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_drafts@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_drafts@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_drafts@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_drafts (ID: b11e7838-3400-4e92-9ef3-f42fc363bfdd), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_drafts
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_drafts (ID: b11e7838-3400-4e92-9ef3-f42fc363bfdd) is attempting to create a form with data: {'slug': 'filter-form', 'status': 'published', 'title': 'Filter Form', 'versions': [{'sections': [], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 26da4c85-b982-477f-97ff-054d54006892 created successfully by user admin_drafts (ID: b11e7838-3400-4e92-9ef3-f42fc363bfdd)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 26da4c85-b982-477f-97ff-054d54006892
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: b11e7838-3400-4e92-9ef3-f42fc363bfdd, Form title: Filter Form
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=8d0d6f85-65c4-4f98-a7b8-782feeccf85d, is_draft=True
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 26da4c85-b982-477f-97ff-054d54006892
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: b11e7838-3400-4e92-9ef3-f42fc363bfdd, Form title: Filter Form
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=067d0444-e92a-48cd-b5ef-f7aef328125f, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_drafts@example.com', 'employee_id': 'DRAFT001', 'mobile': '7788990011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_drafts'}
INFO:app:#x1F512 Password set for user: admin_drafts
INFO:app:✅ User registered successfully: admin_drafts (admin_drafts@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_drafts@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_drafts@example.com
INFO:app:Login successful for employee user admin_drafts@example.com
INFO:app:Issued JWT for user admin_drafts (ID: b11e7838-3400-4e92-9ef3-f42fc363bfdd), roles: ['admin']
INFO:app:Returning JSON response for user admin_drafts
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_drafts (ID: b11e7838-3400-4e92-9ef3-f42fc363bfdd) is attempting to create a form with data: {'slug': 'filter-form', 'status': 'published', 'title': 'Filter Form', 'versions': [{'sections': [], 'version': '1.0'}]}
INFO:app:Form 26da4c85-b982-477f-97ff-054d54006892 created successfully by user admin_drafts (ID: b11e7838-3400-4e92-9ef3-f42fc363bfdd)
INFO:app:Received submission for form_id: 26da4c85-b982-477f-97ff-054d54006892
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: b11e7838-3400-4e92-9ef3-f42fc363bfdd, Form title: Filter Form
INFO:app:Submission saved: response_id=8d0d6f85-65c4-4f98-a7b8-782feeccf85d, is_draft=True
INFO:app:Received submission for form_id: 26da4c85-b982-477f-97ff-054d54006892
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: b11e7838-3400-4e92-9ef3-f42fc363bfdd, Form title: Filter Form
INFO:app:Submission saved: response_id=067d0444-e92a-48cd-b5ef-f7aef328125f, is_draft=False

</system-err></testcase><testcase classname="tests.test_response_management" name="test_response_history_and_comments" time="0.741"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'resp_admin@example.com', 'mobile': '1112223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'resp_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: resp_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: resp_admin (resp_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'resp_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: resp_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user resp_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user resp_admin (ID: 1fcc3085-1afd-41a6-a5b8-fbb1d1ab68f3), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user resp_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User resp_admin (ID: 1fcc3085-1afd-41a6-a5b8-fbb1d1ab68f3) is attempting to create a form with data: {'id': '54a5e5c6-531e-4e08-ad9c-f5f1da6a1309', 'slug': 'hist-test-47569d', 'status': 'published', 'title': 'History Test Form', 'versions': [{'sections': [{'id': 'ae7704e3-2b8c-46b4-aa82-e2c55153a424', 'questions': [{'field_type': 'input', 'id': 'ff2fe0a5-c2c4-4f6c-8cf2-6c8b90cfef0b', 'label': 'Name'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 54a5e5c6-531e-4e08-ad9c-f5f1da6a1309 created successfully by user resp_admin (ID: 1fcc3085-1afd-41a6-a5b8-fbb1d1ab68f3)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 54a5e5c6-531e-4e08-ad9c-f5f1da6a1309
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ae7704e3-2b8c-46b4-aa82-e2c55153a424': {'ff2fe0a5-c2c4-4f6c-8cf2-6c8b90cfef0b': 'Initial Name'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 1fcc3085-1afd-41a6-a5b8-fbb1d1ab68f3, Form title: History Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ae7704e3-2b8c-46b4-aa82-e2c55153a424, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question ff2fe0a5-c2c4-4f6c-8cf2-6c8b90cfef0b, label=Name
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=b944e4bd-214f-4759-806c-7c80bc6134d9, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:306 Updating submission form=54a5e5c6-531e-4e08-ad9c-f5f1da6a1309 resp=b944e4bd-214f-4759-806c-7c80bc6134d9
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ae7704e3-2b8c-46b4-aa82-e2c55153a424, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question ff2fe0a5-c2c4-4f6c-8cf2-6c8b90cfef0b, label=Name
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'resp_admin@example.com', 'mobile': '1112223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'resp_admin'}
INFO:app:#x1F512 Password set for user: resp_admin
INFO:app:✅ User registered successfully: resp_admin (resp_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'resp_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: resp_admin@example.com
INFO:app:Login successful for employee user resp_admin@example.com
INFO:app:Issued JWT for user resp_admin (ID: 1fcc3085-1afd-41a6-a5b8-fbb1d1ab68f3), roles: ['admin']
INFO:app:Returning JSON response for user resp_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User resp_admin (ID: 1fcc3085-1afd-41a6-a5b8-fbb1d1ab68f3) is attempting to create a form with data: {'id': '54a5e5c6-531e-4e08-ad9c-f5f1da6a1309', 'slug': 'hist-test-47569d', 'status': 'published', 'title': 'History Test Form', 'versions': [{'sections': [{'id': 'ae7704e3-2b8c-46b4-aa82-e2c55153a424', 'questions': [{'field_type': 'input', 'id': 'ff2fe0a5-c2c4-4f6c-8cf2-6c8b90cfef0b', 'label': 'Name'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 54a5e5c6-531e-4e08-ad9c-f5f1da6a1309 created successfully by user resp_admin (ID: 1fcc3085-1afd-41a6-a5b8-fbb1d1ab68f3)
INFO:app:Received submission for form_id: 54a5e5c6-531e-4e08-ad9c-f5f1da6a1309
INFO:app:Parsed JSON submission: {'ae7704e3-2b8c-46b4-aa82-e2c55153a424': {'ff2fe0a5-c2c4-4f6c-8cf2-6c8b90cfef0b': 'Initial Name'}}
INFO:app:Current user: 1fcc3085-1afd-41a6-a5b8-fbb1d1ab68f3, Form title: History Test Form
INFO:app:Processing section: ae7704e3-2b8c-46b4-aa82-e2c55153a424, repeatable=False
DEBUG:app:Checking question ff2fe0a5-c2c4-4f6c-8cf2-6c8b90cfef0b, label=Name
INFO:app:Submission saved: response_id=b944e4bd-214f-4759-806c-7c80bc6134d9, is_draft=False
INFO:app:Updating submission form=54a5e5c6-531e-4e08-ad9c-f5f1da6a1309 resp=b944e4bd-214f-4759-806c-7c80bc6134d9
INFO:app:Processing section: ae7704e3-2b8c-46b4-aa82-e2c55153a424, repeatable=False
DEBUG:app:Checking question ff2fe0a5-c2c4-4f6c-8cf2-6c8b90cfef0b, label=Name

</system-err></testcase><testcase classname="tests.test_response_merge" name="test_response_merge" time="0.511"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'merge_admin@example.com', 'mobile': '9990001112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'merge_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: merge_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: merge_admin (merge_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'merge_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: merge_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user merge_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user merge_admin (ID: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user merge_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User merge_admin (ID: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4) is attempting to create a form with data: {'id': 'c795c6eb-54e7-47db-abe1-f1dce53c2f94', 'slug': 'merge-test-9b7354', 'status': 'published', 'title': 'Merge Test Form', 'versions': [{'sections': [{'id': '0e58c4d7-69c1-43a4-a4e4-bc979d7b542d', 'questions': [{'field_type': 'input', 'id': '524f8093-1284-43b6-a36b-2d8d4790ec68', 'label': 'Q1'}, {'field_type': 'input', 'id': '49c50095-d6ea-499e-8687-5b595b8d3a73', 'label': 'Q2'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form c795c6eb-54e7-47db-abe1-f1dce53c2f94 created successfully by user merge_admin (ID: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: c795c6eb-54e7-47db-abe1-f1dce53c2f94
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'0e58c4d7-69c1-43a4-a4e4-bc979d7b542d': {'524f8093-1284-43b6-a36b-2d8d4790ec68': 'Val 1'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4, Form title: Merge Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 0e58c4d7-69c1-43a4-a4e4-bc979d7b542d, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 524f8093-1284-43b6-a36b-2d8d4790ec68, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 49c50095-d6ea-499e-8687-5b595b8d3a73, label=Q2
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=49704002-87d5-4345-aade-02adb78dd6e4, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: c795c6eb-54e7-47db-abe1-f1dce53c2f94
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'0e58c4d7-69c1-43a4-a4e4-bc979d7b542d': {'49c50095-d6ea-499e-8687-5b595b8d3a73': 'Val 2'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4, Form title: Merge Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 0e58c4d7-69c1-43a4-a4e4-bc979d7b542d, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 524f8093-1284-43b6-a36b-2d8d4790ec68, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 49c50095-d6ea-499e-8687-5b595b8d3a73, label=Q2
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=209bb38b-4fae-4e5f-a08c-68a926d143de, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'merge_admin@example.com', 'mobile': '9990001112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'merge_admin'}
INFO:app:#x1F512 Password set for user: merge_admin
INFO:app:✅ User registered successfully: merge_admin (merge_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'merge_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: merge_admin@example.com
INFO:app:Login successful for employee user merge_admin@example.com
INFO:app:Issued JWT for user merge_admin (ID: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4), roles: ['admin']
INFO:app:Returning JSON response for user merge_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User merge_admin (ID: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4) is attempting to create a form with data: {'id': 'c795c6eb-54e7-47db-abe1-f1dce53c2f94', 'slug': 'merge-test-9b7354', 'status': 'published', 'title': 'Merge Test Form', 'versions': [{'sections': [{'id': '0e58c4d7-69c1-43a4-a4e4-bc979d7b542d', 'questions': [{'field_type': 'input', 'id': '524f8093-1284-43b6-a36b-2d8d4790ec68', 'label': 'Q1'}, {'field_type': 'input', 'id': '49c50095-d6ea-499e-8687-5b595b8d3a73', 'label': 'Q2'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form c795c6eb-54e7-47db-abe1-f1dce53c2f94 created successfully by user merge_admin (ID: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4)
INFO:app:Received submission for form_id: c795c6eb-54e7-47db-abe1-f1dce53c2f94
INFO:app:Parsed JSON submission: {'0e58c4d7-69c1-43a4-a4e4-bc979d7b542d': {'524f8093-1284-43b6-a36b-2d8d4790ec68': 'Val 1'}}
INFO:app:Current user: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4, Form title: Merge Test Form
INFO:app:Processing section: 0e58c4d7-69c1-43a4-a4e4-bc979d7b542d, repeatable=False
DEBUG:app:Checking question 524f8093-1284-43b6-a36b-2d8d4790ec68, label=Q1
DEBUG:app:Checking question 49c50095-d6ea-499e-8687-5b595b8d3a73, label=Q2
INFO:app:Submission saved: response_id=49704002-87d5-4345-aade-02adb78dd6e4, is_draft=False
INFO:app:Received submission for form_id: c795c6eb-54e7-47db-abe1-f1dce53c2f94
INFO:app:Parsed JSON submission: {'0e58c4d7-69c1-43a4-a4e4-bc979d7b542d': {'49c50095-d6ea-499e-8687-5b595b8d3a73': 'Val 2'}}
INFO:app:Current user: 2e1a92f3-d9c9-4bbf-b0a2-03474d6302f4, Form title: Merge Test Form
INFO:app:Processing section: 0e58c4d7-69c1-43a4-a4e4-bc979d7b542d, repeatable=False
DEBUG:app:Checking question 524f8093-1284-43b6-a36b-2d8d4790ec68, label=Q1
DEBUG:app:Checking question 49c50095-d6ea-499e-8687-5b595b8d3a73, label=Q2
INFO:app:Submission saved: response_id=209bb38b-4fae-4e5f-a08c-68a926d143de, is_draft=False

</system-err></testcase><testcase classname="tests.test_response_status" name="test_response_status_workflow" time="1.050"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'status_admin_15c947@test.com', 'employee_id': 'EMP_695a16', 'mobile': '9992982173', 'roles': ['admin'], 'user_type': 'employee', 'username': 'status_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: status_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: status_admin (status_admin_15c947@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'status_admin_15c947@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: status_admin_15c947@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user status_admin_15c947@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user status_admin (ID: 905653d7-f54c-452f-965b-9d9fbf970f8a), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user status_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'status_user_4c84d3@test.com', 'employee_id': 'EMP_cfad62', 'mobile': '8858879910', 'roles': ['user'], 'user_type': 'employee', 'username': 'status_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: status_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: status_user (status_user_4c84d3@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'status_user_4c84d3@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: status_user_4c84d3@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user status_user_4c84d3@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user status_user (ID: 4d4024b3-da5b-458f-bc3b-219442665465), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user status_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User status_admin (ID: 905653d7-f54c-452f-965b-9d9fbf970f8a) is attempting to create a form with data: {'is_public': True, 'slug': 'status-form-deda35', 'status': 'published', 'title': 'Status Workflow Form', 'versions': [{'sections': [{'id': '504508f7-abc9-43f5-b56c-776331bae354', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form bdcb13b9-dca7-43fd-9285-346ff1c72d0a created successfully by user status_admin (ID: 905653d7-f54c-452f-965b-9d9fbf970f8a)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: bdcb13b9-dca7-43fd-9285-346ff1c72d0a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'foo': 'bar'}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 4d4024b3-da5b-458f-bc3b-219442665465, Form title: Status Workflow Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 504508f7-abc9-43f5-b56c-776331bae354, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=c550011b-4594-42e5-87c1-085e7ddb3994, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'status_admin_15c947@test.com', 'employee_id': 'EMP_695a16', 'mobile': '9992982173', 'roles': ['admin'], 'user_type': 'employee', 'username': 'status_admin'}
INFO:app:#x1F512 Password set for user: status_admin
INFO:app:✅ User registered successfully: status_admin (status_admin_15c947@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'status_admin_15c947@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: status_admin_15c947@test.com
INFO:app:Login successful for employee user status_admin_15c947@test.com
INFO:app:Issued JWT for user status_admin (ID: 905653d7-f54c-452f-965b-9d9fbf970f8a), roles: ['admin']
INFO:app:Returning JSON response for user status_admin
INFO:app:Received registration data: {'email': 'status_user_4c84d3@test.com', 'employee_id': 'EMP_cfad62', 'mobile': '8858879910', 'roles': ['user'], 'user_type': 'employee', 'username': 'status_user'}
INFO:app:#x1F512 Password set for user: status_user
INFO:app:✅ User registered successfully: status_user (status_user_4c84d3@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'status_user_4c84d3@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: status_user_4c84d3@test.com
INFO:app:Login successful for employee user status_user_4c84d3@test.com
INFO:app:Issued JWT for user status_user (ID: 4d4024b3-da5b-458f-bc3b-219442665465), roles: ['user']
INFO:app:Returning JSON response for user status_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User status_admin (ID: 905653d7-f54c-452f-965b-9d9fbf970f8a) is attempting to create a form with data: {'is_public': True, 'slug': 'status-form-deda35', 'status': 'published', 'title': 'Status Workflow Form', 'versions': [{'sections': [{'id': '504508f7-abc9-43f5-b56c-776331bae354', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form bdcb13b9-dca7-43fd-9285-346ff1c72d0a created successfully by user status_admin (ID: 905653d7-f54c-452f-965b-9d9fbf970f8a)
INFO:app:Received submission for form_id: bdcb13b9-dca7-43fd-9285-346ff1c72d0a
INFO:app:Parsed JSON submission: {'foo': 'bar'}
INFO:app:Current user: 4d4024b3-da5b-458f-bc3b-219442665465, Form title: Status Workflow Form
INFO:app:Processing section: 504508f7-abc9-43f5-b56c-776331bae354, repeatable=False
INFO:app:Submission saved: response_id=c550011b-4594-42e5-87c1-085e7ddb3994, is_draft=False

</system-err></testcase><testcase classname="tests.test_responses" name="test_submit_response_success" time="1.004"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: 787022a1-c728-4838-afcf-980f6d7d2dd9), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 9e2c21e5-3fb0-4f6b-b4c4-b2948188a75b), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: 787022a1-c728-4838-afcf-980f6d7d2dd9) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-form', 'status': 'published', 'title': 'Published Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': '22222222-2222-2222-2222-222222222222', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 12c7b3c3-e333-4808-946b-cd782f70e201 created successfully by user admin_resp (ID: 787022a1-c728-4838-afcf-980f6d7d2dd9)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 12c7b3c3-e333-4808-946b-cd782f70e201
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'Answer 1'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 9e2c21e5-3fb0-4f6b-b4c4-b2948188a75b, Form title: Published Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 22222222-2222-2222-2222-222222222222, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=07d6065e-f5ae-4cae-90aa-c4c5e669c2a5, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: 787022a1-c728-4838-afcf-980f6d7d2dd9), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 9e2c21e5-3fb0-4f6b-b4c4-b2948188a75b), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: 787022a1-c728-4838-afcf-980f6d7d2dd9) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-form', 'status': 'published', 'title': 'Published Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': '22222222-2222-2222-2222-222222222222', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 12c7b3c3-e333-4808-946b-cd782f70e201 created successfully by user admin_resp (ID: 787022a1-c728-4838-afcf-980f6d7d2dd9)
INFO:app:Received submission for form_id: 12c7b3c3-e333-4808-946b-cd782f70e201
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'Answer 1'}}
INFO:app:Current user: 9e2c21e5-3fb0-4f6b-b4c4-b2948188a75b, Form title: Published Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question 22222222-2222-2222-2222-222222222222, label=Q1
INFO:app:Submission saved: response_id=07d6065e-f5ae-4cae-90aa-c4c5e669c2a5, is_draft=False

</system-err></testcase><testcase classname="tests.test_responses" name="test_submit_response_validation_failure" time="0.993"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: 2277505f-0037-4d56-9fbe-2f7736978f21), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 733d7cb9-f044-43f0-9840-5cb11451bebe), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: 2277505f-0037-4d56-9fbe-2f7736978f21) is attempting to create a form with data: {'is_public': True, 'slug': 'val-form', 'status': 'published', 'title': 'Val Form', 'versions': [{'sections': [{'id': '33333333-3333-3333-3333-333333333333', 'questions': [{'field_type': 'input', 'id': '44444444-4444-4444-4444-444444444444', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 09e5dde1-ace4-40c7-85a8-62dd1ee8c589 created successfully by user admin_resp (ID: 2277505f-0037-4d56-9fbe-2f7736978f21)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 09e5dde1-ace4-40c7-85a8-62dd1ee8c589
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'33333333-3333-3333-3333-333333333333': {'44444444-4444-4444-4444-444444444444': ''}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 733d7cb9-f044-43f0-9840-5cb11451bebe, Form title: Val Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 33333333-3333-3333-3333-333333333333, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 44444444-4444-4444-4444-444444444444, label=Q1
#x1B[33mWARNING #x1B[0m app:validation.py:186 44444444-4444-4444-4444-444444444444: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': '44444444-4444-4444-4444-444444444444', 'error': 'Required field missing'}]
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: 2277505f-0037-4d56-9fbe-2f7736978f21), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 733d7cb9-f044-43f0-9840-5cb11451bebe), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: 2277505f-0037-4d56-9fbe-2f7736978f21) is attempting to create a form with data: {'is_public': True, 'slug': 'val-form', 'status': 'published', 'title': 'Val Form', 'versions': [{'sections': [{'id': '33333333-3333-3333-3333-333333333333', 'questions': [{'field_type': 'input', 'id': '44444444-4444-4444-4444-444444444444', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 09e5dde1-ace4-40c7-85a8-62dd1ee8c589 created successfully by user admin_resp (ID: 2277505f-0037-4d56-9fbe-2f7736978f21)
INFO:app:Received submission for form_id: 09e5dde1-ace4-40c7-85a8-62dd1ee8c589
INFO:app:Parsed JSON submission: {'33333333-3333-3333-3333-333333333333': {'44444444-4444-4444-4444-444444444444': ''}}
INFO:app:Current user: 733d7cb9-f044-43f0-9840-5cb11451bebe, Form title: Val Form
INFO:app:Processing section: 33333333-3333-3333-3333-333333333333, repeatable=False
DEBUG:app:Checking question 44444444-4444-4444-4444-444444444444, label=Q1
WARNING:app:44444444-4444-4444-4444-444444444444: Required field missing
WARNING:app:Validation failed with errors: [{'id': '44444444-4444-4444-4444-444444444444', 'error': 'Required field missing'}]

</system-err></testcase><testcase classname="tests.test_responses" name="test_submit_to_draft_form" time="0.993"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: c6229b44-3a6d-4268-8044-3bec522adfa8), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 5d01dd05-fab4-4f19-9b9c-655bc4665d07), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: c6229b44-3a6d-4268-8044-3bec522adfa8) is attempting to create a form with data: {'is_public': True, 'slug': 'draft-form', 'status': 'draft', 'title': 'Draft Form'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form bb665f47-1131-4ad3-9898-4c6e6b7d5821 created successfully by user admin_resp (ID: c6229b44-3a6d-4268-8044-3bec522adfa8)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: bb665f47-1131-4ad3-9898-4c6e6b7d5821
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[33mWARNING #x1B[0m app:responses.py:80 Attempted submission to non-published form bb665f47-1131-4ad3-9898-4c6e6b7d5821 (status: draft)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: c6229b44-3a6d-4268-8044-3bec522adfa8), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 5d01dd05-fab4-4f19-9b9c-655bc4665d07), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: c6229b44-3a6d-4268-8044-3bec522adfa8) is attempting to create a form with data: {'is_public': True, 'slug': 'draft-form', 'status': 'draft', 'title': 'Draft Form'}
INFO:app:Form bb665f47-1131-4ad3-9898-4c6e6b7d5821 created successfully by user admin_resp (ID: c6229b44-3a6d-4268-8044-3bec522adfa8)
INFO:app:Received submission for form_id: bb665f47-1131-4ad3-9898-4c6e6b7d5821
INFO:app:Parsed JSON submission: {}
WARNING:app:Attempted submission to non-published form bb665f47-1131-4ad3-9898-4c6e6b7d5821 (status: draft)

</system-err></testcase><testcase classname="tests.test_responses" name="test_search_responses" time="1.022"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: 180666e8-3a00-463f-ae90-b87b82ce2c92), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 5f3521d0-2424-4e1f-a75b-7e15fe8132c7), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: 180666e8-3a00-463f-ae90-b87b82ce2c92) is attempting to create a form with data: {'is_public': True, 'slug': 'search-form', 'status': 'published', 'title': 'Search Form', 'versions': [{'sections': [{'id': '55555555-5555-5555-5555-555555555555', 'questions': [{'field_type': 'input', 'id': '66666666-6666-6666-6666-666666666666', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form e0077475-e20c-4554-82d4-2ef080810b6f created successfully by user admin_resp (ID: 180666e8-3a00-463f-ae90-b87b82ce2c92)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e0077475-e20c-4554-82d4-2ef080810b6f
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'55555555-5555-5555-5555-555555555555': {'66666666-6666-6666-6666-666666666666': 'Apple'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 5f3521d0-2424-4e1f-a75b-7e15fe8132c7, Form title: Search Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 55555555-5555-5555-5555-555555555555, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 66666666-6666-6666-6666-666666666666, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=9ac38b37-2527-440e-8609-f5a4abfe50f0, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: e0077475-e20c-4554-82d4-2ef080810b6f
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'55555555-5555-5555-5555-555555555555': {'66666666-6666-6666-6666-666666666666': 'Banana'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 5f3521d0-2424-4e1f-a75b-7e15fe8132c7, Form title: Search Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 55555555-5555-5555-5555-555555555555, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 66666666-6666-6666-6666-666666666666, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=c7ea9857-ea3b-4389-9f7d-6ef860ae6220, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:585 User admin_resp (ID: 180666e8-3a00-463f-ae90-b87b82ce2c92) is searching responses for form ID: e0077475-e20c-4554-82d4-2ef080810b6f
#x1B[35mDEBUG   #x1B[0m app:responses.py:590 Received filters: {'data': {'66666666-6666-6666-6666-666666666666': {'op': 'eq', 'type': 'string', 'value': 'Apple'}}}
#x1B[35mDEBUG   #x1B[0m app:responses.py:619 Applying filter on question ID 66666666-6666-6666-6666-666666666666: {'op': 'eq', 'type': 'string', 'value': 'Apple'}
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: 180666e8-3a00-463f-ae90-b87b82ce2c92), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 5f3521d0-2424-4e1f-a75b-7e15fe8132c7), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: 180666e8-3a00-463f-ae90-b87b82ce2c92) is attempting to create a form with data: {'is_public': True, 'slug': 'search-form', 'status': 'published', 'title': 'Search Form', 'versions': [{'sections': [{'id': '55555555-5555-5555-5555-555555555555', 'questions': [{'field_type': 'input', 'id': '66666666-6666-6666-6666-666666666666', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form e0077475-e20c-4554-82d4-2ef080810b6f created successfully by user admin_resp (ID: 180666e8-3a00-463f-ae90-b87b82ce2c92)
INFO:app:Received submission for form_id: e0077475-e20c-4554-82d4-2ef080810b6f
INFO:app:Parsed JSON submission: {'55555555-5555-5555-5555-555555555555': {'66666666-6666-6666-6666-666666666666': 'Apple'}}
INFO:app:Current user: 5f3521d0-2424-4e1f-a75b-7e15fe8132c7, Form title: Search Form
INFO:app:Processing section: 55555555-5555-5555-5555-555555555555, repeatable=False
DEBUG:app:Checking question 66666666-6666-6666-6666-666666666666, label=Q1
INFO:app:Submission saved: response_id=9ac38b37-2527-440e-8609-f5a4abfe50f0, is_draft=False
INFO:app:Received submission for form_id: e0077475-e20c-4554-82d4-2ef080810b6f
INFO:app:Parsed JSON submission: {'55555555-5555-5555-5555-555555555555': {'66666666-6666-6666-6666-666666666666': 'Banana'}}
INFO:app:Current user: 5f3521d0-2424-4e1f-a75b-7e15fe8132c7, Form title: Search Form
INFO:app:Processing section: 55555555-5555-5555-5555-555555555555, repeatable=False
DEBUG:app:Checking question 66666666-6666-6666-6666-666666666666, label=Q1
INFO:app:Submission saved: response_id=c7ea9857-ea3b-4389-9f7d-6ef860ae6220, is_draft=False
INFO:app:User admin_resp (ID: 180666e8-3a00-463f-ae90-b87b82ce2c92) is searching responses for form ID: e0077475-e20c-4554-82d4-2ef080810b6f
DEBUG:app:Received filters: {'data': {'66666666-6666-6666-6666-666666666666': {'op': 'eq', 'type': 'string', 'value': 'Apple'}}}
DEBUG:app:Applying filter on question ID 66666666-6666-6666-6666-666666666666: {'op': 'eq', 'type': 'string', 'value': 'Apple'}

</system-err></testcase><testcase classname="tests.test_responses" name="test_archive_response" time="1.034"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: 8d564eda-a2b6-4454-a7a4-21860ce83e35), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 85f9b99e-b4c6-4f67-b03d-2bb4ae84f4e9), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: 8d564eda-a2b6-4454-a7a4-21860ce83e35) is attempting to create a form with data: {'is_public': True, 'slug': 'arc-form', 'status': 'published', 'title': 'Arc Form', 'versions': [{'sections': [{'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form dd64533f-7061-4027-8129-cf6164bc95ed created successfully by user admin_resp (ID: 8d564eda-a2b6-4454-a7a4-21860ce83e35)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: dd64533f-7061-4027-8129-cf6164bc95ed
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 85f9b99e-b4c6-4f67-b03d-2bb4ae84f4e9, Form title: Arc Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: cccccccc-cccc-cccc-cccc-cccccccccccc, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=b62bb3fe-e9bf-4d66-92ea-b5b87e98f006, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: 8d564eda-a2b6-4454-a7a4-21860ce83e35), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 85f9b99e-b4c6-4f67-b03d-2bb4ae84f4e9), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: 8d564eda-a2b6-4454-a7a4-21860ce83e35) is attempting to create a form with data: {'is_public': True, 'slug': 'arc-form', 'status': 'published', 'title': 'Arc Form', 'versions': [{'sections': [{'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form dd64533f-7061-4027-8129-cf6164bc95ed created successfully by user admin_resp (ID: 8d564eda-a2b6-4454-a7a4-21860ce83e35)
INFO:app:Received submission for form_id: dd64533f-7061-4027-8129-cf6164bc95ed
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 85f9b99e-b4c6-4f67-b03d-2bb4ae84f4e9, Form title: Arc Form
INFO:app:Processing section: cccccccc-cccc-cccc-cccc-cccccccccccc, repeatable=False
INFO:app:Submission saved: response_id=b62bb3fe-e9bf-4d66-92ea-b5b87e98f006, is_draft=False

</system-err></testcase><testcase classname="tests.test_scheduled_publishing" name="test_scheduled_publishing_future" time="0.999"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sched_admin_f1b1ae@test.com', 'employee_id': 'EMP_469047', 'mobile': '7735008683', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sched_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sched_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sched_admin (sched_admin_f1b1ae@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sched_admin_f1b1ae@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sched_admin_f1b1ae@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sched_admin_f1b1ae@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sched_admin (ID: 119607ce-d467-4464-8dbd-9cd56c8f0110), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sched_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sched_user_dc8f9a@test.com', 'employee_id': 'EMP_73bc63', 'mobile': '6643813424', 'roles': ['user'], 'user_type': 'employee', 'username': 'sched_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sched_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sched_user (sched_user_dc8f9a@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sched_user_dc8f9a@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sched_user_dc8f9a@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sched_user_dc8f9a@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sched_user (ID: 129d1d94-2f0a-4d39-aa57-5d88b756ef74), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sched_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User sched_admin (ID: 119607ce-d467-4464-8dbd-9cd56c8f0110) is attempting to create a form with data: {'is_public': True, 'publish_at': '2026-01-10T14:23:12', 'slug': 'future-form-27271a', 'status': 'published', 'title': 'Future Form', 'versions': [{'sections': [{'id': '41962096-a42a-4c02-931d-cfec3bd72fd1', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 1d18d350-8521-44b1-ad49-99bd83e18f5b created successfully by user sched_admin (ID: 119607ce-d467-4464-8dbd-9cd56c8f0110)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 1d18d350-8521-44b1-ad49-99bd83e18f5b
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[33mWARNING #x1B[0m app:responses.py:93 Attempted submission to future scheduled form 1d18d350-8521-44b1-ad49-99bd83e18f5b (publish at: 2026-01-10 14:23:12)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'sched_admin_f1b1ae@test.com', 'employee_id': 'EMP_469047', 'mobile': '7735008683', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sched_admin'}
INFO:app:#x1F512 Password set for user: sched_admin
INFO:app:✅ User registered successfully: sched_admin (sched_admin_f1b1ae@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sched_admin_f1b1ae@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: sched_admin_f1b1ae@test.com
INFO:app:Login successful for employee user sched_admin_f1b1ae@test.com
INFO:app:Issued JWT for user sched_admin (ID: 119607ce-d467-4464-8dbd-9cd56c8f0110), roles: ['admin']
INFO:app:Returning JSON response for user sched_admin
INFO:app:Received registration data: {'email': 'sched_user_dc8f9a@test.com', 'employee_id': 'EMP_73bc63', 'mobile': '6643813424', 'roles': ['user'], 'user_type': 'employee', 'username': 'sched_user'}
INFO:app:#x1F512 Password set for user: sched_user
INFO:app:✅ User registered successfully: sched_user (sched_user_dc8f9a@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sched_user_dc8f9a@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: sched_user_dc8f9a@test.com
INFO:app:Login successful for employee user sched_user_dc8f9a@test.com
INFO:app:Issued JWT for user sched_user (ID: 129d1d94-2f0a-4d39-aa57-5d88b756ef74), roles: ['user']
INFO:app:Returning JSON response for user sched_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User sched_admin (ID: 119607ce-d467-4464-8dbd-9cd56c8f0110) is attempting to create a form with data: {'is_public': True, 'publish_at': '2026-01-10T14:23:12', 'slug': 'future-form-27271a', 'status': 'published', 'title': 'Future Form', 'versions': [{'sections': [{'id': '41962096-a42a-4c02-931d-cfec3bd72fd1', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 1d18d350-8521-44b1-ad49-99bd83e18f5b created successfully by user sched_admin (ID: 119607ce-d467-4464-8dbd-9cd56c8f0110)
INFO:app:Received submission for form_id: 1d18d350-8521-44b1-ad49-99bd83e18f5b
INFO:app:Parsed JSON submission: {}
WARNING:app:Attempted submission to future scheduled form 1d18d350-8521-44b1-ad49-99bd83e18f5b (publish at: 2026-01-10 14:23:12)

</system-err></testcase><testcase classname="tests.test_scheduled_publishing" name="test_scheduled_publishing_past" time="1.014"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sched_admin_d8ee0b@test.com', 'employee_id': 'EMP_5f71cc', 'mobile': '7791248165', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sched_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sched_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sched_admin (sched_admin_d8ee0b@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sched_admin_d8ee0b@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sched_admin_d8ee0b@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sched_admin_d8ee0b@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sched_admin (ID: 9122553a-19d6-4e94-912d-6a00640c5975), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sched_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sched_user_9df151@test.com', 'employee_id': 'EMP_916153', 'mobile': '6689187109', 'roles': ['user'], 'user_type': 'employee', 'username': 'sched_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sched_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sched_user (sched_user_9df151@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sched_user_9df151@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sched_user_9df151@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sched_user_9df151@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sched_user (ID: 61ed854d-7028-4a45-8bc2-00d4557cb4f3), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sched_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User sched_admin (ID: 9122553a-19d6-4e94-912d-6a00640c5975) is attempting to create a form with data: {'is_public': True, 'publish_at': '2026-01-08T14:23:13', 'slug': 'past-form-de9a3f', 'status': 'published', 'submitters': [], 'title': 'Past Form', 'versions': [{'sections': [{'id': '4ddf01f6-c5b9-4c79-8f37-5f158c6e11ff', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 7319c697-7c0e-46c5-9d11-e2580582e9f5 created successfully by user sched_admin (ID: 9122553a-19d6-4e94-912d-6a00640c5975)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 7319c697-7c0e-46c5-9d11-e2580582e9f5
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 61ed854d-7028-4a45-8bc2-00d4557cb4f3, Form title: Past Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 4ddf01f6-c5b9-4c79-8f37-5f158c6e11ff, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=4e73f185-f1be-4a6a-b784-d6534a9edcaa, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'sched_admin_d8ee0b@test.com', 'employee_id': 'EMP_5f71cc', 'mobile': '7791248165', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sched_admin'}
INFO:app:#x1F512 Password set for user: sched_admin
INFO:app:✅ User registered successfully: sched_admin (sched_admin_d8ee0b@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sched_admin_d8ee0b@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: sched_admin_d8ee0b@test.com
INFO:app:Login successful for employee user sched_admin_d8ee0b@test.com
INFO:app:Issued JWT for user sched_admin (ID: 9122553a-19d6-4e94-912d-6a00640c5975), roles: ['admin']
INFO:app:Returning JSON response for user sched_admin
INFO:app:Received registration data: {'email': 'sched_user_9df151@test.com', 'employee_id': 'EMP_916153', 'mobile': '6689187109', 'roles': ['user'], 'user_type': 'employee', 'username': 'sched_user'}
INFO:app:#x1F512 Password set for user: sched_user
INFO:app:✅ User registered successfully: sched_user (sched_user_9df151@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sched_user_9df151@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: sched_user_9df151@test.com
INFO:app:Login successful for employee user sched_user_9df151@test.com
INFO:app:Issued JWT for user sched_user (ID: 61ed854d-7028-4a45-8bc2-00d4557cb4f3), roles: ['user']
INFO:app:Returning JSON response for user sched_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User sched_admin (ID: 9122553a-19d6-4e94-912d-6a00640c5975) is attempting to create a form with data: {'is_public': True, 'publish_at': '2026-01-08T14:23:13', 'slug': 'past-form-de9a3f', 'status': 'published', 'submitters': [], 'title': 'Past Form', 'versions': [{'sections': [{'id': '4ddf01f6-c5b9-4c79-8f37-5f158c6e11ff', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 7319c697-7c0e-46c5-9d11-e2580582e9f5 created successfully by user sched_admin (ID: 9122553a-19d6-4e94-912d-6a00640c5975)
INFO:app:Received submission for form_id: 7319c697-7c0e-46c5-9d11-e2580582e9f5
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 61ed854d-7028-4a45-8bc2-00d4557cb4f3, Form title: Past Form
INFO:app:Processing section: 4ddf01f6-c5b9-4c79-8f37-5f158c6e11ff, repeatable=False
INFO:app:Submission saved: response_id=4e73f185-f1be-4a6a-b784-d6534a9edcaa, is_draft=False

</system-err></testcase><testcase classname="tests.test_user" name="test_list_users_admin" time="0.508"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_test@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 650b1a11-dd32-4cdf-a229-d9085b567a01), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_test@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_test@example.com
INFO:app:Login successful for employee user admin_test@example.com
INFO:app:Issued JWT for user admin_user (ID: 650b1a11-dd32-4cdf-a229-d9085b567a01), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_user" name="test_list_users_unauthorized" time="0.500"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'reg@example.com', 'employee_id': 'UR001', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'reg_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: reg_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: reg_user (reg@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'reg@example.com', 'password': 'UserPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: reg@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user reg@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user reg_user (ID: edf127d8-4898-47cb-afad-23868d4799b9), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user reg_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[33mWARNING #x1B[0m app:decorator.py:39 Access forbidden for user edf127d8-4898-47cb-afad-23868d4799b9. Required: ('admin', 'superadmin'), Actual: ['user']
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'reg@example.com', 'employee_id': 'UR001', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'reg_user'}
INFO:app:#x1F512 Password set for user: reg_user
INFO:app:✅ User registered successfully: reg_user (reg@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'reg@example.com', 'password': 'UserPassword123'}
INFO:app:Employee login attempt with identifier: reg@example.com
INFO:app:Login successful for employee user reg@example.com
INFO:app:Issued JWT for user reg_user (ID: edf127d8-4898-47cb-afad-23868d4799b9), roles: ['user']
INFO:app:Returning JSON response for user reg_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
WARNING:app:Access forbidden for user edf127d8-4898-47cb-afad-23868d4799b9. Required: ('admin', 'superadmin'), Actual: ['user']

</system-err></testcase><testcase classname="tests.test_user" name="test_create_user_admin" time="0.687"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_test@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 4115c186-e58f-4d59-811b-a7da2a4cd576), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_test@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_test@example.com
INFO:app:Login successful for employee user admin_test@example.com
INFO:app:Issued JWT for user admin_user (ID: 4115c186-e58f-4d59-811b-a7da2a4cd576), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_user" name="test_lock_unlock_user" time="0.703"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_test@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 365b87c1-8bb3-43b7-8365-fd8ab12491c6), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[33mWARNING #x1B[0m auth:User.py:97 User a8334062-3358-4d04-9ff8-1a654d9593d4 locked until 2026-01-10 14:23:16.247205+00:00
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[32mINFO    #x1B[0m auth:User.py:104 User a8334062-3358-4d04-9ff8-1a654d9593d4 manually unlocked
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_test@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_test@example.com
INFO:app:Login successful for employee user admin_test@example.com
INFO:app:Issued JWT for user admin_user (ID: 365b87c1-8bb3-43b7-8365-fd8ab12491c6), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
WARNING:auth:User a8334062-3358-4d04-9ff8-1a654d9593d4 locked until 2026-01-10 14:23:16.247205+00:00
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
INFO:auth:User a8334062-3358-4d04-9ff8-1a654d9593d4 manually unlocked
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_user" name="test_change_password" time="1.033"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'pw@example.com', 'employee_id': 'PW001', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'pwuser'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: pwuser
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: pwuser (pw@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'pw@example.com', 'password': 'OldPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: pw@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user pw@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user pwuser (ID: cac13dce-95ac-42fe-8b01-85701d697d51), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user pwuser
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'pw@example.com', 'password': 'NewPassword123!'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: pw@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user pw@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user pwuser (ID: cac13dce-95ac-42fe-8b01-85701d697d51), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user pwuser
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'pw@example.com', 'employee_id': 'PW001', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'pwuser'}
INFO:app:#x1F512 Password set for user: pwuser
INFO:app:✅ User registered successfully: pwuser (pw@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'pw@example.com', 'password': 'OldPassword123'}
INFO:app:Employee login attempt with identifier: pw@example.com
INFO:app:Login successful for employee user pw@example.com
INFO:app:Issued JWT for user pwuser (ID: cac13dce-95ac-42fe-8b01-85701d697d51), roles: ['user']
INFO:app:Returning JSON response for user pwuser
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'pw@example.com', 'password': 'NewPassword123!'}
INFO:app:Employee login attempt with identifier: pw@example.com
INFO:app:Login successful for employee user pw@example.com
INFO:app:Issued JWT for user pwuser (ID: cac13dce-95ac-42fe-8b01-85701d697d51), roles: ['user']
INFO:app:Returning JSON response for user pwuser

</system-err></testcase><testcase classname="tests.test_workflow" name="test_workflow_crud" time="0.506"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_wf@example.com', 'employee_id': 'ADM_WF', 'mobile': '9998887771', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_wf'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_wf
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_wf (admin_wf@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_wf@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_wf@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_wf@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_wf
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145) is attempting to create a form with data: {'slug': 'workflow-source', 'status': 'published', 'title': 'Workflow Source', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 1342979d-726b-4069-bc3e-96ff1be478ba created successfully by user admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145) is attempting to create a form with data: {'slug': 'workflow-target', 'status': 'published', 'title': 'Workflow Target', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 054af288-e2ce-49a7-bfc9-cf4f8780f817 created successfully by user admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_wf@example.com', 'employee_id': 'ADM_WF', 'mobile': '9998887771', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_wf'}
INFO:app:#x1F512 Password set for user: admin_wf
INFO:app:✅ User registered successfully: admin_wf (admin_wf@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_wf@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: admin_wf@example.com
INFO:app:Login successful for employee user admin_wf@example.com
INFO:app:Issued JWT for user admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145), roles: ['admin']
INFO:app:Returning JSON response for user admin_wf
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145) is attempting to create a form with data: {'slug': 'workflow-source', 'status': 'published', 'title': 'Workflow Source', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form 1342979d-726b-4069-bc3e-96ff1be478ba created successfully by user admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145) is attempting to create a form with data: {'slug': 'workflow-target', 'status': 'published', 'title': 'Workflow Target', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form 054af288-e2ce-49a7-bfc9-cf4f8780f817 created successfully by user admin_wf (ID: e4df4424-44c2-4387-ba08-45ab6c3c9145)
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_workflow" name="test_workflow_execution" time="0.531"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_wf@example.com', 'employee_id': 'ADM_WF', 'mobile': '9998887771', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_wf'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_wf
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_wf (admin_wf@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_wf@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_wf@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_wf@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_wf
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac) is attempting to create a form with data: {'slug': 'source-form-exec', 'status': 'published', 'title': 'Source Form Exec', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 860de877-0198-4df3-bc44-5d0e11d58be2 created successfully by user admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac) is attempting to create a form with data: {'slug': 'target-form-exec', 'status': 'published', 'title': 'Target Form Exec', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 4c45035d-eb50-4a97-9ddc-ab9b6779bbc5 created successfully by user admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 860de877-0198-4df3-bc44-5d0e11d58be2
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1980aefd-8bd1-4aba-9636-29ffb0f6bca3': {'6fdfddbb-43b4-4176-8d83-92002872a8b3': 25, 'c5c3241a-063f-4cf7-9d0c-8a0cb8ebcbd9': 'Alice'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac, Form title: Source Form Exec
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1980aefd-8bd1-4aba-9636-29ffb0f6bca3, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question c5c3241a-063f-4cf7-9d0c-8a0cb8ebcbd9, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6fdfddbb-43b4-4176-8d83-92002872a8b3, label=Age
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=c219a4f0-8598-42db-a815-b3467bb7b2ec, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 860de877-0198-4df3-bc44-5d0e11d58be2
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'1980aefd-8bd1-4aba-9636-29ffb0f6bca3': {'6fdfddbb-43b4-4176-8d83-92002872a8b3': 15, 'c5c3241a-063f-4cf7-9d0c-8a0cb8ebcbd9': 'Bob'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac, Form title: Source Form Exec
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 1980aefd-8bd1-4aba-9636-29ffb0f6bca3, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question c5c3241a-063f-4cf7-9d0c-8a0cb8ebcbd9, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6fdfddbb-43b4-4176-8d83-92002872a8b3, label=Age
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=503378ba-61f4-463f-8b4b-88285ca010cd, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_wf@example.com', 'employee_id': 'ADM_WF', 'mobile': '9998887771', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_wf'}
INFO:app:#x1F512 Password set for user: admin_wf
INFO:app:✅ User registered successfully: admin_wf (admin_wf@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_wf@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: admin_wf@example.com
INFO:app:Login successful for employee user admin_wf@example.com
INFO:app:Issued JWT for user admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac), roles: ['admin']
INFO:app:Returning JSON response for user admin_wf
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac) is attempting to create a form with data: {'slug': 'source-form-exec', 'status': 'published', 'title': 'Source Form Exec', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form 860de877-0198-4df3-bc44-5d0e11d58be2 created successfully by user admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac) is attempting to create a form with data: {'slug': 'target-form-exec', 'status': 'published', 'title': 'Target Form Exec', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form 4c45035d-eb50-4a97-9ddc-ab9b6779bbc5 created successfully by user admin_wf (ID: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac)
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
INFO:app:Received submission for form_id: 860de877-0198-4df3-bc44-5d0e11d58be2
INFO:app:Parsed JSON submission: {'1980aefd-8bd1-4aba-9636-29ffb0f6bca3': {'6fdfddbb-43b4-4176-8d83-92002872a8b3': 25, 'c5c3241a-063f-4cf7-9d0c-8a0cb8ebcbd9': 'Alice'}}
INFO:app:Current user: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac, Form title: Source Form Exec
INFO:app:Processing section: 1980aefd-8bd1-4aba-9636-29ffb0f6bca3, repeatable=False
DEBUG:app:Checking question c5c3241a-063f-4cf7-9d0c-8a0cb8ebcbd9, label=Name
DEBUG:app:Checking question 6fdfddbb-43b4-4176-8d83-92002872a8b3, label=Age
INFO:app:Submission saved: response_id=c219a4f0-8598-42db-a815-b3467bb7b2ec, is_draft=False
INFO:app:Received submission for form_id: 860de877-0198-4df3-bc44-5d0e11d58be2
INFO:app:Parsed JSON submission: {'1980aefd-8bd1-4aba-9636-29ffb0f6bca3': {'6fdfddbb-43b4-4176-8d83-92002872a8b3': 15, 'c5c3241a-063f-4cf7-9d0c-8a0cb8ebcbd9': 'Bob'}}
INFO:app:Current user: 3f73cb3d-8cd6-41ee-972a-5cc69507c8ac, Form title: Source Form Exec
INFO:app:Processing section: 1980aefd-8bd1-4aba-9636-29ffb0f6bca3, repeatable=False
DEBUG:app:Checking question c5c3241a-063f-4cf7-9d0c-8a0cb8ebcbd9, label=Name
DEBUG:app:Checking question 6fdfddbb-43b4-4176-8d83-92002872a8b3, label=Age
INFO:app:Submission saved: response_id=503378ba-61f4-463f-8b4b-88285ca010cd, is_draft=False

</system-err></testcase></testsuite></testsuites>