<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="0" skipped="0" tests="78" time="51.322" timestamp="2026-01-12T12:00:00.404389+05:30" hostname="programmer-Default-string"><testcase classname="tests.test_advanced_features" name="test_conditional_required" time="1.089"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:__init__.py:36 Logging configured.
#x1B[32mINFO    #x1B[0m app:__init__.py:47 Using config: TestingConfig
#x1B[32mINFO    #x1B[0m app:__init__.py:62 MongoDB connected via MOCK
#x1B[32mINFO    #x1B[0m app:__init__.py:84 Middleware loaded: Compress, CORS
#x1B[32mINFO    #x1B[0m app:__init__.py:18 Blueprints registered: form, user, auth, ai, dashboards, workflows
#x1B[32mINFO    #x1B[0m app:__init__.py:88 Blueprints registered.
#x1B[32mINFO    #x1B[0m app:__init__.py:92 ✅ Flask app created successfully.
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_b0fd80@ex.com', 'employee_id': 'A_b0fd80', 'mobile': '2547555970', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_b0fd80'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_b0fd80
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_b0fd80 (admin_b0fd80@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_b0fd80@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_b0fd80@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_b0fd80@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_b0fd80 (ID: 18051c0c-adb1-49ee-9f48-53af39651ddd), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_b0fd80
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub_abdb72@ex.com', 'employee_id': 'S_abdb72', 'mobile': '1561096438', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_abdb72'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sub_abdb72
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sub_abdb72 (sub_abdb72@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub_abdb72@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub_abdb72@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub_abdb72@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sub_abdb72 (ID: 2c88706a-7bc1-4595-923e-e29d1c4ba733), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sub_abdb72
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_b0fd80 (ID: 18051c0c-adb1-49ee-9f48-53af39651ddd) is attempting to create a form with data: {'is_public': True, 'slug': 'cond-eb6c91', 'status': 'published', 'title': 'Cond Form', 'versions': [{'sections': [{'id': 'ba6acec7-02b6-4309-9a5b-bdb2124b9964', 'questions': [{'field_type': 'input', 'id': 'cac54651-0015-4af4-97b1-2dfed58dc60e', 'label': 'Q1'}, {'field_type': 'input', 'id': '86c0e62e-4e27-4f2a-af8a-a1cdd71b77da', 'label': 'Q2', 'required_condition': "cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 79111db3-ae4b-43af-b2d2-80065c84c105 created successfully by user admin_b0fd80 (ID: 18051c0c-adb1-49ee-9f48-53af39651ddd)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 79111db3-ae4b-43af-b2d2-80065c84c105
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ba6acec7-02b6-4309-9a5b-bdb2124b9964': {'cac54651-0015-4af4-97b1-2dfed58dc60e': 'no'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 2c88706a-7bc1-4595-923e-e29d1c4ba733, Form title: Cond Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ba6acec7-02b6-4309-9a5b-bdb2124b9964, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question cac54651-0015-4af4-97b1-2dfed58dc60e, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da, label=Q2
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes' -&gt; v_cac54651_0015_4af4_97b1_2dfed58dc60e == 'yes'
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=f72d2a8c-4c10-457d-b2d2-c5f6f305bfdb, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 79111db3-ae4b-43af-b2d2-80065c84c105
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ba6acec7-02b6-4309-9a5b-bdb2124b9964': {'cac54651-0015-4af4-97b1-2dfed58dc60e': 'yes'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 2c88706a-7bc1-4595-923e-e29d1c4ba733, Form title: Cond Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ba6acec7-02b6-4309-9a5b-bdb2124b9964, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question cac54651-0015-4af4-97b1-2dfed58dc60e, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da, label=Q2
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes' -&gt; v_cac54651_0015_4af4_97b1_2dfed58dc60e == 'yes'
#x1B[35mDEBUG   #x1B[0m app:validation.py:143 Field 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da is mandatory due to condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes'
#x1B[33mWARNING #x1B[0m app:validation.py:186 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': '86c0e62e-4e27-4f2a-af8a-a1cdd71b77da', 'error': 'Required field missing'}]
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 79111db3-ae4b-43af-b2d2-80065c84c105
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ba6acec7-02b6-4309-9a5b-bdb2124b9964': {'86c0e62e-4e27-4f2a-af8a-a1cdd71b77da': 'val', 'cac54651-0015-4af4-97b1-2dfed58dc60e': 'yes'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 2c88706a-7bc1-4595-923e-e29d1c4ba733, Form title: Cond Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ba6acec7-02b6-4309-9a5b-bdb2124b9964, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question cac54651-0015-4af4-97b1-2dfed58dc60e, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da, label=Q2
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes' -&gt; v_cac54651_0015_4af4_97b1_2dfed58dc60e == 'yes'
#x1B[35mDEBUG   #x1B[0m app:validation.py:143 Field 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da is mandatory due to condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes'
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=af00875a-1e20-4d40-b2af-d077f0424903, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Logging configured.
INFO:app:Using config: TestingConfig
INFO:app:MongoDB connected via MOCK
INFO:app:Middleware loaded: Compress, CORS
INFO:app:Blueprints registered: form, user, auth, ai, dashboards, workflows
INFO:app:Blueprints registered.
INFO:app:✅ Flask app created successfully.
INFO:app:Received registration data: {'email': 'admin_b0fd80@ex.com', 'employee_id': 'A_b0fd80', 'mobile': '2547555970', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_b0fd80'}
INFO:app:#x1F512 Password set for user: admin_b0fd80
INFO:app:✅ User registered successfully: admin_b0fd80 (admin_b0fd80@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_b0fd80@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_b0fd80@ex.com
INFO:app:Login successful for employee user admin_b0fd80@ex.com
INFO:app:Issued JWT for user admin_b0fd80 (ID: 18051c0c-adb1-49ee-9f48-53af39651ddd), roles: ['admin']
INFO:app:Returning JSON response for user admin_b0fd80
INFO:app:Received registration data: {'email': 'sub_abdb72@ex.com', 'employee_id': 'S_abdb72', 'mobile': '1561096438', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_abdb72'}
INFO:app:#x1F512 Password set for user: sub_abdb72
INFO:app:✅ User registered successfully: sub_abdb72 (sub_abdb72@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub_abdb72@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub_abdb72@ex.com
INFO:app:Login successful for employee user sub_abdb72@ex.com
INFO:app:Issued JWT for user sub_abdb72 (ID: 2c88706a-7bc1-4595-923e-e29d1c4ba733), roles: ['user']
INFO:app:Returning JSON response for user sub_abdb72
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_b0fd80 (ID: 18051c0c-adb1-49ee-9f48-53af39651ddd) is attempting to create a form with data: {'is_public': True, 'slug': 'cond-eb6c91', 'status': 'published', 'title': 'Cond Form', 'versions': [{'sections': [{'id': 'ba6acec7-02b6-4309-9a5b-bdb2124b9964', 'questions': [{'field_type': 'input', 'id': 'cac54651-0015-4af4-97b1-2dfed58dc60e', 'label': 'Q1'}, {'field_type': 'input', 'id': '86c0e62e-4e27-4f2a-af8a-a1cdd71b77da', 'label': 'Q2', 'required_condition': "cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 79111db3-ae4b-43af-b2d2-80065c84c105 created successfully by user admin_b0fd80 (ID: 18051c0c-adb1-49ee-9f48-53af39651ddd)
INFO:app:Received submission for form_id: 79111db3-ae4b-43af-b2d2-80065c84c105
INFO:app:Parsed JSON submission: {'ba6acec7-02b6-4309-9a5b-bdb2124b9964': {'cac54651-0015-4af4-97b1-2dfed58dc60e': 'no'}}
INFO:app:Current user: 2c88706a-7bc1-4595-923e-e29d1c4ba733, Form title: Cond Form
INFO:app:Processing section: ba6acec7-02b6-4309-9a5b-bdb2124b9964, repeatable=False
DEBUG:app:Checking question cac54651-0015-4af4-97b1-2dfed58dc60e, label=Q1
DEBUG:app:Checking question 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da, label=Q2
DEBUG:app:Sanitized condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes' -&gt; v_cac54651_0015_4af4_97b1_2dfed58dc60e == 'yes'
INFO:app:Submission saved: response_id=f72d2a8c-4c10-457d-b2d2-c5f6f305bfdb, is_draft=False
INFO:app:Received submission for form_id: 79111db3-ae4b-43af-b2d2-80065c84c105
INFO:app:Parsed JSON submission: {'ba6acec7-02b6-4309-9a5b-bdb2124b9964': {'cac54651-0015-4af4-97b1-2dfed58dc60e': 'yes'}}
INFO:app:Current user: 2c88706a-7bc1-4595-923e-e29d1c4ba733, Form title: Cond Form
INFO:app:Processing section: ba6acec7-02b6-4309-9a5b-bdb2124b9964, repeatable=False
DEBUG:app:Checking question cac54651-0015-4af4-97b1-2dfed58dc60e, label=Q1
DEBUG:app:Checking question 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da, label=Q2
DEBUG:app:Sanitized condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes' -&gt; v_cac54651_0015_4af4_97b1_2dfed58dc60e == 'yes'
DEBUG:app:Field 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da is mandatory due to condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes'
WARNING:app:86c0e62e-4e27-4f2a-af8a-a1cdd71b77da: Required field missing
WARNING:app:Validation failed with errors: [{'id': '86c0e62e-4e27-4f2a-af8a-a1cdd71b77da', 'error': 'Required field missing'}]
INFO:app:Received submission for form_id: 79111db3-ae4b-43af-b2d2-80065c84c105
INFO:app:Parsed JSON submission: {'ba6acec7-02b6-4309-9a5b-bdb2124b9964': {'86c0e62e-4e27-4f2a-af8a-a1cdd71b77da': 'val', 'cac54651-0015-4af4-97b1-2dfed58dc60e': 'yes'}}
INFO:app:Current user: 2c88706a-7bc1-4595-923e-e29d1c4ba733, Form title: Cond Form
INFO:app:Processing section: ba6acec7-02b6-4309-9a5b-bdb2124b9964, repeatable=False
DEBUG:app:Checking question cac54651-0015-4af4-97b1-2dfed58dc60e, label=Q1
DEBUG:app:Checking question 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da, label=Q2
DEBUG:app:Sanitized condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes' -&gt; v_cac54651_0015_4af4_97b1_2dfed58dc60e == 'yes'
DEBUG:app:Field 86c0e62e-4e27-4f2a-af8a-a1cdd71b77da is mandatory due to condition: cac54651-0015-4af4-97b1-2dfed58dc60e == 'yes'
INFO:app:Submission saved: response_id=af00875a-1e20-4d40-b2af-d077f0424903, is_draft=False

</system-err></testcase><testcase classname="tests.test_advanced_features" name="test_history_tracking" time="0.988"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_d70815@ex.com', 'employee_id': 'A_d70815', 'mobile': '2509668461', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_d70815'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_d70815
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_d70815 (admin_d70815@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_d70815@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_d70815@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_d70815@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_d70815 (ID: 67802fc3-1f87-4a47-bbe6-59b15e585ae9), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_d70815
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub_60ecfa@ex.com', 'employee_id': 'S_60ecfa', 'mobile': '4754209783', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_60ecfa'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sub_60ecfa
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sub_60ecfa (sub_60ecfa@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub_60ecfa@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub_60ecfa@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub_60ecfa@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sub_60ecfa (ID: 3e38c90e-8e3a-44c9-af7e-8d952490e951), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sub_60ecfa
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_d70815 (ID: 67802fc3-1f87-4a47-bbe6-59b15e585ae9) is attempting to create a form with data: {'is_public': True, 'slug': 'hist-58ac92', 'status': 'published', 'title': 'Hist Form', 'versions': [{'sections': [{'id': '0a0411df-e015-4add-98b6-ad1257f007d9', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 19d3c7a4-fc2d-4ad1-82cf-f1b178af58ef created successfully by user admin_d70815 (ID: 67802fc3-1f87-4a47-bbe6-59b15e585ae9)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 19d3c7a4-fc2d-4ad1-82cf-f1b178af58ef
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'foo': 'bar'}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 3e38c90e-8e3a-44c9-af7e-8d952490e951, Form title: Hist Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 0a0411df-e015-4add-98b6-ad1257f007d9, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=c4bbaa93-ac38-4dc7-94aa-46cd2858bb66, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:306 Updating submission form=19d3c7a4-fc2d-4ad1-82cf-f1b178af58ef resp=c4bbaa93-ac38-4dc7-94aa-46cd2858bb66
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 0a0411df-e015-4add-98b6-ad1257f007d9, repeatable=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_d70815@ex.com', 'employee_id': 'A_d70815', 'mobile': '2509668461', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_d70815'}
INFO:app:#x1F512 Password set for user: admin_d70815
INFO:app:✅ User registered successfully: admin_d70815 (admin_d70815@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_d70815@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_d70815@ex.com
INFO:app:Login successful for employee user admin_d70815@ex.com
INFO:app:Issued JWT for user admin_d70815 (ID: 67802fc3-1f87-4a47-bbe6-59b15e585ae9), roles: ['admin']
INFO:app:Returning JSON response for user admin_d70815
INFO:app:Received registration data: {'email': 'sub_60ecfa@ex.com', 'employee_id': 'S_60ecfa', 'mobile': '4754209783', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_60ecfa'}
INFO:app:#x1F512 Password set for user: sub_60ecfa
INFO:app:✅ User registered successfully: sub_60ecfa (sub_60ecfa@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub_60ecfa@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub_60ecfa@ex.com
INFO:app:Login successful for employee user sub_60ecfa@ex.com
INFO:app:Issued JWT for user sub_60ecfa (ID: 3e38c90e-8e3a-44c9-af7e-8d952490e951), roles: ['user']
INFO:app:Returning JSON response for user sub_60ecfa
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_d70815 (ID: 67802fc3-1f87-4a47-bbe6-59b15e585ae9) is attempting to create a form with data: {'is_public': True, 'slug': 'hist-58ac92', 'status': 'published', 'title': 'Hist Form', 'versions': [{'sections': [{'id': '0a0411df-e015-4add-98b6-ad1257f007d9', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 19d3c7a4-fc2d-4ad1-82cf-f1b178af58ef created successfully by user admin_d70815 (ID: 67802fc3-1f87-4a47-bbe6-59b15e585ae9)
INFO:app:Received submission for form_id: 19d3c7a4-fc2d-4ad1-82cf-f1b178af58ef
INFO:app:Parsed JSON submission: {'foo': 'bar'}
INFO:app:Current user: 3e38c90e-8e3a-44c9-af7e-8d952490e951, Form title: Hist Form
INFO:app:Processing section: 0a0411df-e015-4add-98b6-ad1257f007d9, repeatable=False
INFO:app:Submission saved: response_id=c4bbaa93-ac38-4dc7-94aa-46cd2858bb66, is_draft=False
INFO:app:Updating submission form=19d3c7a4-fc2d-4ad1-82cf-f1b178af58ef resp=c4bbaa93-ac38-4dc7-94aa-46cd2858bb66
INFO:app:Processing section: 0a0411df-e015-4add-98b6-ad1257f007d9, repeatable=False

</system-err></testcase><testcase classname="tests.test_advanced_features" name="test_webhooks" time="0.988"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_c4a5f4@ex.com', 'employee_id': 'A_c4a5f4', 'mobile': '8620007896', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_c4a5f4'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_c4a5f4
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_c4a5f4 (admin_c4a5f4@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_c4a5f4@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_c4a5f4@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_c4a5f4@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_c4a5f4 (ID: 767e6e74-3877-4a0b-a2d2-da72f3e54dd9), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_c4a5f4
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub_797c13@ex.com', 'employee_id': 'S_797c13', 'mobile': '3036959681', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_797c13'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sub_797c13
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sub_797c13 (sub_797c13@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub_797c13@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub_797c13@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub_797c13@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sub_797c13 (ID: 7bc55cb9-4230-4c54-9c57-281dcfc00a43), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sub_797c13
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_c4a5f4 (ID: 767e6e74-3877-4a0b-a2d2-da72f3e54dd9) is attempting to create a form with data: {'is_public': True, 'slug': 'hook-c53d73', 'status': 'published', 'title': 'Hook Form', 'versions': [{'sections': [{'id': '3250a478-8b33-4f2c-ad1f-3068f5a37e8d', 'questions': [], 'title': 'S1'}], 'version': '1.0'}], 'webhooks': [{'events': ['submitted'], 'secret': 'xyz', 'url': 'http://mock-hook.com'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 1315894d-c4b3-4c72-9d46-425925d04ab9 created successfully by user admin_c4a5f4 (ID: 767e6e74-3877-4a0b-a2d2-da72f3e54dd9)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 1315894d-c4b3-4c72-9d46-425925d04ab9
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 7bc55cb9-4230-4c54-9c57-281dcfc00a43, Form title: Hook Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 3250a478-8b33-4f2c-ad1f-3068f5a37e8d, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=75584f8a-9a82-40a2-b5d3-da645050590b, is_draft=False
#x1B[32mINFO    #x1B[0m app:webhooks.py:53 Webhook sent to http://mock-hook.com for event submitted. Status: &lt;MagicMock name='post().status_code' id='139571390399744'&gt;
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_c4a5f4@ex.com', 'employee_id': 'A_c4a5f4', 'mobile': '8620007896', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_c4a5f4'}
INFO:app:#x1F512 Password set for user: admin_c4a5f4
INFO:app:✅ User registered successfully: admin_c4a5f4 (admin_c4a5f4@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_c4a5f4@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_c4a5f4@ex.com
INFO:app:Login successful for employee user admin_c4a5f4@ex.com
INFO:app:Issued JWT for user admin_c4a5f4 (ID: 767e6e74-3877-4a0b-a2d2-da72f3e54dd9), roles: ['admin']
INFO:app:Returning JSON response for user admin_c4a5f4
INFO:app:Received registration data: {'email': 'sub_797c13@ex.com', 'employee_id': 'S_797c13', 'mobile': '3036959681', 'roles': ['user'], 'user_type': 'employee', 'username': 'sub_797c13'}
INFO:app:#x1F512 Password set for user: sub_797c13
INFO:app:✅ User registered successfully: sub_797c13 (sub_797c13@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub_797c13@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub_797c13@ex.com
INFO:app:Login successful for employee user sub_797c13@ex.com
INFO:app:Issued JWT for user sub_797c13 (ID: 7bc55cb9-4230-4c54-9c57-281dcfc00a43), roles: ['user']
INFO:app:Returning JSON response for user sub_797c13
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_c4a5f4 (ID: 767e6e74-3877-4a0b-a2d2-da72f3e54dd9) is attempting to create a form with data: {'is_public': True, 'slug': 'hook-c53d73', 'status': 'published', 'title': 'Hook Form', 'versions': [{'sections': [{'id': '3250a478-8b33-4f2c-ad1f-3068f5a37e8d', 'questions': [], 'title': 'S1'}], 'version': '1.0'}], 'webhooks': [{'events': ['submitted'], 'secret': 'xyz', 'url': 'http://mock-hook.com'}]}
INFO:app:Form 1315894d-c4b3-4c72-9d46-425925d04ab9 created successfully by user admin_c4a5f4 (ID: 767e6e74-3877-4a0b-a2d2-da72f3e54dd9)
INFO:app:Received submission for form_id: 1315894d-c4b3-4c72-9d46-425925d04ab9
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 7bc55cb9-4230-4c54-9c57-281dcfc00a43, Form title: Hook Form
INFO:app:Processing section: 3250a478-8b33-4f2c-ad1f-3068f5a37e8d, repeatable=False
INFO:app:Submission saved: response_id=75584f8a-9a82-40a2-b5d3-da645050590b, is_draft=False
INFO:app:Webhook sent to http://mock-hook.com for event submitted. Status: &lt;MagicMock name='post().status_code' id='139571390399744'&gt;

</system-err></testcase><testcase classname="tests.test_advanced_validation" name="test_global_custom_validation" time="0.496"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'adv_admin_7184ea@test.com', 'employee_id': 'EMP_1a558b', 'mobile': '7755649901', 'roles': ['admin'], 'user_type': 'employee', 'username': 'adv_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: adv_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: adv_admin (adv_admin_7184ea@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'adv_admin_7184ea@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: adv_admin_7184ea@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user adv_admin_7184ea@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user adv_admin (ID: 0596b89a-f75a-42a1-b7c0-2f113d25f499), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user adv_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User adv_admin (ID: 0596b89a-f75a-42a1-b7c0-2f113d25f499) is attempting to create a form with data: {'is_public': True, 'slug': 'cross-val-361ae9', 'status': 'published', 'title': 'Cross Validation Form', 'versions': [{'custom_validations': [{'error_message': 'Start must be before End', 'expression': 'v_0946219c_e43f_493e_872d_afc93ccfb9fd &lt; v_8e18f8be_400e_4c96_a246_cea4b5c27082'}], 'sections': [{'id': '331eebfd-9892-41d9-85ac-30013b64ecec', 'questions': [{'field_type': 'input', 'id': '0946219c-e43f-493e-872d-afc93ccfb9fd', 'is_required': True, 'label': 'Start'}, {'field_type': 'input', 'id': '8e18f8be-400e-4c96-a246-cea4b5c27082', 'is_required': True, 'label': 'End'}], 'title': 'Dates'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 012782bb-f8e2-43e9-a229-d64ff7237c7a created successfully by user adv_admin (ID: 0596b89a-f75a-42a1-b7c0-2f113d25f499)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 012782bb-f8e2-43e9-a229-d64ff7237c7a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'331eebfd-9892-41d9-85ac-30013b64ecec': {'0946219c-e43f-493e-872d-afc93ccfb9fd': '2023-01-01', '8e18f8be-400e-4c96-a246-cea4b5c27082': '2023-01-02'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 0596b89a-f75a-42a1-b7c0-2f113d25f499, Form title: Cross Validation Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 331eebfd-9892-41d9-85ac-30013b64ecec, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 0946219c-e43f-493e-872d-afc93ccfb9fd, label=Start
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 8e18f8be-400e-4c96-a246-cea4b5c27082, label=End
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=7af32164-7358-49b7-a750-b2cc4e945a00, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 012782bb-f8e2-43e9-a229-d64ff7237c7a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'331eebfd-9892-41d9-85ac-30013b64ecec': {'0946219c-e43f-493e-872d-afc93ccfb9fd': '2023-02-01', '8e18f8be-400e-4c96-a246-cea4b5c27082': '2023-01-01'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 0596b89a-f75a-42a1-b7c0-2f113d25f499, Form title: Cross Validation Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 331eebfd-9892-41d9-85ac-30013b64ecec, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 0946219c-e43f-493e-872d-afc93ccfb9fd, label=Start
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 8e18f8be-400e-4c96-a246-cea4b5c27082, label=End
#x1B[33mWARNING #x1B[0m app:validation.py:285 Global validation failed: v_0946219c_e43f_493e_872d_afc93ccfb9fd &lt; v_8e18f8be_400e_4c96_a246_cea4b5c27082
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'global': True, 'error': 'Start must be before End'}]
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'adv_admin_7184ea@test.com', 'employee_id': 'EMP_1a558b', 'mobile': '7755649901', 'roles': ['admin'], 'user_type': 'employee', 'username': 'adv_admin'}
INFO:app:#x1F512 Password set for user: adv_admin
INFO:app:✅ User registered successfully: adv_admin (adv_admin_7184ea@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'adv_admin_7184ea@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: adv_admin_7184ea@test.com
INFO:app:Login successful for employee user adv_admin_7184ea@test.com
INFO:app:Issued JWT for user adv_admin (ID: 0596b89a-f75a-42a1-b7c0-2f113d25f499), roles: ['admin']
INFO:app:Returning JSON response for user adv_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User adv_admin (ID: 0596b89a-f75a-42a1-b7c0-2f113d25f499) is attempting to create a form with data: {'is_public': True, 'slug': 'cross-val-361ae9', 'status': 'published', 'title': 'Cross Validation Form', 'versions': [{'custom_validations': [{'error_message': 'Start must be before End', 'expression': 'v_0946219c_e43f_493e_872d_afc93ccfb9fd &lt; v_8e18f8be_400e_4c96_a246_cea4b5c27082'}], 'sections': [{'id': '331eebfd-9892-41d9-85ac-30013b64ecec', 'questions': [{'field_type': 'input', 'id': '0946219c-e43f-493e-872d-afc93ccfb9fd', 'is_required': True, 'label': 'Start'}, {'field_type': 'input', 'id': '8e18f8be-400e-4c96-a246-cea4b5c27082', 'is_required': True, 'label': 'End'}], 'title': 'Dates'}], 'version': '1.0'}]}
INFO:app:Form 012782bb-f8e2-43e9-a229-d64ff7237c7a created successfully by user adv_admin (ID: 0596b89a-f75a-42a1-b7c0-2f113d25f499)
INFO:app:Received submission for form_id: 012782bb-f8e2-43e9-a229-d64ff7237c7a
INFO:app:Parsed JSON submission: {'331eebfd-9892-41d9-85ac-30013b64ecec': {'0946219c-e43f-493e-872d-afc93ccfb9fd': '2023-01-01', '8e18f8be-400e-4c96-a246-cea4b5c27082': '2023-01-02'}}
INFO:app:Current user: 0596b89a-f75a-42a1-b7c0-2f113d25f499, Form title: Cross Validation Form
INFO:app:Processing section: 331eebfd-9892-41d9-85ac-30013b64ecec, repeatable=False
DEBUG:app:Checking question 0946219c-e43f-493e-872d-afc93ccfb9fd, label=Start
DEBUG:app:Checking question 8e18f8be-400e-4c96-a246-cea4b5c27082, label=End
INFO:app:Submission saved: response_id=7af32164-7358-49b7-a750-b2cc4e945a00, is_draft=False
INFO:app:Received submission for form_id: 012782bb-f8e2-43e9-a229-d64ff7237c7a
INFO:app:Parsed JSON submission: {'331eebfd-9892-41d9-85ac-30013b64ecec': {'0946219c-e43f-493e-872d-afc93ccfb9fd': '2023-02-01', '8e18f8be-400e-4c96-a246-cea4b5c27082': '2023-01-01'}}
INFO:app:Current user: 0596b89a-f75a-42a1-b7c0-2f113d25f499, Form title: Cross Validation Form
INFO:app:Processing section: 331eebfd-9892-41d9-85ac-30013b64ecec, repeatable=False
DEBUG:app:Checking question 0946219c-e43f-493e-872d-afc93ccfb9fd, label=Start
DEBUG:app:Checking question 8e18f8be-400e-4c96-a246-cea4b5c27082, label=End
WARNING:app:Global validation failed: v_0946219c_e43f_493e_872d_afc93ccfb9fd &lt; v_8e18f8be_400e_4c96_a246_cea4b5c27082
WARNING:app:Validation failed with errors: [{'global': True, 'error': 'Start must be before End'}]

</system-err></testcase><testcase classname="tests.test_ai_analysis" name="test_ai_analysis" time="0.497"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'ai@example.com', 'mobile': '1112223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'ai_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: ai_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: ai_tester (ai@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'ai@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: ai@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user ai@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user ai_tester (ID: 8787622e-25c0-49f9-a590-ce51a93ec16b), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user ai_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User ai_tester (ID: 8787622e-25c0-49f9-a590-ce51a93ec16b) is attempting to create a form with data: {'id': '8853d29f-1abe-4286-8a1e-9e30a3e40d65', 'slug': 'ai-test-c11f91', 'status': 'published', 'title': 'AI Test Form', 'versions': [{'sections': [{'id': '6a96540a-1d3b-4239-b1a4-a643032f1214', 'questions': [{'field_type': 'textarea', 'id': '18c67dec-bae3-4df3-b776-b6dea9f0c8ac', 'label': 'Feedback'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 8853d29f-1abe-4286-8a1e-9e30a3e40d65 created successfully by user ai_tester (ID: 8787622e-25c0-49f9-a590-ce51a93ec16b)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 8853d29f-1abe-4286-8a1e-9e30a3e40d65
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'6a96540a-1d3b-4239-b1a4-a643032f1214': {'18c67dec-bae3-4df3-b776-b6dea9f0c8ac': 'This system is amazing! Contact me at test@example.com or 9998887776.'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 8787622e-25c0-49f9-a590-ce51a93ec16b, Form title: AI Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 6a96540a-1d3b-4239-b1a4-a643032f1214, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 18c67dec-bae3-4df3-b776-b6dea9f0c8ac, label=Feedback
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=5046a2a6-212d-4869-89a1-fac7d30e8346, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'ai@example.com', 'mobile': '1112223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'ai_tester'}
INFO:app:#x1F512 Password set for user: ai_tester
INFO:app:✅ User registered successfully: ai_tester (ai@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'ai@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: ai@example.com
INFO:app:Login successful for employee user ai@example.com
INFO:app:Issued JWT for user ai_tester (ID: 8787622e-25c0-49f9-a590-ce51a93ec16b), roles: ['admin']
INFO:app:Returning JSON response for user ai_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User ai_tester (ID: 8787622e-25c0-49f9-a590-ce51a93ec16b) is attempting to create a form with data: {'id': '8853d29f-1abe-4286-8a1e-9e30a3e40d65', 'slug': 'ai-test-c11f91', 'status': 'published', 'title': 'AI Test Form', 'versions': [{'sections': [{'id': '6a96540a-1d3b-4239-b1a4-a643032f1214', 'questions': [{'field_type': 'textarea', 'id': '18c67dec-bae3-4df3-b776-b6dea9f0c8ac', 'label': 'Feedback'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 8853d29f-1abe-4286-8a1e-9e30a3e40d65 created successfully by user ai_tester (ID: 8787622e-25c0-49f9-a590-ce51a93ec16b)
INFO:app:Received submission for form_id: 8853d29f-1abe-4286-8a1e-9e30a3e40d65
INFO:app:Parsed JSON submission: {'6a96540a-1d3b-4239-b1a4-a643032f1214': {'18c67dec-bae3-4df3-b776-b6dea9f0c8ac': 'This system is amazing! Contact me at test@example.com or 9998887776.'}}
INFO:app:Current user: 8787622e-25c0-49f9-a590-ce51a93ec16b, Form title: AI Test Form
INFO:app:Processing section: 6a96540a-1d3b-4239-b1a4-a643032f1214, repeatable=False
DEBUG:app:Checking question 18c67dec-bae3-4df3-b776-b6dea9f0c8ac, label=Feedback
INFO:app:Submission saved: response_id=5046a2a6-212d-4869-89a1-fac7d30e8346, is_draft=False

</system-err></testcase><testcase classname="tests.test_ai_anomalies" name="test_ai_anomaly_detection" time="0.513"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'anomaly@example.com', 'mobile': '9993334445', 'roles': ['admin'], 'user_type': 'employee', 'username': 'anomaly_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: anomaly_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: anomaly_tester (anomaly@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'anomaly@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: anomaly@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user anomaly@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user anomaly_tester (ID: acd7f596-ebe2-4480-ba2c-75a5cc895b08), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user anomaly_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User anomaly_tester (ID: acd7f596-ebe2-4480-ba2c-75a5cc895b08) is attempting to create a form with data: {'id': '9a7e3f94-3598-46ea-b0e4-884bcbcdb023', 'slug': 'anomaly-test-df68bb', 'status': 'published', 'title': 'Anomaly Test Form', 'versions': [{'sections': [{'id': 'ed2dc456-a5a8-49e8-ae32-08615c5806db', 'questions': [{'field_type': 'input', 'id': 'f21bd46d-5331-451f-91c3-fec31095c8ca', 'label': 'Score'}, {'field_type': 'textarea', 'id': '06257dce-6067-42ef-a9a7-2df458c6c4b9', 'label': 'Comment'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 9a7e3f94-3598-46ea-b0e4-884bcbcdb023 created successfully by user anomaly_tester (ID: acd7f596-ebe2-4480-ba2c-75a5cc895b08)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=a3d648db-ba83-44c7-9ff3-b861dc40ed92, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=2ef3f73c-499a-4f5f-afbe-8c1da686aebc, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=5bae269a-8560-46c1-b597-78da8571dddc, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=5f49a65f-de68-40e4-82d8-67e06b58943a, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=8b48a742-8fbd-4174-8307-d6e8e20bfb20, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Outlier data', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 500}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=6bbcf6d4-6ed1-407e-bbe8-64030268254d, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=3b14f5cc-db37-4cd9-b6e5-c049011e1a65, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'qwrtpsdfghjklzxcvbnm', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=faf84c5d-fbe8-479d-970a-e3f95cb549d8, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'anomaly@example.com', 'mobile': '9993334445', 'roles': ['admin'], 'user_type': 'employee', 'username': 'anomaly_tester'}
INFO:app:#x1F512 Password set for user: anomaly_tester
INFO:app:✅ User registered successfully: anomaly_tester (anomaly@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'anomaly@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: anomaly@example.com
INFO:app:Login successful for employee user anomaly@example.com
INFO:app:Issued JWT for user anomaly_tester (ID: acd7f596-ebe2-4480-ba2c-75a5cc895b08), roles: ['admin']
INFO:app:Returning JSON response for user anomaly_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User anomaly_tester (ID: acd7f596-ebe2-4480-ba2c-75a5cc895b08) is attempting to create a form with data: {'id': '9a7e3f94-3598-46ea-b0e4-884bcbcdb023', 'slug': 'anomaly-test-df68bb', 'status': 'published', 'title': 'Anomaly Test Form', 'versions': [{'sections': [{'id': 'ed2dc456-a5a8-49e8-ae32-08615c5806db', 'questions': [{'field_type': 'input', 'id': 'f21bd46d-5331-451f-91c3-fec31095c8ca', 'label': 'Score'}, {'field_type': 'textarea', 'id': '06257dce-6067-42ef-a9a7-2df458c6c4b9', 'label': 'Comment'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 9a7e3f94-3598-46ea-b0e4-884bcbcdb023 created successfully by user anomaly_tester (ID: acd7f596-ebe2-4480-ba2c-75a5cc895b08)
INFO:app:Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
INFO:app:Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
INFO:app:Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
INFO:app:Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
DEBUG:app:Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
DEBUG:app:Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
INFO:app:Submission saved: response_id=a3d648db-ba83-44c7-9ff3-b861dc40ed92, is_draft=False
INFO:app:Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
INFO:app:Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
INFO:app:Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
INFO:app:Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
DEBUG:app:Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
DEBUG:app:Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
INFO:app:Submission saved: response_id=2ef3f73c-499a-4f5f-afbe-8c1da686aebc, is_draft=False
INFO:app:Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
INFO:app:Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
INFO:app:Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
INFO:app:Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
DEBUG:app:Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
DEBUG:app:Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
INFO:app:Submission saved: response_id=5bae269a-8560-46c1-b597-78da8571dddc, is_draft=False
INFO:app:Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
INFO:app:Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
INFO:app:Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
INFO:app:Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
DEBUG:app:Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
DEBUG:app:Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
INFO:app:Submission saved: response_id=5f49a65f-de68-40e4-82d8-67e06b58943a, is_draft=False
INFO:app:Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
INFO:app:Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
INFO:app:Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
INFO:app:Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
DEBUG:app:Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
DEBUG:app:Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
INFO:app:Submission saved: response_id=8b48a742-8fbd-4174-8307-d6e8e20bfb20, is_draft=False
INFO:app:Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
INFO:app:Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Outlier data', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 500}}
INFO:app:Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
INFO:app:Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
DEBUG:app:Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
DEBUG:app:Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
INFO:app:Submission saved: response_id=6bbcf6d4-6ed1-407e-bbe8-64030268254d, is_draft=False
INFO:app:Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
INFO:app:Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'Everything is working fine.', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
INFO:app:Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
INFO:app:Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
DEBUG:app:Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
DEBUG:app:Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
INFO:app:Submission saved: response_id=3b14f5cc-db37-4cd9-b6e5-c049011e1a65, is_draft=False
INFO:app:Received submission for form_id: 9a7e3f94-3598-46ea-b0e4-884bcbcdb023
INFO:app:Parsed JSON submission: {'ed2dc456-a5a8-49e8-ae32-08615c5806db': {'06257dce-6067-42ef-a9a7-2df458c6c4b9': 'qwrtpsdfghjklzxcvbnm', 'f21bd46d-5331-451f-91c3-fec31095c8ca': 10}}
INFO:app:Current user: acd7f596-ebe2-4480-ba2c-75a5cc895b08, Form title: Anomaly Test Form
INFO:app:Processing section: ed2dc456-a5a8-49e8-ae32-08615c5806db, repeatable=False
DEBUG:app:Checking question f21bd46d-5331-451f-91c3-fec31095c8ca, label=Score
DEBUG:app:Checking question 06257dce-6067-42ef-a9a7-2df458c6c4b9, label=Comment
INFO:app:Submission saved: response_id=faf84c5d-fbe8-479d-970a-e3f95cb549d8, is_draft=False

</system-err></testcase><testcase classname="tests.test_ai_generation" name="test_ai_form_generation" time="0.491"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'gen@example.com', 'mobile': '9998881112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'gen_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: gen_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: gen_tester (gen@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'gen@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: gen@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user gen@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user gen_tester (ID: 6846dcb7-8cef-47a1-99b7-24637295e8f5), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user gen_tester
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'gen@example.com', 'mobile': '9998881112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'gen_tester'}
INFO:app:#x1F512 Password set for user: gen_tester
INFO:app:✅ User registered successfully: gen_tester (gen@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'gen@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: gen@example.com
INFO:app:Login successful for employee user gen@example.com
INFO:app:Issued JWT for user gen_tester (ID: 6846dcb7-8cef-47a1-99b7-24637295e8f5), roles: ['admin']
INFO:app:Returning JSON response for user gen_tester

</system-err></testcase><testcase classname="tests.test_ai_moderation" name="test_ai_moderation" time="0.497"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'mod@example.com', 'mobile': '9990001112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'mod_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: mod_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: mod_tester (mod@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'mod@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: mod@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user mod@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user mod_tester (ID: cd9a2552-851b-469e-8d33-70c18c4b4270), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user mod_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User mod_tester (ID: cd9a2552-851b-469e-8d33-70c18c4b4270) is attempting to create a form with data: {'id': '1692c9e2-fd45-49d4-b026-c80e2b62562c', 'slug': 'mod-test-10f8cf', 'status': 'published', 'title': 'Moderation Test Form', 'versions': [{'sections': [{'id': '178a4dd1-cfea-4a97-9a86-9c2c02b5da9f', 'questions': [{'field_type': 'textarea', 'id': 'b404424b-b6d0-4534-a150-31fdb86f243b', 'label': 'Text'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 1692c9e2-fd45-49d4-b026-c80e2b62562c created successfully by user mod_tester (ID: cd9a2552-851b-469e-8d33-70c18c4b4270)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 1692c9e2-fd45-49d4-b026-c80e2b62562c
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'178a4dd1-cfea-4a97-9a86-9c2c02b5da9f': {'b404424b-b6d0-4534-a150-31fdb86f243b': 'Patient has diabetes. SSN is 111-22-3333. This comment is offensive. &lt;script&gt;alert(1)&lt;/script&gt;'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: cd9a2552-851b-469e-8d33-70c18c4b4270, Form title: Moderation Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 178a4dd1-cfea-4a97-9a86-9c2c02b5da9f, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question b404424b-b6d0-4534-a150-31fdb86f243b, label=Text
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=9a0e6112-12ba-49d8-bc4e-50710c8e4582, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'mod@example.com', 'mobile': '9990001112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'mod_tester'}
INFO:app:#x1F512 Password set for user: mod_tester
INFO:app:✅ User registered successfully: mod_tester (mod@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'mod@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: mod@example.com
INFO:app:Login successful for employee user mod@example.com
INFO:app:Issued JWT for user mod_tester (ID: cd9a2552-851b-469e-8d33-70c18c4b4270), roles: ['admin']
INFO:app:Returning JSON response for user mod_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User mod_tester (ID: cd9a2552-851b-469e-8d33-70c18c4b4270) is attempting to create a form with data: {'id': '1692c9e2-fd45-49d4-b026-c80e2b62562c', 'slug': 'mod-test-10f8cf', 'status': 'published', 'title': 'Moderation Test Form', 'versions': [{'sections': [{'id': '178a4dd1-cfea-4a97-9a86-9c2c02b5da9f', 'questions': [{'field_type': 'textarea', 'id': 'b404424b-b6d0-4534-a150-31fdb86f243b', 'label': 'Text'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 1692c9e2-fd45-49d4-b026-c80e2b62562c created successfully by user mod_tester (ID: cd9a2552-851b-469e-8d33-70c18c4b4270)
INFO:app:Received submission for form_id: 1692c9e2-fd45-49d4-b026-c80e2b62562c
INFO:app:Parsed JSON submission: {'178a4dd1-cfea-4a97-9a86-9c2c02b5da9f': {'b404424b-b6d0-4534-a150-31fdb86f243b': 'Patient has diabetes. SSN is 111-22-3333. This comment is offensive. &lt;script&gt;alert(1)&lt;/script&gt;'}}
INFO:app:Current user: cd9a2552-851b-469e-8d33-70c18c4b4270, Form title: Moderation Test Form
INFO:app:Processing section: 178a4dd1-cfea-4a97-9a86-9c2c02b5da9f, repeatable=False
DEBUG:app:Checking question b404424b-b6d0-4534-a150-31fdb86f243b, label=Text
INFO:app:Submission saved: response_id=9a0e6112-12ba-49d8-bc4e-50710c8e4582, is_draft=False

</system-err></testcase><testcase classname="tests.test_ai_search" name="test_ai_search" time="0.529"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'search@example.com', 'mobile': '9992223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'search_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: search_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: search_tester (search@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'search@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: search@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user search@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user search_tester (ID: e4159729-9d24-4744-80c8-ed7637e6ea79), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user search_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User search_tester (ID: e4159729-9d24-4744-80c8-ed7637e6ea79) is attempting to create a form with data: {'id': '0a56e96a-2b2a-4352-8265-69720eab9377', 'slug': 'search-test-44d8ec', 'status': 'published', 'title': 'Search Test Form', 'versions': [{'sections': [{'id': '783a7522-67b4-43d1-879f-672aa076a9af', 'questions': [{'field_type': 'input', 'id': '804728bb-280f-4c97-94a8-14670d7ea59e', 'label': 'Name'}, {'field_type': 'input', 'id': '6b3070f5-25e8-4777-ba1c-668d3412c676', 'label': 'Age'}, {'field_type': 'input', 'id': 'a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1', 'label': 'Condition'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 0a56e96a-2b2a-4352-8265-69720eab9377 created successfully by user search_tester (ID: e4159729-9d24-4744-80c8-ed7637e6ea79)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 0a56e96a-2b2a-4352-8265-69720eab9377
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'783a7522-67b4-43d1-879f-672aa076a9af': {'6b3070f5-25e8-4777-ba1c-668d3412c676': 65, '804728bb-280f-4c97-94a8-14670d7ea59e': 'John', 'a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1': 'Diabetes'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: e4159729-9d24-4744-80c8-ed7637e6ea79, Form title: Search Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 783a7522-67b4-43d1-879f-672aa076a9af, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 804728bb-280f-4c97-94a8-14670d7ea59e, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6b3070f5-25e8-4777-ba1c-668d3412c676, label=Age
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1, label=Condition
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=6a6f7792-cbc4-481f-9e34-31d7811c7bbf, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 0a56e96a-2b2a-4352-8265-69720eab9377
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'783a7522-67b4-43d1-879f-672aa076a9af': {'6b3070f5-25e8-4777-ba1c-668d3412c676': 25, '804728bb-280f-4c97-94a8-14670d7ea59e': 'Jane', 'a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1': 'Healthy'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: e4159729-9d24-4744-80c8-ed7637e6ea79, Form title: Search Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 783a7522-67b4-43d1-879f-672aa076a9af, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 804728bb-280f-4c97-94a8-14670d7ea59e, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6b3070f5-25e8-4777-ba1c-668d3412c676, label=Age
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1, label=Condition
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=e67123e6-4dd6-4953-84f2-26593465eda2, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 0a56e96a-2b2a-4352-8265-69720eab9377
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'783a7522-67b4-43d1-879f-672aa076a9af': {'6b3070f5-25e8-4777-ba1c-668d3412c676': 70, '804728bb-280f-4c97-94a8-14670d7ea59e': 'Bob', 'a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1': 'Flu'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: e4159729-9d24-4744-80c8-ed7637e6ea79, Form title: Search Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 783a7522-67b4-43d1-879f-672aa076a9af, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 804728bb-280f-4c97-94a8-14670d7ea59e, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6b3070f5-25e8-4777-ba1c-668d3412c676, label=Age
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1, label=Condition
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=317aa5c0-8064-4955-9f67-efc70ae0aee6, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'search@example.com', 'mobile': '9992223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'search_tester'}
INFO:app:#x1F512 Password set for user: search_tester
INFO:app:✅ User registered successfully: search_tester (search@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'search@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: search@example.com
INFO:app:Login successful for employee user search@example.com
INFO:app:Issued JWT for user search_tester (ID: e4159729-9d24-4744-80c8-ed7637e6ea79), roles: ['admin']
INFO:app:Returning JSON response for user search_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User search_tester (ID: e4159729-9d24-4744-80c8-ed7637e6ea79) is attempting to create a form with data: {'id': '0a56e96a-2b2a-4352-8265-69720eab9377', 'slug': 'search-test-44d8ec', 'status': 'published', 'title': 'Search Test Form', 'versions': [{'sections': [{'id': '783a7522-67b4-43d1-879f-672aa076a9af', 'questions': [{'field_type': 'input', 'id': '804728bb-280f-4c97-94a8-14670d7ea59e', 'label': 'Name'}, {'field_type': 'input', 'id': '6b3070f5-25e8-4777-ba1c-668d3412c676', 'label': 'Age'}, {'field_type': 'input', 'id': 'a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1', 'label': 'Condition'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 0a56e96a-2b2a-4352-8265-69720eab9377 created successfully by user search_tester (ID: e4159729-9d24-4744-80c8-ed7637e6ea79)
INFO:app:Received submission for form_id: 0a56e96a-2b2a-4352-8265-69720eab9377
INFO:app:Parsed JSON submission: {'783a7522-67b4-43d1-879f-672aa076a9af': {'6b3070f5-25e8-4777-ba1c-668d3412c676': 65, '804728bb-280f-4c97-94a8-14670d7ea59e': 'John', 'a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1': 'Diabetes'}}
INFO:app:Current user: e4159729-9d24-4744-80c8-ed7637e6ea79, Form title: Search Test Form
INFO:app:Processing section: 783a7522-67b4-43d1-879f-672aa076a9af, repeatable=False
DEBUG:app:Checking question 804728bb-280f-4c97-94a8-14670d7ea59e, label=Name
DEBUG:app:Checking question 6b3070f5-25e8-4777-ba1c-668d3412c676, label=Age
DEBUG:app:Checking question a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1, label=Condition
INFO:app:Submission saved: response_id=6a6f7792-cbc4-481f-9e34-31d7811c7bbf, is_draft=False
INFO:app:Received submission for form_id: 0a56e96a-2b2a-4352-8265-69720eab9377
INFO:app:Parsed JSON submission: {'783a7522-67b4-43d1-879f-672aa076a9af': {'6b3070f5-25e8-4777-ba1c-668d3412c676': 25, '804728bb-280f-4c97-94a8-14670d7ea59e': 'Jane', 'a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1': 'Healthy'}}
INFO:app:Current user: e4159729-9d24-4744-80c8-ed7637e6ea79, Form title: Search Test Form
INFO:app:Processing section: 783a7522-67b4-43d1-879f-672aa076a9af, repeatable=False
DEBUG:app:Checking question 804728bb-280f-4c97-94a8-14670d7ea59e, label=Name
DEBUG:app:Checking question 6b3070f5-25e8-4777-ba1c-668d3412c676, label=Age
DEBUG:app:Checking question a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1, label=Condition
INFO:app:Submission saved: response_id=e67123e6-4dd6-4953-84f2-26593465eda2, is_draft=False
INFO:app:Received submission for form_id: 0a56e96a-2b2a-4352-8265-69720eab9377
INFO:app:Parsed JSON submission: {'783a7522-67b4-43d1-879f-672aa076a9af': {'6b3070f5-25e8-4777-ba1c-668d3412c676': 70, '804728bb-280f-4c97-94a8-14670d7ea59e': 'Bob', 'a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1': 'Flu'}}
INFO:app:Current user: e4159729-9d24-4744-80c8-ed7637e6ea79, Form title: Search Test Form
INFO:app:Processing section: 783a7522-67b4-43d1-879f-672aa076a9af, repeatable=False
DEBUG:app:Checking question 804728bb-280f-4c97-94a8-14670d7ea59e, label=Name
DEBUG:app:Checking question 6b3070f5-25e8-4777-ba1c-668d3412c676, label=Age
DEBUG:app:Checking question a02f9ca2-1d51-4e89-a05f-619f8c5ea9a1, label=Condition
INFO:app:Submission saved: response_id=317aa5c0-8064-4955-9f67-efc70ae0aee6, is_draft=False

</system-err></testcase><testcase classname="tests.test_ai_security_scan" name="test_ai_security_scan" time="0.502"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sec@example.com', 'mobile': '9998881112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sec_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sec_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sec_tester (sec@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sec@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sec@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sec@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sec_tester
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8) is attempting to create a form with data: {'id': '593b5a8c-eec1-45b0-baa7-afb586273e58', 'is_public': True, 'slug': 'sec-test-96cf6d', 'status': 'published', 'title': 'Insecure Form', 'versions': [{'sections': [{'id': '86215061-2a63-4413-926c-27b1eec1ed4a', 'questions': [{'field_type': 'input', 'id': '6c87f1a1-1feb-4428-a9be-7ff9462c45f6', 'label': 'Full Name'}, {'field_type': 'textarea', 'id': 'ab88b321-ea7c-481e-8b27-0ac325291238', 'label': 'Address'}, {'field_type': 'input', 'id': 'a34469a4-e8e5-4c45-afd4-1f68d45d47db', 'label': 'SSN'}, {'field_type': 'textarea', 'id': 'e77ed79f-fd04-4698-8139-963e9604ca91', 'label': 'Comments'}, {'field_type': 'textarea', 'id': '94071732-8264-4e15-8ad6-ccdb82b13779', 'label': 'Notes'}, {'field_type': 'textarea', 'id': '720bda25-4c2a-4a30-8477-8c925dd8f96f', 'label': 'Feedback'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 593b5a8c-eec1-45b0-baa7-afb586273e58 created successfully by user sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8) is attempting to create a form with data: {'id': '72de81a9-626a-4857-b4ac-d94c3de52aea', 'is_public': False, 'slug': 'secure-test-cc82ee', 'status': 'published', 'title': 'Secure Form', 'versions': [{'sections': [{'id': '86215061-2a63-4413-926c-27b1eec1ed4a', 'questions': [{'field_type': 'input', 'id': '3aea8602-3861-47fd-a085-c76f992ee796', 'is_required': True, 'label': 'Name'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 72de81a9-626a-4857-b4ac-d94c3de52aea created successfully by user sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'sec@example.com', 'mobile': '9998881112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sec_tester'}
INFO:app:#x1F512 Password set for user: sec_tester
INFO:app:✅ User registered successfully: sec_tester (sec@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sec@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: sec@example.com
INFO:app:Login successful for employee user sec@example.com
INFO:app:Issued JWT for user sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8), roles: ['admin']
INFO:app:Returning JSON response for user sec_tester
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8) is attempting to create a form with data: {'id': '593b5a8c-eec1-45b0-baa7-afb586273e58', 'is_public': True, 'slug': 'sec-test-96cf6d', 'status': 'published', 'title': 'Insecure Form', 'versions': [{'sections': [{'id': '86215061-2a63-4413-926c-27b1eec1ed4a', 'questions': [{'field_type': 'input', 'id': '6c87f1a1-1feb-4428-a9be-7ff9462c45f6', 'label': 'Full Name'}, {'field_type': 'textarea', 'id': 'ab88b321-ea7c-481e-8b27-0ac325291238', 'label': 'Address'}, {'field_type': 'input', 'id': 'a34469a4-e8e5-4c45-afd4-1f68d45d47db', 'label': 'SSN'}, {'field_type': 'textarea', 'id': 'e77ed79f-fd04-4698-8139-963e9604ca91', 'label': 'Comments'}, {'field_type': 'textarea', 'id': '94071732-8264-4e15-8ad6-ccdb82b13779', 'label': 'Notes'}, {'field_type': 'textarea', 'id': '720bda25-4c2a-4a30-8477-8c925dd8f96f', 'label': 'Feedback'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 593b5a8c-eec1-45b0-baa7-afb586273e58 created successfully by user sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8) is attempting to create a form with data: {'id': '72de81a9-626a-4857-b4ac-d94c3de52aea', 'is_public': False, 'slug': 'secure-test-cc82ee', 'status': 'published', 'title': 'Secure Form', 'versions': [{'sections': [{'id': '86215061-2a63-4413-926c-27b1eec1ed4a', 'questions': [{'field_type': 'input', 'id': '3aea8602-3861-47fd-a085-c76f992ee796', 'is_required': True, 'label': 'Name'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 72de81a9-626a-4857-b4ac-d94c3de52aea created successfully by user sec_tester (ID: 2bd555ba-a51b-49c6-884d-f956ac0a70e8)

</system-err></testcase><testcase classname="tests.test_ai_templates" name="test_ai_template_generation" time="0.492"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'tpl@example.com', 'mobile': '9997771112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'tpl_tester'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: tpl_tester
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: tpl_tester (tpl@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'tpl@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: tpl@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user tpl@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user tpl_tester (ID: 7ae7fd0b-34f0-4531-8c5d-b875e3c0cb34), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user tpl_tester
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'tpl@example.com', 'mobile': '9997771112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'tpl_tester'}
INFO:app:#x1F512 Password set for user: tpl_tester
INFO:app:✅ User registered successfully: tpl_tester (tpl@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'tpl@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: tpl@example.com
INFO:app:Login successful for employee user tpl@example.com
INFO:app:Issued JWT for user tpl_tester (ID: 7ae7fd0b-34f0-4531-8c5d-b875e3c0cb34), roles: ['admin']
INFO:app:Returning JSON response for user tpl_tester

</system-err></testcase><testcase classname="tests.test_analytics" name="test_analytics_endpoints" time="0.500"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'analytics_admin_030b2b@test.com', 'employee_id': 'EMP_9e6910', 'mobile': '7795257971', 'roles': ['admin'], 'user_type': 'employee', 'username': 'analytics_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: analytics_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: analytics_admin (analytics_admin_030b2b@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'analytics_admin_030b2b@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: analytics_admin_030b2b@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user analytics_admin_030b2b@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user analytics_admin (ID: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user analytics_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User analytics_admin (ID: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0) is attempting to create a form with data: {'is_public': True, 'slug': 'analytics-form-8de9f2', 'status': 'published', 'title': 'Analytics Form', 'versions': [{'sections': [{'id': '18e27cc5-bd54-463d-a972-ab11ec3e83cc', 'questions': [{'field_type': 'radio', 'id': 'a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac', 'is_required': True, 'label': 'Favorite Color', 'options': [{'option_label': 'Red', 'option_value': 'Red'}, {'option_label': 'Blue', 'option_value': 'Blue'}]}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 43f1af9a-4952-4914-b407-443259f1a1f5 created successfully by user analytics_admin (ID: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 43f1af9a-4952-4914-b407-443259f1a1f5
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'18e27cc5-bd54-463d-a972-ab11ec3e83cc': {'a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac': 'Red'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0, Form title: Analytics Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 18e27cc5-bd54-463d-a972-ab11ec3e83cc, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac, label=Favorite Color
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=6e0fc689-92e4-438e-8764-6a571ac3da30, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 43f1af9a-4952-4914-b407-443259f1a1f5
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'18e27cc5-bd54-463d-a972-ab11ec3e83cc': {'a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac': 'Red'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0, Form title: Analytics Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 18e27cc5-bd54-463d-a972-ab11ec3e83cc, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac, label=Favorite Color
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=cd3bd5bd-a966-4924-97ee-2bfeb424dc7c, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 43f1af9a-4952-4914-b407-443259f1a1f5
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'18e27cc5-bd54-463d-a972-ab11ec3e83cc': {'a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac': 'Blue'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0, Form title: Analytics Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 18e27cc5-bd54-463d-a972-ab11ec3e83cc, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac, label=Favorite Color
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=35bf068b-926f-49b4-ab86-e32a0edc530a, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'analytics_admin_030b2b@test.com', 'employee_id': 'EMP_9e6910', 'mobile': '7795257971', 'roles': ['admin'], 'user_type': 'employee', 'username': 'analytics_admin'}
INFO:app:#x1F512 Password set for user: analytics_admin
INFO:app:✅ User registered successfully: analytics_admin (analytics_admin_030b2b@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'analytics_admin_030b2b@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: analytics_admin_030b2b@test.com
INFO:app:Login successful for employee user analytics_admin_030b2b@test.com
INFO:app:Issued JWT for user analytics_admin (ID: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0), roles: ['admin']
INFO:app:Returning JSON response for user analytics_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User analytics_admin (ID: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0) is attempting to create a form with data: {'is_public': True, 'slug': 'analytics-form-8de9f2', 'status': 'published', 'title': 'Analytics Form', 'versions': [{'sections': [{'id': '18e27cc5-bd54-463d-a972-ab11ec3e83cc', 'questions': [{'field_type': 'radio', 'id': 'a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac', 'is_required': True, 'label': 'Favorite Color', 'options': [{'option_label': 'Red', 'option_value': 'Red'}, {'option_label': 'Blue', 'option_value': 'Blue'}]}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 43f1af9a-4952-4914-b407-443259f1a1f5 created successfully by user analytics_admin (ID: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0)
INFO:app:Received submission for form_id: 43f1af9a-4952-4914-b407-443259f1a1f5
INFO:app:Parsed JSON submission: {'18e27cc5-bd54-463d-a972-ab11ec3e83cc': {'a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac': 'Red'}}
INFO:app:Current user: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0, Form title: Analytics Form
INFO:app:Processing section: 18e27cc5-bd54-463d-a972-ab11ec3e83cc, repeatable=False
DEBUG:app:Checking question a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac, label=Favorite Color
INFO:app:Submission saved: response_id=6e0fc689-92e4-438e-8764-6a571ac3da30, is_draft=False
INFO:app:Received submission for form_id: 43f1af9a-4952-4914-b407-443259f1a1f5
INFO:app:Parsed JSON submission: {'18e27cc5-bd54-463d-a972-ab11ec3e83cc': {'a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac': 'Red'}}
INFO:app:Current user: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0, Form title: Analytics Form
INFO:app:Processing section: 18e27cc5-bd54-463d-a972-ab11ec3e83cc, repeatable=False
DEBUG:app:Checking question a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac, label=Favorite Color
INFO:app:Submission saved: response_id=cd3bd5bd-a966-4924-97ee-2bfeb424dc7c, is_draft=False
INFO:app:Received submission for form_id: 43f1af9a-4952-4914-b407-443259f1a1f5
INFO:app:Parsed JSON submission: {'18e27cc5-bd54-463d-a972-ab11ec3e83cc': {'a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac': 'Blue'}}
INFO:app:Current user: bd5c4d44-5dc3-4b63-912f-37f41fb69ba0, Form title: Analytics Form
INFO:app:Processing section: 18e27cc5-bd54-463d-a972-ab11ec3e83cc, repeatable=False
DEBUG:app:Checking question a3c49a82-0c7b-4cbf-8b1e-7a3ed4de50ac, label=Favorite Color
INFO:app:Submission saved: response_id=35bf068b-926f-49b4-ab86-e32a0edc530a, is_draft=False

</system-err></testcase><testcase classname="tests.test_api" name="test_handle_uhid_api" time="0.491"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: api_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: api_user (api@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user api_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56) is attempting to create a form with data: {'is_public': True, 'slug': 'uhid-form', 'title': 'UHID Form', 'versions': [{'sections': [{'id': '99999999-9999-9999-9999-999999999999', 'questions': [{'field_api_call': 'uhid', 'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'label': 'UHID'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form fe18ebdd-7980-4cf4-9b57-a0f51cc103c5 created successfully by user api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56)
#x1B[32mINFO    #x1B[0m app:api.py:25 User api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:51 User api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56) is calling eHospital UHID API
#x1B[33mWARNING #x1B[0m app:api.py:59 UHID found(ID: 123456)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
INFO:app:#x1F512 Password set for user: api_user
INFO:app:✅ User registered successfully: api_user (api@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: api@ex.com
INFO:app:Login successful for employee user api@ex.com
INFO:app:Issued JWT for user api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56), roles: ['admin']
INFO:app:Returning JSON response for user api_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56) is attempting to create a form with data: {'is_public': True, 'slug': 'uhid-form', 'title': 'UHID Form', 'versions': [{'sections': [{'id': '99999999-9999-9999-9999-999999999999', 'questions': [{'field_api_call': 'uhid', 'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'label': 'UHID'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form fe18ebdd-7980-4cf4-9b57-a0f51cc103c5 created successfully by user api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56)
INFO:app:User api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56) is attempting to retrieve UHID
INFO:app:User api_user (ID: fc08b18d-0b94-4707-a581-1069dec83a56) is calling eHospital UHID API
WARNING:app:UHID found(ID: 123456)

</system-err></testcase><testcase classname="tests.test_api" name="test_handle_otp_api" time="0.492"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: api_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: api_user (api@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user api_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444) is attempting to create a form with data: {'is_public': True, 'slug': 'otp-form', 'title': 'OTP Form', 'versions': [{'sections': [{'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'questions': [{'field_api_call': 'otp', 'field_type': 'input', 'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'label': 'Mobile'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form afffa120-4d00-456b-95ba-394985a08877 created successfully by user api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444)
#x1B[32mINFO    #x1B[0m app:api.py:25 User api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:62 User api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444) is calling OTP API
#x1B[32mINFO    #x1B[0m app:api.py:68 OTP sent successfully to 9876543210 for user api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
INFO:app:#x1F512 Password set for user: api_user
INFO:app:✅ User registered successfully: api_user (api@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: api@ex.com
INFO:app:Login successful for employee user api@ex.com
INFO:app:Issued JWT for user api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444), roles: ['admin']
INFO:app:Returning JSON response for user api_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444) is attempting to create a form with data: {'is_public': True, 'slug': 'otp-form', 'title': 'OTP Form', 'versions': [{'sections': [{'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'questions': [{'field_api_call': 'otp', 'field_type': 'input', 'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'label': 'Mobile'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form afffa120-4d00-456b-95ba-394985a08877 created successfully by user api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444)
INFO:app:User api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444) is attempting to retrieve UHID
INFO:app:User api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444) is calling OTP API
INFO:app:OTP sent successfully to 9876543210 for user api_user (ID: b8d9ec06-b574-4d39-83dc-48fac4679444)

</system-err></testcase><testcase classname="tests.test_api" name="test_handle_form_api" time="0.528"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: api_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: api_user (api@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user api@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user api_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is attempting to create a form with data: {'is_public': True, 'slug': 'target', 'status': 'published', 'title': 'Target', 'versions': [{'sections': [{'id': 'ffffffff-ffff-ffff-ffff-ffffffffffff', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form fded372c-c421-4368-855a-f2ef4d28b964 created successfully by user api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is attempting to create a form with data: {'is_public': True, 'slug': 'caller-form', 'title': 'Caller Form', 'versions': [{'sections': [{'id': 'dddddddd-dddd-dddd-dddd-dddddddddddd', 'questions': [{'field_api_call': 'form', 'field_type': 'input', 'id': 'eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee', 'label': 'Search'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 2884f986-cef2-4b95-97cc-a0332a9cb77b created successfully by user api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3)
#x1B[32mINFO    #x1B[0m app:api.py:25 User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:74 User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is calling Form API
#x1B[32mINFO    #x1B[0m app:responses.py:585 User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is searching responses for form ID: fded372c-c421-4368-855a-f2ef4d28b964
#x1B[35mDEBUG   #x1B[0m app:responses.py:590 Received filters: {'form_id': 'fded372c-c421-4368-855a-f2ef4d28b964', 'data': {}}
#x1B[32mINFO    #x1B[0m app:api.py:102 Form data retrieved successfully for user api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'api@ex.com', 'employee_id': 'API1', 'mobile': '5544332211', 'roles': ['admin'], 'user_type': 'employee', 'username': 'api_user'}
INFO:app:#x1F512 Password set for user: api_user
INFO:app:✅ User registered successfully: api_user (api@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'api@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: api@ex.com
INFO:app:Login successful for employee user api@ex.com
INFO:app:Issued JWT for user api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3), roles: ['admin']
INFO:app:Returning JSON response for user api_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is attempting to create a form with data: {'is_public': True, 'slug': 'target', 'status': 'published', 'title': 'Target', 'versions': [{'sections': [{'id': 'ffffffff-ffff-ffff-ffff-ffffffffffff', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form fded372c-c421-4368-855a-f2ef4d28b964 created successfully by user api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is attempting to create a form with data: {'is_public': True, 'slug': 'caller-form', 'title': 'Caller Form', 'versions': [{'sections': [{'id': 'dddddddd-dddd-dddd-dddd-dddddddddddd', 'questions': [{'field_api_call': 'form', 'field_type': 'input', 'id': 'eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee', 'label': 'Search'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 2884f986-cef2-4b95-97cc-a0332a9cb77b created successfully by user api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3)
INFO:app:User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is attempting to retrieve UHID
INFO:app:User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is calling Form API
INFO:app:User api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3) is searching responses for form ID: fded372c-c421-4368-855a-f2ef4d28b964
DEBUG:app:Received filters: {'form_id': 'fded372c-c421-4368-855a-f2ef4d28b964', 'data': {}}
INFO:app:Form data retrieved successfully for user api_user (ID: 722fe606-4adf-4b73-bc1c-fc13a8cac5d3)

</system-err></testcase><testcase classname="tests.test_approval_workflow" name="test_approval_workflow" time="0.990"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin@example.com', 'mobile': '1231231234', 'roles': ['admin'], 'user_type': 'employee', 'username': 'final_boss'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: final_boss
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: final_boss (admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user final_boss (ID: e55c4982-16bc-4c58-a8a6-b26591ebb089), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user final_boss
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'joe@example.com', 'mobile': '4324324321', 'roles': ['manager'], 'user_type': 'employee', 'username': 'manager_joe'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: manager_joe
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: manager_joe (joe@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'joe@example.com', 'password': 'ManagerPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: joe@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user joe@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user manager_joe (ID: af23f5f9-023d-4bf1-9511-3829a4153d0d), roles: ['manager']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user manager_joe
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User final_boss (ID: e55c4982-16bc-4c58-a8a6-b26591ebb089) is attempting to create a form with data: {'approval_enabled': True, 'approval_steps': [{'name': 'Manager Review', 'order': 1, 'required_role': 'manager'}, {'name': 'Admin Review', 'order': 2, 'required_role': 'admin'}], 'is_public': True, 'slug': 'app-test-7bdee2', 'status': 'published', 'title': 'Approval Form', 'versions': [{'sections': [{'id': 'e5cda7f5-5b62-467f-a9f5-6e4ae2f5fccd', 'questions': [{'field_type': 'input', 'id': '77aca65f-fa5b-4681-88d3-1a2795e0944e', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 5f31584c-285a-4e3e-8790-bc5d9c34d745 created successfully by user final_boss (ID: e55c4982-16bc-4c58-a8a6-b26591ebb089)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 5f31584c-285a-4e3e-8790-bc5d9c34d745
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'e5cda7f5-5b62-467f-a9f5-6e4ae2f5fccd': {'77aca65f-fa5b-4681-88d3-1a2795e0944e': 'Submit'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: af23f5f9-023d-4bf1-9511-3829a4153d0d, Form title: Approval Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: e5cda7f5-5b62-467f-a9f5-6e4ae2f5fccd, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 77aca65f-fa5b-4681-88d3-1a2795e0944e, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=bb558af4-9cde-426b-9e40-8cf4104e1496, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin@example.com', 'mobile': '1231231234', 'roles': ['admin'], 'user_type': 'employee', 'username': 'final_boss'}
INFO:app:#x1F512 Password set for user: final_boss
INFO:app:✅ User registered successfully: final_boss (admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin@example.com
INFO:app:Login successful for employee user admin@example.com
INFO:app:Issued JWT for user final_boss (ID: e55c4982-16bc-4c58-a8a6-b26591ebb089), roles: ['admin']
INFO:app:Returning JSON response for user final_boss
INFO:app:Received registration data: {'email': 'joe@example.com', 'mobile': '4324324321', 'roles': ['manager'], 'user_type': 'employee', 'username': 'manager_joe'}
INFO:app:#x1F512 Password set for user: manager_joe
INFO:app:✅ User registered successfully: manager_joe (joe@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'joe@example.com', 'password': 'ManagerPassword123'}
INFO:app:Employee login attempt with identifier: joe@example.com
INFO:app:Login successful for employee user joe@example.com
INFO:app:Issued JWT for user manager_joe (ID: af23f5f9-023d-4bf1-9511-3829a4153d0d), roles: ['manager']
INFO:app:Returning JSON response for user manager_joe
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User final_boss (ID: e55c4982-16bc-4c58-a8a6-b26591ebb089) is attempting to create a form with data: {'approval_enabled': True, 'approval_steps': [{'name': 'Manager Review', 'order': 1, 'required_role': 'manager'}, {'name': 'Admin Review', 'order': 2, 'required_role': 'admin'}], 'is_public': True, 'slug': 'app-test-7bdee2', 'status': 'published', 'title': 'Approval Form', 'versions': [{'sections': [{'id': 'e5cda7f5-5b62-467f-a9f5-6e4ae2f5fccd', 'questions': [{'field_type': 'input', 'id': '77aca65f-fa5b-4681-88d3-1a2795e0944e', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 5f31584c-285a-4e3e-8790-bc5d9c34d745 created successfully by user final_boss (ID: e55c4982-16bc-4c58-a8a6-b26591ebb089)
INFO:app:Received submission for form_id: 5f31584c-285a-4e3e-8790-bc5d9c34d745
INFO:app:Parsed JSON submission: {'e5cda7f5-5b62-467f-a9f5-6e4ae2f5fccd': {'77aca65f-fa5b-4681-88d3-1a2795e0944e': 'Submit'}}
INFO:app:Current user: af23f5f9-023d-4bf1-9511-3829a4153d0d, Form title: Approval Form
INFO:app:Processing section: e5cda7f5-5b62-467f-a9f5-6e4ae2f5fccd, repeatable=False
DEBUG:app:Checking question 77aca65f-fa5b-4681-88d3-1a2795e0944e, label=Q1
INFO:app:Submission saved: response_id=bb558af4-9cde-426b-9e40-8cf4104e1496, is_draft=False

</system-err></testcase><testcase classname="tests.test_auth" name="test_register_success" time="0.326"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin@example.com', 'employee_id': 'EMP001', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'testadmin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: testadmin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: testadmin (admin@example.com)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin@example.com', 'employee_id': 'EMP001', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'testadmin'}
INFO:app:#x1F512 Password set for user: testadmin
INFO:app:✅ User registered successfully: testadmin (admin@example.com)

</system-err></testcase><testcase classname="tests.test_auth" name="test_register_duplicate_email" time="0.487"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user@example.com', 'employee_id': 'EMP002', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'user1'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user1
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user1 (user@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user@example.com', 'employee_id': 'EMP002', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'user1'}
#x1B[33mWARNING #x1B[0m app:auth_route.py:37 ⚠️  Email already registered: user@example.com
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'user@example.com', 'employee_id': 'EMP002', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'user1'}
INFO:app:#x1F512 Password set for user: user1
INFO:app:✅ User registered successfully: user1 (user@example.com)
INFO:app:Received registration data: {'email': 'user@example.com', 'employee_id': 'EMP002', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'user1'}
WARNING:app:⚠️  Email already registered: user@example.com

</system-err></testcase><testcase classname="tests.test_auth" name="test_login_success" time="0.488"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'login@example.com', 'employee_id': 'EMP003', 'mobile': '2233445566', 'roles': ['user'], 'user_type': 'employee', 'username': 'loginuser'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: loginuser
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: loginuser (login@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'login@example.com', 'password': 'SecretPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: login@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user login@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user loginuser (ID: 0c4f9c3a-10ae-4b64-befc-e4231bf273df), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user loginuser
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'login@example.com', 'employee_id': 'EMP003', 'mobile': '2233445566', 'roles': ['user'], 'user_type': 'employee', 'username': 'loginuser'}
INFO:app:#x1F512 Password set for user: loginuser
INFO:app:✅ User registered successfully: loginuser (login@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'login@example.com', 'password': 'SecretPassword123'}
INFO:app:Employee login attempt with identifier: login@example.com
INFO:app:Login successful for employee user login@example.com
INFO:app:Issued JWT for user loginuser (ID: 0c4f9c3a-10ae-4b64-befc-e4231bf273df), roles: ['user']
INFO:app:Returning JSON response for user loginuser

</system-err></testcase><testcase classname="tests.test_auth" name="test_login_invalid_credentials" time="0.001"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'nonexistent@example.com', 'password': 'wrongpassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: nonexistent@example.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:88 Login failed: No user found for identifier nonexistent@example.com
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'nonexistent@example.com', 'password': 'wrongpassword'}
INFO:app:Employee login attempt with identifier: nonexistent@example.com
WARNING:app:Login failed: No user found for identifier nonexistent@example.com

</system-err></testcase><testcase classname="tests.test_auth" name="test_generate_otp_success" time="0.327"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'otp@example.com', 'mobile': '1234567890', 'roles': ['user'], 'user_type': 'employee', 'username': 'otp_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: otp_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: otp_user (otp@example.com)
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:201 [DEBUG] OTP for 1234567890: 381458
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'otp@example.com', 'mobile': '1234567890', 'roles': ['user'], 'user_type': 'employee', 'username': 'otp_user'}
INFO:app:#x1F512 Password set for user: otp_user
INFO:app:✅ User registered successfully: otp_user (otp@example.com)
DEBUG:app:[DEBUG] OTP for 1234567890: 381458

</system-err></testcase><testcase classname="tests.test_auth" name="test_logout" time="0.489"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'logout@example.com', 'employee_id': 'EMP004', 'mobile': '4455667788', 'roles': ['user'], 'user_type': 'employee', 'username': 'logoutuser'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: logoutuser
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: logoutuser (logout@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'logout@example.com', 'password': 'Password123!'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: logout@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user logout@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user logoutuser (ID: 53d37815-5322-4ccc-b08d-2151502636ae), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user logoutuser
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'logout@example.com', 'employee_id': 'EMP004', 'mobile': '4455667788', 'roles': ['user'], 'user_type': 'employee', 'username': 'logoutuser'}
INFO:app:#x1F512 Password set for user: logoutuser
INFO:app:✅ User registered successfully: logoutuser (logout@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'logout@example.com', 'password': 'Password123!'}
INFO:app:Employee login attempt with identifier: logout@example.com
INFO:app:Login successful for employee user logout@example.com
INFO:app:Issued JWT for user logoutuser (ID: 53d37815-5322-4ccc-b08d-2151502636ae), roles: ['user']
INFO:app:Returning JSON response for user logoutuser

</system-err></testcase><testcase classname="tests.test_bulk_features" name="test_bulk_response_export" time="0.504"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'bulk_admin@example.com', 'mobile': '9998887770', 'roles': ['admin'], 'user_type': 'employee', 'username': 'bulk_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: bulk_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: bulk_admin (bulk_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'bulk_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: bulk_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user bulk_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user bulk_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485) is attempting to create a form with data: {'id': '3c4b7b73-7bfd-4cc5-928f-c4a4c4dc11f0', 'slug': 'slug-3c4b7b73', 'status': 'published', 'title': 'Form One', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 3c4b7b73-7bfd-4cc5-928f-c4a4c4dc11f0 created successfully by user bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 3c4b7b73-7bfd-4cc5-928f-c4a4c4dc11f0
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'section_id_placeholder': {'question_id_placeholder': 'answer'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: c4639c2b-e9f0-495f-b51e-e8bc1dec2485, Form title: Form One
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ec33e352-b651-4c4a-ba04-30337541a11b, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 4fd4b8f5-8672-49ad-a7e7-77bbcc363f62, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=3407bfaf-c3f3-4471-94b3-29c967b6da40, is_draft=False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485) is attempting to create a form with data: {'id': '3d57d53d-cdf3-498f-b7ee-45222c1da1c3', 'slug': 'slug-3d57d53d', 'status': 'published', 'title': 'Form Two', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 3d57d53d-cdf3-498f-b7ee-45222c1da1c3 created successfully by user bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 3d57d53d-cdf3-498f-b7ee-45222c1da1c3
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'section_id_placeholder': {'question_id_placeholder': 'answer'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: c4639c2b-e9f0-495f-b51e-e8bc1dec2485, Form title: Form Two
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ff7f8d88-9e93-43f7-8834-db0c254fde25, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 82bba41f-02b7-4360-80dc-4e6e69979617, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=d9d0520f-4cfc-4cd2-b2b3-4374f4928f8b, is_draft=False
--------------------------------- Captured Out ---------------------------------
ZIP files: ['Form One_3c4b7b73.csv', 'Form Two_3d57d53d.csv']

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'bulk_admin@example.com', 'mobile': '9998887770', 'roles': ['admin'], 'user_type': 'employee', 'username': 'bulk_admin'}
INFO:app:#x1F512 Password set for user: bulk_admin
INFO:app:✅ User registered successfully: bulk_admin (bulk_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'bulk_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: bulk_admin@example.com
INFO:app:Login successful for employee user bulk_admin@example.com
INFO:app:Issued JWT for user bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485), roles: ['admin']
INFO:app:Returning JSON response for user bulk_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485) is attempting to create a form with data: {'id': '3c4b7b73-7bfd-4cc5-928f-c4a4c4dc11f0', 'slug': 'slug-3c4b7b73', 'status': 'published', 'title': 'Form One', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 3c4b7b73-7bfd-4cc5-928f-c4a4c4dc11f0 created successfully by user bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485)
INFO:app:Received submission for form_id: 3c4b7b73-7bfd-4cc5-928f-c4a4c4dc11f0
INFO:app:Parsed JSON submission: {'section_id_placeholder': {'question_id_placeholder': 'answer'}}
INFO:app:Current user: c4639c2b-e9f0-495f-b51e-e8bc1dec2485, Form title: Form One
INFO:app:Processing section: ec33e352-b651-4c4a-ba04-30337541a11b, repeatable=False
DEBUG:app:Checking question 4fd4b8f5-8672-49ad-a7e7-77bbcc363f62, label=Q1
INFO:app:Submission saved: response_id=3407bfaf-c3f3-4471-94b3-29c967b6da40, is_draft=False
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485) is attempting to create a form with data: {'id': '3d57d53d-cdf3-498f-b7ee-45222c1da1c3', 'slug': 'slug-3d57d53d', 'status': 'published', 'title': 'Form Two', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 3d57d53d-cdf3-498f-b7ee-45222c1da1c3 created successfully by user bulk_admin (ID: c4639c2b-e9f0-495f-b51e-e8bc1dec2485)
INFO:app:Received submission for form_id: 3d57d53d-cdf3-498f-b7ee-45222c1da1c3
INFO:app:Parsed JSON submission: {'section_id_placeholder': {'question_id_placeholder': 'answer'}}
INFO:app:Current user: c4639c2b-e9f0-495f-b51e-e8bc1dec2485, Form title: Form Two
INFO:app:Processing section: ff7f8d88-9e93-43f7-8834-db0c254fde25, repeatable=False
DEBUG:app:Checking question 82bba41f-02b7-4360-80dc-4e6e69979617, label=Q1
INFO:app:Submission saved: response_id=d9d0520f-4cfc-4cd2-b2b3-4374f4928f8b, is_draft=False

</system-err></testcase><testcase classname="tests.test_bulk_features" name="test_bulk_option_import" time="0.502"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'bulk_admin@example.com', 'mobile': '9998887770', 'roles': ['admin'], 'user_type': 'employee', 'username': 'bulk_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: bulk_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: bulk_admin (bulk_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'bulk_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: bulk_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user bulk_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user bulk_admin (ID: 2ac3344c-7d70-41dc-bfd3-4a0ca0f3ba05), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user bulk_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User bulk_admin (ID: 2ac3344c-7d70-41dc-bfd3-4a0ca0f3ba05) is attempting to create a form with data: {'id': '7603167b-6139-4697-9b57-aac94030628d', 'slug': 'opt-test-163376', 'title': 'Option Import Test', 'versions': [{'sections': [{'id': '4b7aa779-4219-468d-9735-986f61752816', 'questions': [{'field_type': 'radio', 'id': '40d3e224-49a3-4250-8ef9-27b4c141af40', 'label': 'Select Category', 'options': []}], 'title': 'Section'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 7603167b-6139-4697-9b57-aac94030628d created successfully by user bulk_admin (ID: 2ac3344c-7d70-41dc-bfd3-4a0ca0f3ba05)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'bulk_admin@example.com', 'mobile': '9998887770', 'roles': ['admin'], 'user_type': 'employee', 'username': 'bulk_admin'}
INFO:app:#x1F512 Password set for user: bulk_admin
INFO:app:✅ User registered successfully: bulk_admin (bulk_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'bulk_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: bulk_admin@example.com
INFO:app:Login successful for employee user bulk_admin@example.com
INFO:app:Issued JWT for user bulk_admin (ID: 2ac3344c-7d70-41dc-bfd3-4a0ca0f3ba05), roles: ['admin']
INFO:app:Returning JSON response for user bulk_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User bulk_admin (ID: 2ac3344c-7d70-41dc-bfd3-4a0ca0f3ba05) is attempting to create a form with data: {'id': '7603167b-6139-4697-9b57-aac94030628d', 'slug': 'opt-test-163376', 'title': 'Option Import Test', 'versions': [{'sections': [{'id': '4b7aa779-4219-468d-9735-986f61752816', 'questions': [{'field_type': 'radio', 'id': '40d3e224-49a3-4250-8ef9-27b4c141af40', 'label': 'Select Category', 'options': []}], 'title': 'Section'}], 'version': '1.0'}]}
INFO:app:Form 7603167b-6139-4697-9b57-aac94030628d created successfully by user bulk_admin (ID: 2ac3344c-7d70-41dc-bfd3-4a0ca0f3ba05)

</system-err></testcase><testcase classname="tests.test_cloning" name="test_cloning_and_templates" time="0.497"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'clone_admin_d46ac5@test.com', 'employee_id': 'EMP_139c5f', 'mobile': '7705158199', 'roles': ['admin'], 'user_type': 'employee', 'username': 'clone_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: clone_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: clone_admin (clone_admin_d46ac5@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'clone_admin_d46ac5@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: clone_admin_d46ac5@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user clone_admin_d46ac5@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user clone_admin (ID: 20c2558b-ab4e-4417-8397-69dfc98b95ce), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user clone_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User clone_admin (ID: 20c2558b-ab4e-4417-8397-69dfc98b95ce) is attempting to create a form with data: {'is_public': True, 'is_template': True, 'slug': 'orig-ddae1f', 'status': 'published', 'title': 'Original Form', 'versions': [{'sections': [{'id': 'c8df1332-20ca-4065-b106-db53be8b7af2', 'questions': [], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 10c232bc-45f8-4951-a646-5a2d71cfc7db created successfully by user clone_admin (ID: 20c2558b-ab4e-4417-8397-69dfc98b95ce)
#x1B[32mINFO    #x1B[0m app:form.py:256 Form 10c232bc-45f8-4951-a646-5a2d71cfc7db cloned to 0c1167c8-5864-40d5-9716-205cfe51c2de by clone_admin
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'clone_admin_d46ac5@test.com', 'employee_id': 'EMP_139c5f', 'mobile': '7705158199', 'roles': ['admin'], 'user_type': 'employee', 'username': 'clone_admin'}
INFO:app:#x1F512 Password set for user: clone_admin
INFO:app:✅ User registered successfully: clone_admin (clone_admin_d46ac5@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'clone_admin_d46ac5@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: clone_admin_d46ac5@test.com
INFO:app:Login successful for employee user clone_admin_d46ac5@test.com
INFO:app:Issued JWT for user clone_admin (ID: 20c2558b-ab4e-4417-8397-69dfc98b95ce), roles: ['admin']
INFO:app:Returning JSON response for user clone_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User clone_admin (ID: 20c2558b-ab4e-4417-8397-69dfc98b95ce) is attempting to create a form with data: {'is_public': True, 'is_template': True, 'slug': 'orig-ddae1f', 'status': 'published', 'title': 'Original Form', 'versions': [{'sections': [{'id': 'c8df1332-20ca-4065-b106-db53be8b7af2', 'questions': [], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form 10c232bc-45f8-4951-a646-5a2d71cfc7db created successfully by user clone_admin (ID: 20c2558b-ab4e-4417-8397-69dfc98b95ce)
INFO:app:Form 10c232bc-45f8-4951-a646-5a2d71cfc7db cloned to 0c1167c8-5864-40d5-9716-205cfe51c2de by clone_admin

</system-err></testcase><testcase classname="tests.test_comments" name="test_response_comments" time="0.523"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'comm_admin_42c704@test.com', 'employee_id': 'EMP_79d991', 'mobile': '7748866061', 'roles': ['admin'], 'user_type': 'employee', 'username': 'comm_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: comm_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: comm_admin (comm_admin_42c704@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'comm_admin_42c704@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: comm_admin_42c704@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user comm_admin_42c704@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user comm_admin (ID: c4d5d0c1-8c3c-4e9f-a367-3032ab7777c0), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user comm_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User comm_admin (ID: c4d5d0c1-8c3c-4e9f-a367-3032ab7777c0) is attempting to create a form with data: {'is_public': True, 'slug': 'comm-form-40763d', 'status': 'published', 'title': 'Comment Form', 'versions': [{'sections': [], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 7882ae19-a367-4688-b6c4-03c45a40cc90 created successfully by user comm_admin (ID: c4d5d0c1-8c3c-4e9f-a367-3032ab7777c0)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 7882ae19-a367-4688-b6c4-03c45a40cc90
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: c4d5d0c1-8c3c-4e9f-a367-3032ab7777c0, Form title: Comment Form
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=8b98ff97-2b3e-4615-b497-3f49c52b64c6, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'comm_admin_42c704@test.com', 'employee_id': 'EMP_79d991', 'mobile': '7748866061', 'roles': ['admin'], 'user_type': 'employee', 'username': 'comm_admin'}
INFO:app:#x1F512 Password set for user: comm_admin
INFO:app:✅ User registered successfully: comm_admin (comm_admin_42c704@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'comm_admin_42c704@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: comm_admin_42c704@test.com
INFO:app:Login successful for employee user comm_admin_42c704@test.com
INFO:app:Issued JWT for user comm_admin (ID: c4d5d0c1-8c3c-4e9f-a367-3032ab7777c0), roles: ['admin']
INFO:app:Returning JSON response for user comm_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User comm_admin (ID: c4d5d0c1-8c3c-4e9f-a367-3032ab7777c0) is attempting to create a form with data: {'is_public': True, 'slug': 'comm-form-40763d', 'status': 'published', 'title': 'Comment Form', 'versions': [{'sections': [], 'version': '1.0'}]}
INFO:app:Form 7882ae19-a367-4688-b6c4-03c45a40cc90 created successfully by user comm_admin (ID: c4d5d0c1-8c3c-4e9f-a367-3032ab7777c0)
INFO:app:Received submission for form_id: 7882ae19-a367-4688-b6c4-03c45a40cc90
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: c4d5d0c1-8c3c-4e9f-a367-3032ab7777c0, Form title: Comment Form
INFO:app:Submission saved: response_id=8b98ff97-2b3e-4615-b497-3f49c52b64c6, is_draft=False

</system-err></testcase><testcase classname="tests.test_conditional_validation" name="test_conditional_required_logic" time="0.999"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_cond@ex.com', 'employee_id': 'ACOND1', 'mobile': '9988770011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_cond'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_cond (admin_cond@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_cond@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_cond (ID: ecf060fe-71bd-4666-90f8-6d6880edae9b), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_cond@ex.com', 'employee_id': 'UCOND1', 'mobile': '8877660022', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_cond'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_cond (user_cond@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_cond@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_cond (ID: c3a266fb-4faf-4229-a3e7-e12173a47e16), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_cond
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_cond (ID: ecf060fe-71bd-4666-90f8-6d6880edae9b) is attempting to create a form with data: {'is_public': True, 'slug': 'cond-form', 'status': 'published', 'title': 'Conditional Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'radio', 'id': '22222222-2222-2222-2222-222222222222', 'label': 'Do you need extra info?', 'options': [{'option_label': 'Yes', 'option_value': 'yes'}, {'option_label': 'No', 'option_value': 'no'}]}, {'field_type': 'input', 'id': '33333333-3333-3333-3333-333333333333', 'is_required': False, 'label': 'Please specify', 'required_condition': "22222222-2222-2222-2222-222222222222 == 'yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form d9184b72-41a0-487b-bb4c-7d101af88110 created successfully by user admin_cond (ID: ecf060fe-71bd-4666-90f8-6d6880edae9b)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: d9184b72-41a0-487b-bb4c-7d101af88110
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'no', '33333333-3333-3333-3333-333333333333': ''}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: c3a266fb-4faf-4229-a3e7-e12173a47e16, Form title: Conditional Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=915c638e-b323-464d-8522-5d5b66c0664e, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: d9184b72-41a0-487b-bb4c-7d101af88110
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'yes', '33333333-3333-3333-3333-333333333333': ''}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: c3a266fb-4faf-4229-a3e7-e12173a47e16, Form title: Conditional Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
#x1B[35mDEBUG   #x1B[0m app:validation.py:143 Field 33333333-3333-3333-3333-333333333333 is mandatory due to condition: 22222222-2222-2222-2222-222222222222 == 'yes'
#x1B[33mWARNING #x1B[0m app:validation.py:186 33333333-3333-3333-3333-333333333333: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': '33333333-3333-3333-3333-333333333333', 'error': 'Required field missing'}]
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: d9184b72-41a0-487b-bb4c-7d101af88110
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'yes', '33333333-3333-3333-3333-333333333333': 'Some info'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: c3a266fb-4faf-4229-a3e7-e12173a47e16, Form title: Conditional Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
#x1B[35mDEBUG   #x1B[0m app:validation.py:46 Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
#x1B[35mDEBUG   #x1B[0m app:validation.py:143 Field 33333333-3333-3333-3333-333333333333 is mandatory due to condition: 22222222-2222-2222-2222-222222222222 == 'yes'
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=31e094a2-38bd-452b-b2ea-7b83132d9302, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_cond@ex.com', 'employee_id': 'ACOND1', 'mobile': '9988770011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_cond'}
INFO:app:#x1F512 Password set for user: admin_cond
INFO:app:✅ User registered successfully: admin_cond (admin_cond@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_cond@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_cond@ex.com
INFO:app:Login successful for employee user admin_cond@ex.com
INFO:app:Issued JWT for user admin_cond (ID: ecf060fe-71bd-4666-90f8-6d6880edae9b), roles: ['admin']
INFO:app:Returning JSON response for user admin_cond
INFO:app:Received registration data: {'email': 'user_cond@ex.com', 'employee_id': 'UCOND1', 'mobile': '8877660022', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_cond'}
INFO:app:#x1F512 Password set for user: user_cond
INFO:app:✅ User registered successfully: user_cond (user_cond@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_cond@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_cond@ex.com
INFO:app:Login successful for employee user user_cond@ex.com
INFO:app:Issued JWT for user user_cond (ID: c3a266fb-4faf-4229-a3e7-e12173a47e16), roles: ['user']
INFO:app:Returning JSON response for user user_cond
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_cond (ID: ecf060fe-71bd-4666-90f8-6d6880edae9b) is attempting to create a form with data: {'is_public': True, 'slug': 'cond-form', 'status': 'published', 'title': 'Conditional Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'radio', 'id': '22222222-2222-2222-2222-222222222222', 'label': 'Do you need extra info?', 'options': [{'option_label': 'Yes', 'option_value': 'yes'}, {'option_label': 'No', 'option_value': 'no'}]}, {'field_type': 'input', 'id': '33333333-3333-3333-3333-333333333333', 'is_required': False, 'label': 'Please specify', 'required_condition': "22222222-2222-2222-2222-222222222222 == 'yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form d9184b72-41a0-487b-bb4c-7d101af88110 created successfully by user admin_cond (ID: ecf060fe-71bd-4666-90f8-6d6880edae9b)
INFO:app:Received submission for form_id: d9184b72-41a0-487b-bb4c-7d101af88110
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'no', '33333333-3333-3333-3333-333333333333': ''}}
INFO:app:Current user: c3a266fb-4faf-4229-a3e7-e12173a47e16, Form title: Conditional Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
DEBUG:app:Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
DEBUG:app:Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
INFO:app:Submission saved: response_id=915c638e-b323-464d-8522-5d5b66c0664e, is_draft=False
INFO:app:Received submission for form_id: d9184b72-41a0-487b-bb4c-7d101af88110
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'yes', '33333333-3333-3333-3333-333333333333': ''}}
INFO:app:Current user: c3a266fb-4faf-4229-a3e7-e12173a47e16, Form title: Conditional Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
DEBUG:app:Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
DEBUG:app:Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
DEBUG:app:Field 33333333-3333-3333-3333-333333333333 is mandatory due to condition: 22222222-2222-2222-2222-222222222222 == 'yes'
WARNING:app:33333333-3333-3333-3333-333333333333: Required field missing
WARNING:app:Validation failed with errors: [{'id': '33333333-3333-3333-3333-333333333333', 'error': 'Required field missing'}]
INFO:app:Received submission for form_id: d9184b72-41a0-487b-bb4c-7d101af88110
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'yes', '33333333-3333-3333-3333-333333333333': 'Some info'}}
INFO:app:Current user: c3a266fb-4faf-4229-a3e7-e12173a47e16, Form title: Conditional Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question 22222222-2222-2222-2222-222222222222, label=Do you need extra info?
DEBUG:app:Checking question 33333333-3333-3333-3333-333333333333, label=Please specify
DEBUG:app:Sanitized condition: 22222222-2222-2222-2222-222222222222 == 'yes' -&gt; v_22222222_2222_2222_2222_222222222222 == 'yes'
DEBUG:app:Field 33333333-3333-3333-3333-333333333333 is mandatory due to condition: 22222222-2222-2222-2222-222222222222 == 'yes'
INFO:app:Submission saved: response_id=31e094a2-38bd-452b-b2ea-7b83132d9302, is_draft=False

</system-err></testcase><testcase classname="tests.test_conditional_validation" name="test_public_submission_validation" time="0.990"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_cond@ex.com', 'employee_id': 'ACOND1', 'mobile': '9988770011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_cond'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_cond (admin_cond@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_cond@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_cond (ID: 6cf2c705-faf1-4112-904a-29923be356fc), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_cond@ex.com', 'employee_id': 'UCOND1', 'mobile': '8877660022', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_cond'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_cond
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_cond (user_cond@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_cond@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_cond@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_cond (ID: 345b98e7-6648-4c73-95c9-ae1e3a08baeb), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_cond
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_cond (ID: 6cf2c705-faf1-4112-904a-29923be356fc) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-val-form', 'status': 'published', 'title': 'Public Val Form', 'versions': [{'sections': [{'id': '44444444-4444-4444-4444-444444444444', 'questions': [{'field_type': 'input', 'id': '55555555-5555-5555-5555-555555555555', 'is_required': True, 'label': 'Req'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form f4f280ca-574d-4a9c-8aa6-d1cefdbabca8 created successfully by user admin_cond (ID: 6cf2c705-faf1-4112-904a-29923be356fc)
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 44444444-4444-4444-4444-444444444444, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 55555555-5555-5555-5555-555555555555, label=Req
#x1B[33mWARNING #x1B[0m app:validation.py:186 55555555-5555-5555-5555-555555555555: Required field missing
#x1B[33mWARNING #x1B[0m app:misc.py:68 Public validation failed: [{'id': '55555555-5555-5555-5555-555555555555', 'error': 'Required field missing'}]
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_cond@ex.com', 'employee_id': 'ACOND1', 'mobile': '9988770011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_cond'}
INFO:app:#x1F512 Password set for user: admin_cond
INFO:app:✅ User registered successfully: admin_cond (admin_cond@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_cond@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_cond@ex.com
INFO:app:Login successful for employee user admin_cond@ex.com
INFO:app:Issued JWT for user admin_cond (ID: 6cf2c705-faf1-4112-904a-29923be356fc), roles: ['admin']
INFO:app:Returning JSON response for user admin_cond
INFO:app:Received registration data: {'email': 'user_cond@ex.com', 'employee_id': 'UCOND1', 'mobile': '8877660022', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_cond'}
INFO:app:#x1F512 Password set for user: user_cond
INFO:app:✅ User registered successfully: user_cond (user_cond@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_cond@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_cond@ex.com
INFO:app:Login successful for employee user user_cond@ex.com
INFO:app:Issued JWT for user user_cond (ID: 345b98e7-6648-4c73-95c9-ae1e3a08baeb), roles: ['user']
INFO:app:Returning JSON response for user user_cond
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_cond (ID: 6cf2c705-faf1-4112-904a-29923be356fc) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-val-form', 'status': 'published', 'title': 'Public Val Form', 'versions': [{'sections': [{'id': '44444444-4444-4444-4444-444444444444', 'questions': [{'field_type': 'input', 'id': '55555555-5555-5555-5555-555555555555', 'is_required': True, 'label': 'Req'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form f4f280ca-574d-4a9c-8aa6-d1cefdbabca8 created successfully by user admin_cond (ID: 6cf2c705-faf1-4112-904a-29923be356fc)
INFO:app:Processing section: 44444444-4444-4444-4444-444444444444, repeatable=False
DEBUG:app:Checking question 55555555-5555-5555-5555-555555555555, label=Req
WARNING:app:55555555-5555-5555-5555-555555555555: Required field missing
WARNING:app:Public validation failed: [{'id': '55555555-5555-5555-5555-555555555555', 'error': 'Required field missing'}]

</system-err></testcase><testcase classname="tests.test_custom_scripts" name="test_custom_script_success" time="0.543"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_script
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_script (admin_script@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_script
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4) is attempting to create a form with data: {'slug': 'script-form', 'title': 'Script Form', 'ui': 'flex', 'versions': [{'sections': [{'questions': [{'custom_script': "result = input['a'] + input['b']", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Calc'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 6dad9e76-81e4-43c5-9852-aac3f6f514a6 created successfully by user admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4)
#x1B[32mINFO    #x1B[0m app:api.py:25 User admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:115 User admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4) is calling Custom API
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
INFO:app:#x1F512 Password set for user: admin_script
INFO:app:✅ User registered successfully: admin_script (admin_script@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_script@example.com
INFO:app:Login successful for employee user admin_script@example.com
INFO:app:Issued JWT for user admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4), roles: ['admin']
INFO:app:Returning JSON response for user admin_script
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4) is attempting to create a form with data: {'slug': 'script-form', 'title': 'Script Form', 'ui': 'flex', 'versions': [{'sections': [{'questions': [{'custom_script': "result = input['a'] + input['b']", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Calc'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form 6dad9e76-81e4-43c5-9852-aac3f6f514a6 created successfully by user admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4)
INFO:app:User admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4) is attempting to retrieve UHID
INFO:app:User admin_script (ID: 06cc7151-9468-459a-a3ee-367c7439f4c4) is calling Custom API

</system-err></testcase><testcase classname="tests.test_custom_scripts" name="test_custom_script_security" time="0.509"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_script
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_script (admin_script@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_script
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55) is attempting to create a form with data: {'slug': 'sec-form', 'title': 'Security Form', 'versions': [{'sections': [{'questions': [{'custom_script': "import os; result = os.listdir('.')", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Hack'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 3fe2324b-b810-4d19-87a5-5861cacbd042 created successfully by user admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55)
#x1B[32mINFO    #x1B[0m app:api.py:25 User admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:115 User admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55) is calling Custom API
#x1B[31m#x1B[1mERROR   #x1B[0m app:api.py:143 Error executing custom script for user admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55): Script execution failed: __import__ not found
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
INFO:app:#x1F512 Password set for user: admin_script
INFO:app:✅ User registered successfully: admin_script (admin_script@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_script@example.com
INFO:app:Login successful for employee user admin_script@example.com
INFO:app:Issued JWT for user admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55), roles: ['admin']
INFO:app:Returning JSON response for user admin_script
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55) is attempting to create a form with data: {'slug': 'sec-form', 'title': 'Security Form', 'versions': [{'sections': [{'questions': [{'custom_script': "import os; result = os.listdir('.')", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Hack'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form 3fe2324b-b810-4d19-87a5-5861cacbd042 created successfully by user admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55)
INFO:app:User admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55) is attempting to retrieve UHID
INFO:app:User admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55) is calling Custom API
ERROR:app:Error executing custom script for user admin_script (ID: 615c854f-59f1-4d97-b7b8-25a25bcb3a55): Script execution failed: __import__ not found

</system-err></testcase><testcase classname="tests.test_custom_scripts" name="test_custom_script_math_module" time="0.500"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_script
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_script (admin_script@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_script
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d) is attempting to create a form with data: {'slug': 'math-form', 'title': 'Math Form', 'versions': [{'sections': [{'questions': [{'custom_script': "result = math.sqrt(input['val'])", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Math'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form e6905898-2b0c-46c3-9907-c8edd8b12ef6 created successfully by user admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d)
#x1B[32mINFO    #x1B[0m app:api.py:25 User admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:115 User admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d) is calling Custom API
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
INFO:app:#x1F512 Password set for user: admin_script
INFO:app:✅ User registered successfully: admin_script (admin_script@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_script@example.com
INFO:app:Login successful for employee user admin_script@example.com
INFO:app:Issued JWT for user admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d), roles: ['admin']
INFO:app:Returning JSON response for user admin_script
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d) is attempting to create a form with data: {'slug': 'math-form', 'title': 'Math Form', 'versions': [{'sections': [{'questions': [{'custom_script': "result = math.sqrt(input['val'])", 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Math'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form e6905898-2b0c-46c3-9907-c8edd8b12ef6 created successfully by user admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d)
INFO:app:User admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d) is attempting to retrieve UHID
INFO:app:User admin_script (ID: d38fa4a5-a171-4018-a28c-a9011b7b7f9d) is calling Custom API

</system-err></testcase><testcase classname="tests.test_custom_scripts" name="test_custom_script_implicit_return" time="0.498"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_script
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_script (admin_script@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_script@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_script
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a) is attempting to create a form with data: {'slug': 'implicit-form', 'title': 'Implicit Form', 'versions': [{'sections': [{'questions': [{'custom_script': 'x = 5; y = 10; z = x * y', 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Implicit'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 4256d919-7f93-4c9e-af37-ce7dbfdd9b45 created successfully by user admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a)
#x1B[32mINFO    #x1B[0m app:api.py:25 User admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a) is attempting to retrieve UHID
#x1B[32mINFO    #x1B[0m app:api.py:115 User admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a) is calling Custom API
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_script@example.com', 'employee_id': 'SCRPT001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_script'}
INFO:app:#x1F512 Password set for user: admin_script
INFO:app:✅ User registered successfully: admin_script (admin_script@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_script@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_script@example.com
INFO:app:Login successful for employee user admin_script@example.com
INFO:app:Issued JWT for user admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a), roles: ['admin']
INFO:app:Returning JSON response for user admin_script
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a) is attempting to create a form with data: {'slug': 'implicit-form', 'title': 'Implicit Form', 'versions': [{'sections': [{'questions': [{'custom_script': 'x = 5; y = 10; z = x * y', 'field_api_call': 'custom', 'field_type': 'input', 'label': 'Implicit'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form 4256d919-7f93-4c9e-af37-ce7dbfdd9b45 created successfully by user admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a)
INFO:app:User admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a) is attempting to retrieve UHID
INFO:app:User admin_script (ID: 74ac0370-dd08-4cd0-be4f-58c03be1123a) is calling Custom API

</system-err></testcase><testcase classname="tests.test_dashboard" name="test_dashboard_lifecycle" time="1.474"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_dash@example.com', 'employee_id': 'ADM_DASH', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_dash'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_dash
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_dash (admin_dash@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_dash@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_dash@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_dash@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_dash (ID: ef5408da-4966-437e-964b-5198f61da739), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_dash
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'deo@example.com', 'employee_id': 'DEO001', 'mobile': '0987654321', 'roles': ['deo'], 'user_type': 'employee', 'username': 'deo_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: deo_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: deo_user (deo@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'deo@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: deo@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user deo@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user deo_user (ID: e731f7f8-e269-4e8d-abe8-8a6407e28f3d), roles: ['deo']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user deo_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'other@example.com', 'employee_id': 'OTH001', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'other_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: other_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: other_user (other@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'other@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: other@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user other@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user other_user (ID: 88d022f4-9ba2-4509-84f4-1074b5e66b00), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user other_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_dash@example.com', 'employee_id': 'ADM_DASH', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_dash'}
INFO:app:#x1F512 Password set for user: admin_dash
INFO:app:✅ User registered successfully: admin_dash (admin_dash@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_dash@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: admin_dash@example.com
INFO:app:Login successful for employee user admin_dash@example.com
INFO:app:Issued JWT for user admin_dash (ID: ef5408da-4966-437e-964b-5198f61da739), roles: ['admin']
INFO:app:Returning JSON response for user admin_dash
INFO:app:Received registration data: {'email': 'deo@example.com', 'employee_id': 'DEO001', 'mobile': '0987654321', 'roles': ['deo'], 'user_type': 'employee', 'username': 'deo_user'}
INFO:app:#x1F512 Password set for user: deo_user
INFO:app:✅ User registered successfully: deo_user (deo@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'deo@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: deo@example.com
INFO:app:Login successful for employee user deo@example.com
INFO:app:Issued JWT for user deo_user (ID: e731f7f8-e269-4e8d-abe8-8a6407e28f3d), roles: ['deo']
INFO:app:Returning JSON response for user deo_user
INFO:app:Received registration data: {'email': 'other@example.com', 'employee_id': 'OTH001', 'mobile': '1122334455', 'roles': ['user'], 'user_type': 'employee', 'username': 'other_user'}
INFO:app:#x1F512 Password set for user: other_user
INFO:app:✅ User registered successfully: other_user (other@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'other@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: other@example.com
INFO:app:Login successful for employee user other@example.com
INFO:app:Issued JWT for user other_user (ID: 88d022f4-9ba2-4509-84f4-1074b5e66b00), roles: ['user']
INFO:app:Returning JSON response for user other_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_data_integrity" name="test_hidden_field_stripping" time="0.495"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'integrity_admin_73e1ef@test.com', 'employee_id': 'EMP_6c7c06', 'mobile': '7754570696', 'roles': ['admin'], 'user_type': 'employee', 'username': 'integrity_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: integrity_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: integrity_admin (integrity_admin_73e1ef@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'integrity_admin_73e1ef@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: integrity_admin_73e1ef@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user integrity_admin_73e1ef@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user integrity_admin (ID: 2dcbae22-fa17-47a7-afaa-419d1bf403da), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user integrity_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User integrity_admin (ID: 2dcbae22-fa17-47a7-afaa-419d1bf403da) is attempting to create a form with data: {'is_public': True, 'slug': 'integrity-form-839cd6', 'status': 'published', 'title': 'Integrity Form', 'versions': [{'sections': [{'id': '55ca2cda-b075-4a81-97bf-4adbcba5f802', 'questions': [{'field_type': 'radio', 'id': '893059be-4636-4b30-a6e1-98a2f6d6a251', 'is_required': True, 'label': 'Do you agree?', 'options': [{'option_label': 'Yes', 'option_value': 'Yes'}, {'option_label': 'No', 'option_value': 'No'}]}, {'field_type': 'input', 'id': '53f5c783-51ca-4a4b-875c-82523c5c673d', 'is_required': False, 'label': 'Reason', 'visibility_condition': "v_893059be_4636_4b30_a6e1_98a2f6d6a251 == 'Yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form c2466f20-f542-4e39-97a4-e9ef21465b32 created successfully by user integrity_admin (ID: 2dcbae22-fa17-47a7-afaa-419d1bf403da)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: c2466f20-f542-4e39-97a4-e9ef21465b32
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'55ca2cda-b075-4a81-97bf-4adbcba5f802': {'53f5c783-51ca-4a4b-875c-82523c5c673d': 'ShouldBeHidden', '893059be-4636-4b30-a6e1-98a2f6d6a251': 'No'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 2dcbae22-fa17-47a7-afaa-419d1bf403da, Form title: Integrity Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 55ca2cda-b075-4a81-97bf-4adbcba5f802, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 893059be-4636-4b30-a6e1-98a2f6d6a251, label=Do you agree?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 53f5c783-51ca-4a4b-875c-82523c5c673d, label=Reason
#x1B[35mDEBUG   #x1B[0m app:validation.py:132 Visibility of 53f5c783-51ca-4a4b-875c-82523c5c673d: False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=b3d11189-e2f8-478b-bd1d-7a5bf0f5bde1, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: c2466f20-f542-4e39-97a4-e9ef21465b32
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'55ca2cda-b075-4a81-97bf-4adbcba5f802': {'53f5c783-51ca-4a4b-875c-82523c5c673d': 'VisibleReason', '893059be-4636-4b30-a6e1-98a2f6d6a251': 'Yes'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 2dcbae22-fa17-47a7-afaa-419d1bf403da, Form title: Integrity Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 55ca2cda-b075-4a81-97bf-4adbcba5f802, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 893059be-4636-4b30-a6e1-98a2f6d6a251, label=Do you agree?
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 53f5c783-51ca-4a4b-875c-82523c5c673d, label=Reason
#x1B[35mDEBUG   #x1B[0m app:validation.py:132 Visibility of 53f5c783-51ca-4a4b-875c-82523c5c673d: True
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=e7af9e3a-2164-4a98-9d89-99311678af59, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'integrity_admin_73e1ef@test.com', 'employee_id': 'EMP_6c7c06', 'mobile': '7754570696', 'roles': ['admin'], 'user_type': 'employee', 'username': 'integrity_admin'}
INFO:app:#x1F512 Password set for user: integrity_admin
INFO:app:✅ User registered successfully: integrity_admin (integrity_admin_73e1ef@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'integrity_admin_73e1ef@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: integrity_admin_73e1ef@test.com
INFO:app:Login successful for employee user integrity_admin_73e1ef@test.com
INFO:app:Issued JWT for user integrity_admin (ID: 2dcbae22-fa17-47a7-afaa-419d1bf403da), roles: ['admin']
INFO:app:Returning JSON response for user integrity_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User integrity_admin (ID: 2dcbae22-fa17-47a7-afaa-419d1bf403da) is attempting to create a form with data: {'is_public': True, 'slug': 'integrity-form-839cd6', 'status': 'published', 'title': 'Integrity Form', 'versions': [{'sections': [{'id': '55ca2cda-b075-4a81-97bf-4adbcba5f802', 'questions': [{'field_type': 'radio', 'id': '893059be-4636-4b30-a6e1-98a2f6d6a251', 'is_required': True, 'label': 'Do you agree?', 'options': [{'option_label': 'Yes', 'option_value': 'Yes'}, {'option_label': 'No', 'option_value': 'No'}]}, {'field_type': 'input', 'id': '53f5c783-51ca-4a4b-875c-82523c5c673d', 'is_required': False, 'label': 'Reason', 'visibility_condition': "v_893059be_4636_4b30_a6e1_98a2f6d6a251 == 'Yes'"}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form c2466f20-f542-4e39-97a4-e9ef21465b32 created successfully by user integrity_admin (ID: 2dcbae22-fa17-47a7-afaa-419d1bf403da)
INFO:app:Received submission for form_id: c2466f20-f542-4e39-97a4-e9ef21465b32
INFO:app:Parsed JSON submission: {'55ca2cda-b075-4a81-97bf-4adbcba5f802': {'53f5c783-51ca-4a4b-875c-82523c5c673d': 'ShouldBeHidden', '893059be-4636-4b30-a6e1-98a2f6d6a251': 'No'}}
INFO:app:Current user: 2dcbae22-fa17-47a7-afaa-419d1bf403da, Form title: Integrity Form
INFO:app:Processing section: 55ca2cda-b075-4a81-97bf-4adbcba5f802, repeatable=False
DEBUG:app:Checking question 893059be-4636-4b30-a6e1-98a2f6d6a251, label=Do you agree?
DEBUG:app:Checking question 53f5c783-51ca-4a4b-875c-82523c5c673d, label=Reason
DEBUG:app:Visibility of 53f5c783-51ca-4a4b-875c-82523c5c673d: False
INFO:app:Submission saved: response_id=b3d11189-e2f8-478b-bd1d-7a5bf0f5bde1, is_draft=False
INFO:app:Received submission for form_id: c2466f20-f542-4e39-97a4-e9ef21465b32
INFO:app:Parsed JSON submission: {'55ca2cda-b075-4a81-97bf-4adbcba5f802': {'53f5c783-51ca-4a4b-875c-82523c5c673d': 'VisibleReason', '893059be-4636-4b30-a6e1-98a2f6d6a251': 'Yes'}}
INFO:app:Current user: 2dcbae22-fa17-47a7-afaa-419d1bf403da, Form title: Integrity Form
INFO:app:Processing section: 55ca2cda-b075-4a81-97bf-4adbcba5f802, repeatable=False
DEBUG:app:Checking question 893059be-4636-4b30-a6e1-98a2f6d6a251, label=Do you agree?
DEBUG:app:Checking question 53f5c783-51ca-4a4b-875c-82523c5c673d, label=Reason
DEBUG:app:Visibility of 53f5c783-51ca-4a4b-875c-82523c5c673d: True
INFO:app:Submission saved: response_id=e7af9e3a-2164-4a98-9d89-99311678af59, is_draft=False

</system-err></testcase><testcase classname="tests.test_data_integrity" name="test_validation_blockcheck" time="0.488"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'integrity_admin_77158d@test.com', 'employee_id': 'EMP_9e45fd', 'mobile': '7732299173', 'roles': ['admin'], 'user_type': 'employee', 'username': 'integrity_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: integrity_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: integrity_admin (integrity_admin_77158d@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'integrity_admin_77158d@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: integrity_admin_77158d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user integrity_admin_77158d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user integrity_admin (ID: f1da85ad-6690-4a37-947f-b0701eaf33ec), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user integrity_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User integrity_admin (ID: f1da85ad-6690-4a37-947f-b0701eaf33ec) is attempting to create a form with data: {'is_public': True, 'slug': 'val-form-a5bca8', 'status': 'published', 'title': 'Validation Form', 'versions': [{'sections': [{'id': '8b18204c-a629-4d9c-b4b6-930fe5fe6bd2', 'questions': [{'field_type': 'input', 'id': 'e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1', 'is_required': True, 'label': 'Req'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 54c842ce-49cb-49bf-a381-2a60006f146e created successfully by user integrity_admin (ID: f1da85ad-6690-4a37-947f-b0701eaf33ec)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 54c842ce-49cb-49bf-a381-2a60006f146e
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'8b18204c-a629-4d9c-b4b6-930fe5fe6bd2': {'e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1': ''}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: f1da85ad-6690-4a37-947f-b0701eaf33ec, Form title: Validation Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 8b18204c-a629-4d9c-b4b6-930fe5fe6bd2, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1, label=Req
#x1B[33mWARNING #x1B[0m app:validation.py:186 e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': 'e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1', 'error': 'Required field missing'}]
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'integrity_admin_77158d@test.com', 'employee_id': 'EMP_9e45fd', 'mobile': '7732299173', 'roles': ['admin'], 'user_type': 'employee', 'username': 'integrity_admin'}
INFO:app:#x1F512 Password set for user: integrity_admin
INFO:app:✅ User registered successfully: integrity_admin (integrity_admin_77158d@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'integrity_admin_77158d@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: integrity_admin_77158d@test.com
INFO:app:Login successful for employee user integrity_admin_77158d@test.com
INFO:app:Issued JWT for user integrity_admin (ID: f1da85ad-6690-4a37-947f-b0701eaf33ec), roles: ['admin']
INFO:app:Returning JSON response for user integrity_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User integrity_admin (ID: f1da85ad-6690-4a37-947f-b0701eaf33ec) is attempting to create a form with data: {'is_public': True, 'slug': 'val-form-a5bca8', 'status': 'published', 'title': 'Validation Form', 'versions': [{'sections': [{'id': '8b18204c-a629-4d9c-b4b6-930fe5fe6bd2', 'questions': [{'field_type': 'input', 'id': 'e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1', 'is_required': True, 'label': 'Req'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 54c842ce-49cb-49bf-a381-2a60006f146e created successfully by user integrity_admin (ID: f1da85ad-6690-4a37-947f-b0701eaf33ec)
INFO:app:Received submission for form_id: 54c842ce-49cb-49bf-a381-2a60006f146e
INFO:app:Parsed JSON submission: {'8b18204c-a629-4d9c-b4b6-930fe5fe6bd2': {'e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1': ''}}
INFO:app:Current user: f1da85ad-6690-4a37-947f-b0701eaf33ec, Form title: Validation Form
INFO:app:Processing section: 8b18204c-a629-4d9c-b4b6-930fe5fe6bd2, repeatable=False
DEBUG:app:Checking question e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1, label=Req
WARNING:app:e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1: Required field missing
WARNING:app:Validation failed with errors: [{'id': 'e45f59b4-8df2-43a1-91a0-f5a29fb3f8e1', 'error': 'Required field missing'}]

</system-err></testcase><testcase classname="tests.test_email_notifications" name="test_email_notification_on_submit" time="0.492"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_f574bd@test.com', 'employee_id': 'EMP_84f4a6', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_f574bd@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_f574bd@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_f574bd@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_f574bd@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 76408f92-b360-493a-9041-3ff994b548cc), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_user (ID: 76408f92-b360-493a-9041-3ff994b548cc) is attempting to create a form with data: {'notification_emails': ['admin@example.com', 'manager@example.com'], 'slug': 'email-form-0583f4', 'status': 'published', 'title': 'Email Form', 'versions': [{'sections': [{'id': 'fc80f01f-e9ee-4b28-ac2f-bf33d3d6c4f0', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 12fcc1fd-7cac-4ba9-957f-3dc7270d7cad created successfully by user admin_user (ID: 76408f92-b360-493a-9041-3ff994b548cc)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 12fcc1fd-7cac-4ba9-957f-3dc7270d7cad
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 76408f92-b360-493a-9041-3ff994b548cc, Form title: Email Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: fc80f01f-e9ee-4b28-ac2f-bf33d3d6c4f0, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=c4b9c4de-5991-4101-a19b-c54b16210bd3, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_f574bd@test.com', 'employee_id': 'EMP_84f4a6', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_f574bd@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_f574bd@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: admin_f574bd@test.com
INFO:app:Login successful for employee user admin_f574bd@test.com
INFO:app:Issued JWT for user admin_user (ID: 76408f92-b360-493a-9041-3ff994b548cc), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_user (ID: 76408f92-b360-493a-9041-3ff994b548cc) is attempting to create a form with data: {'notification_emails': ['admin@example.com', 'manager@example.com'], 'slug': 'email-form-0583f4', 'status': 'published', 'title': 'Email Form', 'versions': [{'sections': [{'id': 'fc80f01f-e9ee-4b28-ac2f-bf33d3d6c4f0', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 12fcc1fd-7cac-4ba9-957f-3dc7270d7cad created successfully by user admin_user (ID: 76408f92-b360-493a-9041-3ff994b548cc)
INFO:app:Received submission for form_id: 12fcc1fd-7cac-4ba9-957f-3dc7270d7cad
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 76408f92-b360-493a-9041-3ff994b548cc, Form title: Email Form
INFO:app:Processing section: fc80f01f-e9ee-4b28-ac2f-bf33d3d6c4f0, repeatable=False
INFO:app:Submission saved: response_id=c4b9c4de-5991-4101-a19b-c54b16210bd3, is_draft=False

</system-err></testcase><testcase classname="tests.test_email_notifications" name="test_public_email_notification_on_submit" time="0.490"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_adcc9b@test.com', 'employee_id': 'EMP_0b095d', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_adcc9b@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_adcc9b@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_adcc9b@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_adcc9b@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 85bc1ce4-3597-4dbe-a120-48f762042738), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_user (ID: 85bc1ce4-3597-4dbe-a120-48f762042738) is attempting to create a form with data: {'is_public': True, 'notification_emails': ['public@example.com'], 'slug': 'pub-email-5f7c45', 'status': 'published', 'title': 'Public Email Form', 'versions': [{'sections': [{'id': '0cc61f03-7f60-43ae-998c-de140315d208', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 4a679dec-b71e-4678-bccb-dedccba1d4bc created successfully by user admin_user (ID: 85bc1ce4-3597-4dbe-a120-48f762042738)
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 0cc61f03-7f60-43ae-998c-de140315d208, repeatable=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_adcc9b@test.com', 'employee_id': 'EMP_0b095d', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_adcc9b@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_adcc9b@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: admin_adcc9b@test.com
INFO:app:Login successful for employee user admin_adcc9b@test.com
INFO:app:Issued JWT for user admin_user (ID: 85bc1ce4-3597-4dbe-a120-48f762042738), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_user (ID: 85bc1ce4-3597-4dbe-a120-48f762042738) is attempting to create a form with data: {'is_public': True, 'notification_emails': ['public@example.com'], 'slug': 'pub-email-5f7c45', 'status': 'published', 'title': 'Public Email Form', 'versions': [{'sections': [{'id': '0cc61f03-7f60-43ae-998c-de140315d208', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 4a679dec-b71e-4678-bccb-dedccba1d4bc created successfully by user admin_user (ID: 85bc1ce4-3597-4dbe-a120-48f762042738)
INFO:app:Processing section: 0cc61f03-7f60-43ae-998c-de140315d208, repeatable=False

</system-err></testcase><testcase classname="tests.test_export" name="test_csv_export_flattening" time="0.495"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'export_admin_3515bb@test.com', 'employee_id': 'EMP_47a9bf', 'mobile': '7712930991', 'roles': ['admin'], 'user_type': 'employee', 'username': 'export_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: export_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: export_admin (export_admin_3515bb@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'export_admin_3515bb@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: export_admin_3515bb@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user export_admin_3515bb@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user export_admin (ID: 9f11025f-780f-4529-a637-531327aedb35), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user export_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User export_admin (ID: 9f11025f-780f-4529-a637-531327aedb35) is attempting to create a form with data: {'is_public': True, 'slug': 'export-form-d27910', 'status': 'published', 'title': 'Export Form', 'versions': [{'sections': [{'id': '16cea4ce-a8f6-4dbc-a081-947eec6ce503', 'questions': [{'field_type': 'input', 'id': '7ea48b23-c665-4616-bcea-f8e99c8b071e', 'is_required': True, 'label': 'Full Name'}, {'field_type': 'input', 'id': '2d3787c1-ce3c-4c84-a103-26377376cdce', 'is_required': True, 'label': 'Age'}], 'title': 'Main'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 7968fd64-0791-4e2e-bc61-9b0747a2bea9 created successfully by user export_admin (ID: 9f11025f-780f-4529-a637-531327aedb35)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 7968fd64-0791-4e2e-bc61-9b0747a2bea9
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'16cea4ce-a8f6-4dbc-a081-947eec6ce503': {'2d3787c1-ce3c-4c84-a103-26377376cdce': '30', '7ea48b23-c665-4616-bcea-f8e99c8b071e': 'John Doe'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 9f11025f-780f-4529-a637-531327aedb35, Form title: Export Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 16cea4ce-a8f6-4dbc-a081-947eec6ce503, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 7ea48b23-c665-4616-bcea-f8e99c8b071e, label=Full Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 2d3787c1-ce3c-4c84-a103-26377376cdce, label=Age
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=a11da313-be2d-4038-b0e9-df0e3da7e560, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'export_admin_3515bb@test.com', 'employee_id': 'EMP_47a9bf', 'mobile': '7712930991', 'roles': ['admin'], 'user_type': 'employee', 'username': 'export_admin'}
INFO:app:#x1F512 Password set for user: export_admin
INFO:app:✅ User registered successfully: export_admin (export_admin_3515bb@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'export_admin_3515bb@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: export_admin_3515bb@test.com
INFO:app:Login successful for employee user export_admin_3515bb@test.com
INFO:app:Issued JWT for user export_admin (ID: 9f11025f-780f-4529-a637-531327aedb35), roles: ['admin']
INFO:app:Returning JSON response for user export_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User export_admin (ID: 9f11025f-780f-4529-a637-531327aedb35) is attempting to create a form with data: {'is_public': True, 'slug': 'export-form-d27910', 'status': 'published', 'title': 'Export Form', 'versions': [{'sections': [{'id': '16cea4ce-a8f6-4dbc-a081-947eec6ce503', 'questions': [{'field_type': 'input', 'id': '7ea48b23-c665-4616-bcea-f8e99c8b071e', 'is_required': True, 'label': 'Full Name'}, {'field_type': 'input', 'id': '2d3787c1-ce3c-4c84-a103-26377376cdce', 'is_required': True, 'label': 'Age'}], 'title': 'Main'}], 'version': '1.0'}]}
INFO:app:Form 7968fd64-0791-4e2e-bc61-9b0747a2bea9 created successfully by user export_admin (ID: 9f11025f-780f-4529-a637-531327aedb35)
INFO:app:Received submission for form_id: 7968fd64-0791-4e2e-bc61-9b0747a2bea9
INFO:app:Parsed JSON submission: {'16cea4ce-a8f6-4dbc-a081-947eec6ce503': {'2d3787c1-ce3c-4c84-a103-26377376cdce': '30', '7ea48b23-c665-4616-bcea-f8e99c8b071e': 'John Doe'}}
INFO:app:Current user: 9f11025f-780f-4529-a637-531327aedb35, Form title: Export Form
INFO:app:Processing section: 16cea4ce-a8f6-4dbc-a081-947eec6ce503, repeatable=False
DEBUG:app:Checking question 7ea48b23-c665-4616-bcea-f8e99c8b071e, label=Full Name
DEBUG:app:Checking question 2d3787c1-ce3c-4c84-a103-26377376cdce, label=Age
INFO:app:Submission saved: response_id=a11da313-be2d-4038-b0e9-df0e3da7e560, is_draft=False

</system-err></testcase><testcase classname="tests.test_export" name="test_csv_export_repeatable" time="0.489"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'export_admin_6b6a63@test.com', 'employee_id': 'EMP_23cf1e', 'mobile': '7799540884', 'roles': ['admin'], 'user_type': 'employee', 'username': 'export_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: export_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: export_admin (export_admin_6b6a63@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'export_admin_6b6a63@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: export_admin_6b6a63@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user export_admin_6b6a63@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user export_admin (ID: a22d2893-da0c-474c-a314-66cdda053cb9), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user export_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User export_admin (ID: a22d2893-da0c-474c-a314-66cdda053cb9) is attempting to create a form with data: {'is_public': True, 'slug': 'export-rep-88ab56', 'status': 'published', 'title': 'Export Repeatable', 'versions': [{'sections': [{'id': '7011e3a2-4109-44ac-8841-01d1ba527a82', 'is_repeatable_section': True, 'questions': [{'field_type': 'input', 'id': '904b9151-2223-472f-b2ca-87e23f20fd5a', 'is_required': True, 'label': 'Name'}], 'title': 'Family'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 6b4b18a1-449f-4be3-b548-96ee87aec9af created successfully by user export_admin (ID: a22d2893-da0c-474c-a314-66cdda053cb9)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 6b4b18a1-449f-4be3-b548-96ee87aec9af
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'7011e3a2-4109-44ac-8841-01d1ba527a82': [{'904b9151-2223-472f-b2ca-87e23f20fd5a': 'Alice'}, {'904b9151-2223-472f-b2ca-87e23f20fd5a': 'Bob'}]}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: a22d2893-da0c-474c-a314-66cdda053cb9, Form title: Export Repeatable
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 7011e3a2-4109-44ac-8841-01d1ba527a82, repeatable=True
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 904b9151-2223-472f-b2ca-87e23f20fd5a, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 904b9151-2223-472f-b2ca-87e23f20fd5a, label=Name
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=68f7bec5-48e9-4449-84e9-7249f0e7a7ee, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'export_admin_6b6a63@test.com', 'employee_id': 'EMP_23cf1e', 'mobile': '7799540884', 'roles': ['admin'], 'user_type': 'employee', 'username': 'export_admin'}
INFO:app:#x1F512 Password set for user: export_admin
INFO:app:✅ User registered successfully: export_admin (export_admin_6b6a63@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'export_admin_6b6a63@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: export_admin_6b6a63@test.com
INFO:app:Login successful for employee user export_admin_6b6a63@test.com
INFO:app:Issued JWT for user export_admin (ID: a22d2893-da0c-474c-a314-66cdda053cb9), roles: ['admin']
INFO:app:Returning JSON response for user export_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User export_admin (ID: a22d2893-da0c-474c-a314-66cdda053cb9) is attempting to create a form with data: {'is_public': True, 'slug': 'export-rep-88ab56', 'status': 'published', 'title': 'Export Repeatable', 'versions': [{'sections': [{'id': '7011e3a2-4109-44ac-8841-01d1ba527a82', 'is_repeatable_section': True, 'questions': [{'field_type': 'input', 'id': '904b9151-2223-472f-b2ca-87e23f20fd5a', 'is_required': True, 'label': 'Name'}], 'title': 'Family'}], 'version': '1.0'}]}
INFO:app:Form 6b4b18a1-449f-4be3-b548-96ee87aec9af created successfully by user export_admin (ID: a22d2893-da0c-474c-a314-66cdda053cb9)
INFO:app:Received submission for form_id: 6b4b18a1-449f-4be3-b548-96ee87aec9af
INFO:app:Parsed JSON submission: {'7011e3a2-4109-44ac-8841-01d1ba527a82': [{'904b9151-2223-472f-b2ca-87e23f20fd5a': 'Alice'}, {'904b9151-2223-472f-b2ca-87e23f20fd5a': 'Bob'}]}
INFO:app:Current user: a22d2893-da0c-474c-a314-66cdda053cb9, Form title: Export Repeatable
INFO:app:Processing section: 7011e3a2-4109-44ac-8841-01d1ba527a82, repeatable=True
DEBUG:app:Checking question 904b9151-2223-472f-b2ca-87e23f20fd5a, label=Name
DEBUG:app:Checking question 904b9151-2223-472f-b2ca-87e23f20fd5a, label=Name
INFO:app:Submission saved: response_id=68f7bec5-48e9-4449-84e9-7249f0e7a7ee, is_draft=False

</system-err></testcase><testcase classname="tests.test_form" name="test_create_form_success" time="0.488"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: e12a0d5b-5f03-40a5-b94c-c6b9c8a91b2e), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: e12a0d5b-5f03-40a5-b94c-c6b9c8a91b2e) is attempting to create a form with data: {'is_public': True, 'slug': 'new-form', 'title': 'New Form', 'versions': [{'sections': [{'id': '77777777-7777-7777-7777-777777777777', 'questions': [{'field_type': 'input', 'id': '88888888-8888-8888-8888-888888888888', 'label': 'Question 1'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 009ae7da-5b88-4696-8b62-7ab45d72946c created successfully by user form_creator (ID: e12a0d5b-5f03-40a5-b94c-c6b9c8a91b2e)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: e12a0d5b-5f03-40a5-b94c-c6b9c8a91b2e), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: e12a0d5b-5f03-40a5-b94c-c6b9c8a91b2e) is attempting to create a form with data: {'is_public': True, 'slug': 'new-form', 'title': 'New Form', 'versions': [{'sections': [{'id': '77777777-7777-7777-7777-777777777777', 'questions': [{'field_type': 'input', 'id': '88888888-8888-8888-8888-888888888888', 'label': 'Question 1'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form 009ae7da-5b88-4696-8b62-7ab45d72946c created successfully by user form_creator (ID: e12a0d5b-5f03-40a5-b94c-c6b9c8a91b2e)

</system-err></testcase><testcase classname="tests.test_form" name="test_list_forms" time="0.493"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a) is attempting to create a form with data: {'slug': 'f1', 'title': 'F1'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form d8a81a62-dc8f-4a21-829d-8863a5740d3c created successfully by user form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a) is attempting to create a form with data: {'slug': 'f2', 'title': 'F2'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 5542b189-b66c-40d3-b626-d1d9cb789047 created successfully by user form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a) is attempting to create a form with data: {'slug': 'f1', 'title': 'F1'}
INFO:app:Form d8a81a62-dc8f-4a21-829d-8863a5740d3c created successfully by user form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a) is attempting to create a form with data: {'slug': 'f2', 'title': 'F2'}
INFO:app:Form 5542b189-b66c-40d3-b626-d1d9cb789047 created successfully by user form_creator (ID: a259c2dc-167b-4bc3-8cf5-523ee23b299a)

</system-err></testcase><testcase classname="tests.test_form" name="test_get_form_details" time="0.501"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: 974487fb-53e3-4077-9112-cc60a87e0090), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: 974487fb-53e3-4077-9112-cc60a87e0090) is attempting to create a form with data: {'slug': 'details-form', 'title': 'Details Form'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form c9ad808a-d069-4a26-baa7-7057770648fe created successfully by user form_creator (ID: 974487fb-53e3-4077-9112-cc60a87e0090)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: 974487fb-53e3-4077-9112-cc60a87e0090), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: 974487fb-53e3-4077-9112-cc60a87e0090) is attempting to create a form with data: {'slug': 'details-form', 'title': 'Details Form'}
INFO:app:Form c9ad808a-d069-4a26-baa7-7057770648fe created successfully by user form_creator (ID: 974487fb-53e3-4077-9112-cc60a87e0090)

</system-err></testcase><testcase classname="tests.test_form" name="test_update_form" time="0.492"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: 63b5c18b-22c7-4551-9711-9f212632031b), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: 63b5c18b-22c7-4551-9711-9f212632031b) is attempting to create a form with data: {'slug': 'old-slug', 'title': 'Old Title'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 584e2ddd-5709-48f1-b348-324d7f60dfe0 created successfully by user form_creator (ID: 63b5c18b-22c7-4551-9711-9f212632031b)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: 63b5c18b-22c7-4551-9711-9f212632031b), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: 63b5c18b-22c7-4551-9711-9f212632031b) is attempting to create a form with data: {'slug': 'old-slug', 'title': 'Old Title'}
INFO:app:Form 584e2ddd-5709-48f1-b348-324d7f60dfe0 created successfully by user form_creator (ID: 63b5c18b-22c7-4551-9711-9f212632031b)

</system-err></testcase><testcase classname="tests.test_form" name="test_delete_form_admin" time="1.061"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: form_creator (creator@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user creator@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user form_creator (ID: 55b8ab46-14e9-4927-b42c-9bb9ea7d7d4e), roles: ['creator']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user form_creator
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_form@example.com', 'employee_id': 'ADM002', 'mobile': '4433221100', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user_form'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user_form
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user_form (admin_form@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_form@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_form@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_form@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user_form (ID: ae13e860-0602-4192-b6ac-a711db915f68), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user_form
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User form_creator (ID: 55b8ab46-14e9-4927-b42c-9bb9ea7d7d4e) is attempting to create a form with data: {'slug': 'delete-me', 'title': 'Delete Me'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 85ed0004-f4de-44c4-98b5-4f89161fac7c created successfully by user form_creator (ID: 55b8ab46-14e9-4927-b42c-9bb9ea7d7d4e)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[33mWARNING #x1B[0m app:decorator.py:39 Access forbidden for user 55b8ab46-14e9-4927-b42c-9bb9ea7d7d4e. Required: ('admin', 'superadmin'), Actual: ['creator']
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'creator@example.com', 'employee_id': 'CR001', 'mobile': '5544332211', 'roles': ['creator'], 'user_type': 'employee', 'username': 'form_creator'}
INFO:app:#x1F512 Password set for user: form_creator
INFO:app:✅ User registered successfully: form_creator (creator@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'creator@example.com', 'password': 'CreatorPassword123'}
INFO:app:Employee login attempt with identifier: creator@example.com
INFO:app:Login successful for employee user creator@example.com
INFO:app:Issued JWT for user form_creator (ID: 55b8ab46-14e9-4927-b42c-9bb9ea7d7d4e), roles: ['creator']
INFO:app:Returning JSON response for user form_creator
INFO:app:Received registration data: {'email': 'admin_form@example.com', 'employee_id': 'ADM002', 'mobile': '4433221100', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user_form'}
INFO:app:#x1F512 Password set for user: admin_user_form
INFO:app:✅ User registered successfully: admin_user_form (admin_form@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_form@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_form@example.com
INFO:app:Login successful for employee user admin_form@example.com
INFO:app:Issued JWT for user admin_user_form (ID: ae13e860-0602-4192-b6ac-a711db915f68), roles: ['admin']
INFO:app:Returning JSON response for user admin_user_form
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User form_creator (ID: 55b8ab46-14e9-4927-b42c-9bb9ea7d7d4e) is attempting to create a form with data: {'slug': 'delete-me', 'title': 'Delete Me'}
INFO:app:Form 85ed0004-f4de-44c4-98b5-4f89161fac7c created successfully by user form_creator (ID: 55b8ab46-14e9-4927-b42c-9bb9ea7d7d4e)
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
WARNING:app:Access forbidden for user 55b8ab46-14e9-4927-b42c-9bb9ea7d7d4e. Required: ('admin', 'superadmin'), Actual: ['creator']
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_form_versioning" name="test_form_versioning" time="0.507"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'v_admin@example.com', 'mobile': '5556667778', 'roles': ['admin'], 'user_type': 'employee', 'username': 'v_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: v_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: v_admin (v_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'v_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: v_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user v_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user v_admin (ID: a3fb4fca-c760-4dcf-9bc4-317997af7a16), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user v_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User v_admin (ID: a3fb4fca-c760-4dcf-9bc4-317997af7a16) is attempting to create a form with data: {'id': '4602ab30-ba69-40a2-a556-71c10c9bafcf', 'slug': 'v-test-3e1c1b', 'status': 'published', 'title': 'Version Form', 'versions': [{'sections': [{'id': '5665a861-7272-4e0a-9f56-81926629dd11', 'questions': [{'field_type': 'input', 'id': '115ea062-e221-4c61-bd3e-dcb27700908f', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 4602ab30-ba69-40a2-a556-71c10c9bafcf created successfully by user v_admin (ID: a3fb4fca-c760-4dcf-9bc4-317997af7a16)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 4602ab30-ba69-40a2-a556-71c10c9bafcf
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'5665a861-7272-4e0a-9f56-81926629dd11': {'115ea062-e221-4c61-bd3e-dcb27700908f': 'val'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: a3fb4fca-c760-4dcf-9bc4-317997af7a16, Form title: Version Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 5665a861-7272-4e0a-9f56-81926629dd11, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 115ea062-e221-4c61-bd3e-dcb27700908f, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=754d50dc-6f5e-4beb-a056-5ca8314b88ae, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'v_admin@example.com', 'mobile': '5556667778', 'roles': ['admin'], 'user_type': 'employee', 'username': 'v_admin'}
INFO:app:#x1F512 Password set for user: v_admin
INFO:app:✅ User registered successfully: v_admin (v_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'v_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: v_admin@example.com
INFO:app:Login successful for employee user v_admin@example.com
INFO:app:Issued JWT for user v_admin (ID: a3fb4fca-c760-4dcf-9bc4-317997af7a16), roles: ['admin']
INFO:app:Returning JSON response for user v_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User v_admin (ID: a3fb4fca-c760-4dcf-9bc4-317997af7a16) is attempting to create a form with data: {'id': '4602ab30-ba69-40a2-a556-71c10c9bafcf', 'slug': 'v-test-3e1c1b', 'status': 'published', 'title': 'Version Form', 'versions': [{'sections': [{'id': '5665a861-7272-4e0a-9f56-81926629dd11', 'questions': [{'field_type': 'input', 'id': '115ea062-e221-4c61-bd3e-dcb27700908f', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 4602ab30-ba69-40a2-a556-71c10c9bafcf created successfully by user v_admin (ID: a3fb4fca-c760-4dcf-9bc4-317997af7a16)
INFO:app:Received submission for form_id: 4602ab30-ba69-40a2-a556-71c10c9bafcf
INFO:app:Parsed JSON submission: {'5665a861-7272-4e0a-9f56-81926629dd11': {'115ea062-e221-4c61-bd3e-dcb27700908f': 'val'}}
INFO:app:Current user: a3fb4fca-c760-4dcf-9bc4-317997af7a16, Form title: Version Form
INFO:app:Processing section: 5665a861-7272-4e0a-9f56-81926629dd11, repeatable=False
DEBUG:app:Checking question 115ea062-e221-4c61-bd3e-dcb27700908f, label=Q1
INFO:app:Submission saved: response_id=754d50dc-6f5e-4beb-a056-5ca8314b88ae, is_draft=False

</system-err></testcase><testcase classname="tests.test_integration_flow" name="test_full_response_lifecycle_flow" time="0.509"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_40eb9e@test.com', 'employee_id': 'EMP_a8b013', 'mobile': '1768199426', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_40eb9e@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_40eb9e@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_40eb9e@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_40eb9e@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: a68d2cd8-05da-4db0-a55d-d9b5b6634510), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_user (ID: a68d2cd8-05da-4db0-a55d-d9b5b6634510) is attempting to create a form with data: {'slug': 'slug-03b00d', 'status': 'published', 'title': 'Lifecycle Form', 'versions': [{'sections': [{'id': '43205366-6f2c-46ce-aa2f-5e14b59d8cbf', 'questions': [], 'title': 'S1'}], 'version': '2.1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 7406adfd-f288-460b-ad35-fdade33aedc9 created successfully by user admin_user (ID: a68d2cd8-05da-4db0-a55d-d9b5b6634510)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 7406adfd-f288-460b-ad35-fdade33aedc9
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: a68d2cd8-05da-4db0-a55d-d9b5b6634510, Form title: Lifecycle Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 43205366-6f2c-46ce-aa2f-5e14b59d8cbf, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=e463494f-8c2d-44ef-8183-9276cddabc16, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_40eb9e@test.com', 'employee_id': 'EMP_a8b013', 'mobile': '1768199426', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_40eb9e@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_40eb9e@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: admin_40eb9e@test.com
INFO:app:Login successful for employee user admin_40eb9e@test.com
INFO:app:Issued JWT for user admin_user (ID: a68d2cd8-05da-4db0-a55d-d9b5b6634510), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_user (ID: a68d2cd8-05da-4db0-a55d-d9b5b6634510) is attempting to create a form with data: {'slug': 'slug-03b00d', 'status': 'published', 'title': 'Lifecycle Form', 'versions': [{'sections': [{'id': '43205366-6f2c-46ce-aa2f-5e14b59d8cbf', 'questions': [], 'title': 'S1'}], 'version': '2.1.0'}]}
INFO:app:Form 7406adfd-f288-460b-ad35-fdade33aedc9 created successfully by user admin_user (ID: a68d2cd8-05da-4db0-a55d-d9b5b6634510)
INFO:app:Received submission for form_id: 7406adfd-f288-460b-ad35-fdade33aedc9
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: a68d2cd8-05da-4db0-a55d-d9b5b6634510, Form title: Lifecycle Form
INFO:app:Processing section: 43205366-6f2c-46ce-aa2f-5e14b59d8cbf, repeatable=False
INFO:app:Submission saved: response_id=e463494f-8c2d-44ef-8183-9276cddabc16, is_draft=False

</system-err></testcase><testcase classname="tests.test_integration_flow" name="test_account_lockout_integration" time="1.183"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'lockout_45c09d@test.com', 'employee_id': 'EMP_a5d8e5', 'mobile': '1768199427', 'roles': ['user'], 'user_type': 'employee', 'username': 'lockout_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: lockout_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: lockout_user (lockout_45c09d@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_45c09d@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_45c09d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_45c09d@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_45c09d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_45c09d@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_45c09d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_45c09d@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_45c09d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_45c09d@test.com
#x1B[33mWARNING #x1B[0m auth:User.py:97 User 3fd817ba-2241-4de3-b5ae-828dfd7e3195 locked until 2026-01-13 06:30:28.393750+00:00
#x1B[33mWARNING #x1B[0m app:auth_route.py:97 Login failed: Incorrect password for user lockout_45c09d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'CorrectPassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lockout_45c09d@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:92 Login failed: User lockout_45c09d@test.com is locked until 2026-01-13 06:30:28.393000
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'lockout_45c09d@test.com', 'employee_id': 'EMP_a5d8e5', 'mobile': '1768199427', 'roles': ['user'], 'user_type': 'employee', 'username': 'lockout_user'}
INFO:app:#x1F512 Password set for user: lockout_user
INFO:app:✅ User registered successfully: lockout_user (lockout_45c09d@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_45c09d@test.com
WARNING:app:Login failed: Incorrect password for user lockout_45c09d@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_45c09d@test.com
WARNING:app:Login failed: Incorrect password for user lockout_45c09d@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_45c09d@test.com
WARNING:app:Login failed: Incorrect password for user lockout_45c09d@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_45c09d@test.com
WARNING:app:Login failed: Incorrect password for user lockout_45c09d@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'WrongPassword'}
INFO:app:Employee login attempt with identifier: lockout_45c09d@test.com
WARNING:auth:User 3fd817ba-2241-4de3-b5ae-828dfd7e3195 locked until 2026-01-13 06:30:28.393750+00:00
WARNING:app:Login failed: Incorrect password for user lockout_45c09d@test.com
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lockout_45c09d@test.com', 'password': 'CorrectPassword'}
INFO:app:Employee login attempt with identifier: lockout_45c09d@test.com
WARNING:app:Login failed: User lockout_45c09d@test.com is locked until 2026-01-13 06:30:28.393000

</system-err></testcase><testcase classname="tests.test_integration_flow" name="test_password_expiration_integration" time="0.495"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'expire_b1d7cc@test.com', 'employee_id': 'EMP_b4d5d3', 'mobile': '1768199428', 'roles': ['user'], 'user_type': 'employee', 'username': 'expire_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: expire_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: expire_user (expire_b1d7cc@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'expire_b1d7cc@test.com', 'password': 'SecurePassword'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: expire_b1d7cc@test.com
#x1B[33mWARNING #x1B[0m app:auth_route.py:101 Login failed: Password expired for user expire_b1d7cc@test.com
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'expire_b1d7cc@test.com', 'employee_id': 'EMP_b4d5d3', 'mobile': '1768199428', 'roles': ['user'], 'user_type': 'employee', 'username': 'expire_user'}
INFO:app:#x1F512 Password set for user: expire_user
INFO:app:✅ User registered successfully: expire_user (expire_b1d7cc@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'expire_b1d7cc@test.com', 'password': 'SecurePassword'}
INFO:app:Employee login attempt with identifier: expire_b1d7cc@test.com
WARNING:app:Login failed: Password expired for user expire_b1d7cc@test.com

</system-err></testcase><testcase classname="tests.test_misc" name="test_get_form_analytics" time="0.992"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 70f1d46b-8932-42d3-83fb-d0a4025c9dcf), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: e94987c0-8db4-483a-b3b8-e8fcb5cff9de), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: 70f1d46b-8932-42d3-83fb-d0a4025c9dcf) is attempting to create a form with data: {'is_public': True, 'slug': 'ana-form', 'status': 'published', 'title': 'Analytic Form', 'versions': [{'sections': [{'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 254d412c-d2cc-4a30-9640-e3f16e598a2d created successfully by user admin_misc (ID: 70f1d46b-8932-42d3-83fb-d0a4025c9dcf)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 254d412c-d2cc-4a30-9640-e3f16e598a2d
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa': {}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: e94987c0-8db4-483a-b3b8-e8fcb5cff9de, Form title: Analytic Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=6071357a-c85f-490a-9b0d-1c2c714891cb, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 70f1d46b-8932-42d3-83fb-d0a4025c9dcf), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: e94987c0-8db4-483a-b3b8-e8fcb5cff9de), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: 70f1d46b-8932-42d3-83fb-d0a4025c9dcf) is attempting to create a form with data: {'is_public': True, 'slug': 'ana-form', 'status': 'published', 'title': 'Analytic Form', 'versions': [{'sections': [{'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 254d412c-d2cc-4a30-9640-e3f16e598a2d created successfully by user admin_misc (ID: 70f1d46b-8932-42d3-83fb-d0a4025c9dcf)
INFO:app:Received submission for form_id: 254d412c-d2cc-4a30-9640-e3f16e598a2d
INFO:app:Parsed JSON submission: {'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa': {}}
INFO:app:Current user: e94987c0-8db4-483a-b3b8-e8fcb5cff9de, Form title: Analytic Form
INFO:app:Processing section: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, repeatable=False
INFO:app:Submission saved: response_id=6071357a-c85f-490a-9b0d-1c2c714891cb, is_draft=False

</system-err></testcase><testcase classname="tests.test_misc" name="test_public_submit_success" time="0.982"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 06a65287-80e2-47d1-8641-040df716dec2), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: 39032cb6-352f-4d19-9579-0d75b4bc4618), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: 06a65287-80e2-47d1-8641-040df716dec2) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-form-misc', 'status': 'published', 'title': 'Public Form', 'versions': [{'sections': [{'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'questions': [{'field_type': 'input', 'id': 'dddddddd-dddd-dddd-dddd-dddddddddddd', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form d6c51c05-000f-465a-8f6e-0eb62005d776 created successfully by user admin_misc (ID: 06a65287-80e2-47d1-8641-040df716dec2)
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: cccccccc-cccc-cccc-cccc-cccccccccccc, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question dddddddd-dddd-dddd-dddd-dddddddddddd, label=Q1
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 06a65287-80e2-47d1-8641-040df716dec2), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: 39032cb6-352f-4d19-9579-0d75b4bc4618), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: 06a65287-80e2-47d1-8641-040df716dec2) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-form-misc', 'status': 'published', 'title': 'Public Form', 'versions': [{'sections': [{'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'questions': [{'field_type': 'input', 'id': 'dddddddd-dddd-dddd-dddd-dddddddddddd', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form d6c51c05-000f-465a-8f6e-0eb62005d776 created successfully by user admin_misc (ID: 06a65287-80e2-47d1-8641-040df716dec2)
INFO:app:Processing section: cccccccc-cccc-cccc-cccc-cccccccccccc, repeatable=False
DEBUG:app:Checking question dddddddd-dddd-dddd-dddd-dddddddddddd, label=Q1

</system-err></testcase><testcase classname="tests.test_misc" name="test_public_submit_failure_non_public" time="0.991"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 3816b95a-bcda-4dc0-8cee-c1a6864eb35f), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: d3ba6a16-42f9-475d-aec9-8dc599c2c74c), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: 3816b95a-bcda-4dc0-8cee-c1a6864eb35f) is attempting to create a form with data: {'is_public': False, 'slug': 'priv-form', 'status': 'published', 'title': 'Private Form'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 7603027f-0fb2-479f-bc20-3e32a620ddf3 created successfully by user admin_misc (ID: 3816b95a-bcda-4dc0-8cee-c1a6864eb35f)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 3816b95a-bcda-4dc0-8cee-c1a6864eb35f), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: d3ba6a16-42f9-475d-aec9-8dc599c2c74c), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: 3816b95a-bcda-4dc0-8cee-c1a6864eb35f) is attempting to create a form with data: {'is_public': False, 'slug': 'priv-form', 'status': 'published', 'title': 'Private Form'}
INFO:app:Form 7603027f-0fb2-479f-bc20-3e32a620ddf3 created successfully by user admin_misc (ID: 3816b95a-bcda-4dc0-8cee-c1a6864eb35f)

</system-err></testcase><testcase classname="tests.test_misc" name="test_set_form_expiration" time="0.994"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 5fc4b68c-ffeb-4c39-ad1b-aa4ed3255126), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: 558818a1-800d-4bf2-b83a-665effaf68b8), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: 5fc4b68c-ffeb-4c39-ad1b-aa4ed3255126) is attempting to create a form with data: {'is_public': True, 'slug': 'exp-form', 'title': 'Exp Form'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form d1ffe3c8-0c23-4ef2-b434-9ee1ed124ebe created successfully by user admin_misc (ID: 5fc4b68c-ffeb-4c39-ad1b-aa4ed3255126)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 5fc4b68c-ffeb-4c39-ad1b-aa4ed3255126), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: 558818a1-800d-4bf2-b83a-665effaf68b8), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: 5fc4b68c-ffeb-4c39-ad1b-aa4ed3255126) is attempting to create a form with data: {'is_public': True, 'slug': 'exp-form', 'title': 'Exp Form'}
INFO:app:Form d1ffe3c8-0c23-4ef2-b434-9ee1ed124ebe created successfully by user admin_misc (ID: 5fc4b68c-ffeb-4c39-ad1b-aa4ed3255126)
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_misc" name="test_list_expired_forms" time="1.040"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: 8fa46a0f-a993-4867-8675-d13825ef0c6e), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: fa29ec3d-2bb1-449c-a05f-266237e47419), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: 8fa46a0f-a993-4867-8675-d13825ef0c6e), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: fa29ec3d-2bb1-449c-a05f-266237e47419), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_misc" name="test_export_responses" time="0.998"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_misc (admin_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_misc (ID: c86cfcdc-789a-4922-aefc-bbc456abe4c0), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: user_misc
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: user_misc (user_misc@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user user_misc@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user user_misc (ID: 061e1dcc-beee-4750-9a8e-f6e978ba1081), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user user_misc
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_misc (ID: c86cfcdc-789a-4922-aefc-bbc456abe4c0) is attempting to create a form with data: {'is_public': True, 'slug': 'ex-form', 'status': 'published', 'title': 'Export Form', 'versions': [{'sections': [{'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form d98b749b-3471-4e76-aa42-184e1c090c56 created successfully by user admin_misc (ID: c86cfcdc-789a-4922-aefc-bbc456abe4c0)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: d98b749b-3471-4e76-aa42-184e1c090c56
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 061e1dcc-beee-4750-9a8e-f6e978ba1081, Form title: Export Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=8cc603a1-0976-4c0f-912a-a500be059088, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_misc@ex.com', 'employee_id': 'AMISC1', 'mobile': '7766554433', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_misc'}
INFO:app:#x1F512 Password set for user: admin_misc
INFO:app:✅ User registered successfully: admin_misc (admin_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_misc@ex.com
INFO:app:Login successful for employee user admin_misc@ex.com
INFO:app:Issued JWT for user admin_misc (ID: c86cfcdc-789a-4922-aefc-bbc456abe4c0), roles: ['admin']
INFO:app:Returning JSON response for user admin_misc
INFO:app:Received registration data: {'email': 'user_misc@ex.com', 'employee_id': 'UMISC1', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'user_misc'}
INFO:app:#x1F512 Password set for user: user_misc
INFO:app:✅ User registered successfully: user_misc (user_misc@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'user_misc@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: user_misc@ex.com
INFO:app:Login successful for employee user user_misc@ex.com
INFO:app:Issued JWT for user user_misc (ID: 061e1dcc-beee-4750-9a8e-f6e978ba1081), roles: ['user']
INFO:app:Returning JSON response for user user_misc
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_misc (ID: c86cfcdc-789a-4922-aefc-bbc456abe4c0) is attempting to create a form with data: {'is_public': True, 'slug': 'ex-form', 'status': 'published', 'title': 'Export Form', 'versions': [{'sections': [{'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form d98b749b-3471-4e76-aa42-184e1c090c56 created successfully by user admin_misc (ID: c86cfcdc-789a-4922-aefc-bbc456abe4c0)
INFO:app:Received submission for form_id: d98b749b-3471-4e76-aa42-184e1c090c56
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 061e1dcc-beee-4750-9a8e-f6e978ba1081, Form title: Export Form
INFO:app:Processing section: bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, repeatable=False
INFO:app:Submission saved: response_id=8cc603a1-0976-4c0f-912a-a500be059088, is_draft=False

</system-err></testcase><testcase classname="tests.test_multi_language" name="test_multi_language_form" time="0.510"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'lang_admin@example.com', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'lang_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: lang_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: lang_admin (lang_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'lang_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: lang_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user lang_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user lang_admin (ID: c2757204-46ad-408e-8c9f-81daedb7e95d), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user lang_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User lang_admin (ID: c2757204-46ad-408e-8c9f-81daedb7e95d) is attempting to create a form with data: {'slug': 'lang-test-e0a305', 'title': 'Registration Form', 'versions': [{'sections': [{'id': '0cd9bf29-033c-4489-a757-c7c960e55ffc', 'questions': [{'field_type': 'input', 'id': '2ebec519-8751-4e5f-8170-cad6f4e7db29', 'label': 'Name', 'options': [{'id': '2471275d-07f4-439f-b854-0ce456e8976b', 'option_label': 'Male', 'option_value': 'male'}]}], 'title': 'Personal Info'}], 'translations': {'hi': {'questions': {'2ebec519-8751-4e5f-8170-cad6f4e7db29': {'label': 'नाम', 'options': {'2471275d-07f4-439f-b854-0ce456e8976b': 'पुरुष'}}}, 'sections': {'0cd9bf29-033c-4489-a757-c7c960e55ffc': {'title': 'व्यक्तिगत जानकारी'}}, 'title': 'पंजीकरण फॉर्म'}}, 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 9fcfc6c9-c15f-4ef5-9204-3a1c8aad4b80 created successfully by user lang_admin (ID: c2757204-46ad-408e-8c9f-81daedb7e95d)
--------------------------------- Captured Out ---------------------------------
Reg Response: 201, b'{\n  "message": "User registered"\n}\n'
Login Response: 200, b'{\n  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTc2ODE5OTQzNSwianRpIjoiYzQzZTY0NTgtNzY4MC00MjU0LTljMTQtYTlmYTZlOTdkZTg1IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6ImMyNzU3MjA0LTQ2YWQtNDA4ZS04YzlmLTgxZGFlZGI3ZTk1ZCIsIm5iZiI6MTc2ODE5OTQzNSwiZXhwIjoxNzY4MjAwMzM1LCJyb2xlcyI6WyJhZG1pbiJdfQ.eD8k7fcGIScyIhvqoDPVVjBdGpwAkKsnGli5-cbB5kg",\n  "success": true\n}\n'

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'lang_admin@example.com', 'mobile': '1234567890', 'roles': ['admin'], 'user_type': 'employee', 'username': 'lang_admin'}
INFO:app:#x1F512 Password set for user: lang_admin
INFO:app:✅ User registered successfully: lang_admin (lang_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'lang_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: lang_admin@example.com
INFO:app:Login successful for employee user lang_admin@example.com
INFO:app:Issued JWT for user lang_admin (ID: c2757204-46ad-408e-8c9f-81daedb7e95d), roles: ['admin']
INFO:app:Returning JSON response for user lang_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User lang_admin (ID: c2757204-46ad-408e-8c9f-81daedb7e95d) is attempting to create a form with data: {'slug': 'lang-test-e0a305', 'title': 'Registration Form', 'versions': [{'sections': [{'id': '0cd9bf29-033c-4489-a757-c7c960e55ffc', 'questions': [{'field_type': 'input', 'id': '2ebec519-8751-4e5f-8170-cad6f4e7db29', 'label': 'Name', 'options': [{'id': '2471275d-07f4-439f-b854-0ce456e8976b', 'option_label': 'Male', 'option_value': 'male'}]}], 'title': 'Personal Info'}], 'translations': {'hi': {'questions': {'2ebec519-8751-4e5f-8170-cad6f4e7db29': {'label': 'नाम', 'options': {'2471275d-07f4-439f-b854-0ce456e8976b': 'पुरुष'}}}, 'sections': {'0cd9bf29-033c-4489-a757-c7c960e55ffc': {'title': 'व्यक्तिगत जानकारी'}}, 'title': 'पंजीकरण फॉर्म'}}, 'version': '1.0'}]}
INFO:app:Form 9fcfc6c9-c15f-4ef5-9204-3a1c8aad4b80 created successfully by user lang_admin (ID: c2757204-46ad-408e-8c9f-81daedb7e95d)

</system-err></testcase><testcase classname="tests.test_preview_mode" name="test_preview_valid_submission" time="0.496"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_preview@example.com', 'employee_id': 'PREV001', 'mobile': '6655443311', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_preview'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_preview
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_preview (admin_preview@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_preview@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_preview@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_preview@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_preview (ID: 1b499a91-4bf1-4590-a09f-b23cc0f6e48c), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_preview
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_preview (ID: 1b499a91-4bf1-4590-a09f-b23cc0f6e48c) is attempting to create a form with data: {'slug': 'preview-form', 'title': 'Preview Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form bfe7ea7c-d7a1-4b53-b0e3-4d8f1271b95b created successfully by user admin_preview (ID: 1b499a91-4bf1-4590-a09f-b23cc0f6e48c)
#x1B[32mINFO    #x1B[0m app:responses.py:892 Received preview/validation request for form_id: bfe7ea7c-d7a1-4b53-b0e3-4d8f1271b95b
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_preview@example.com', 'employee_id': 'PREV001', 'mobile': '6655443311', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_preview'}
INFO:app:#x1F512 Password set for user: admin_preview
INFO:app:✅ User registered successfully: admin_preview (admin_preview@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_preview@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_preview@example.com
INFO:app:Login successful for employee user admin_preview@example.com
INFO:app:Issued JWT for user admin_preview (ID: 1b499a91-4bf1-4590-a09f-b23cc0f6e48c), roles: ['admin']
INFO:app:Returning JSON response for user admin_preview
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_preview (ID: 1b499a91-4bf1-4590-a09f-b23cc0f6e48c) is attempting to create a form with data: {'slug': 'preview-form', 'title': 'Preview Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form bfe7ea7c-d7a1-4b53-b0e3-4d8f1271b95b created successfully by user admin_preview (ID: 1b499a91-4bf1-4590-a09f-b23cc0f6e48c)
INFO:app:Received preview/validation request for form_id: bfe7ea7c-d7a1-4b53-b0e3-4d8f1271b95b
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1

</system-err></testcase><testcase classname="tests.test_preview_mode" name="test_preview_invalid_submission" time="0.498"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_preview@example.com', 'employee_id': 'PREV001', 'mobile': '6655443311', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_preview'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_preview
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_preview (admin_preview@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_preview@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_preview@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_preview@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_preview (ID: 5dfe3c5d-6b9a-4c19-ba88-8ebe3791daa4), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_preview
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_preview (ID: 5dfe3c5d-6b9a-4c19-ba88-8ebe3791daa4) is attempting to create a form with data: {'slug': 'prev-inv-form', 'title': 'Preview Invalid Form', 'versions': [{'sections': [{'id': '22222222-2222-2222-2222-222222222222', 'questions': [{'field_type': 'input', 'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 809fa2d6-8735-4791-8662-1ec7be72b509 created successfully by user admin_preview (ID: 5dfe3c5d-6b9a-4c19-ba88-8ebe3791daa4)
#x1B[32mINFO    #x1B[0m app:responses.py:892 Received preview/validation request for form_id: 809fa2d6-8735-4791-8662-1ec7be72b509
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 22222222-2222-2222-2222-222222222222, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, label=Q1
#x1B[33mWARNING #x1B[0m app:validation.py:186 bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb: Required field missing
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_preview@example.com', 'employee_id': 'PREV001', 'mobile': '6655443311', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_preview'}
INFO:app:#x1F512 Password set for user: admin_preview
INFO:app:✅ User registered successfully: admin_preview (admin_preview@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_preview@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_preview@example.com
INFO:app:Login successful for employee user admin_preview@example.com
INFO:app:Issued JWT for user admin_preview (ID: 5dfe3c5d-6b9a-4c19-ba88-8ebe3791daa4), roles: ['admin']
INFO:app:Returning JSON response for user admin_preview
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_preview (ID: 5dfe3c5d-6b9a-4c19-ba88-8ebe3791daa4) is attempting to create a form with data: {'slug': 'prev-inv-form', 'title': 'Preview Invalid Form', 'versions': [{'sections': [{'id': '22222222-2222-2222-2222-222222222222', 'questions': [{'field_type': 'input', 'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 809fa2d6-8735-4791-8662-1ec7be72b509 created successfully by user admin_preview (ID: 5dfe3c5d-6b9a-4c19-ba88-8ebe3791daa4)
INFO:app:Received preview/validation request for form_id: 809fa2d6-8735-4791-8662-1ec7be72b509
INFO:app:Processing section: 22222222-2222-2222-2222-222222222222, repeatable=False
DEBUG:app:Checking question bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, label=Q1
WARNING:app:bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb: Required field missing

</system-err></testcase><testcase classname="tests.test_reordering" name="test_reorder_sections" time="0.499"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_order@example.com', 'employee_id': 'ORD001', 'mobile': '6655443322', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_order'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_order
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_order (admin_order@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_order@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_order@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_order@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_order (ID: a0ea22ed-6cbc-4e67-a504-79b87859ecd0), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_order
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_order (ID: a0ea22ed-6cbc-4e67-a504-79b87859ecd0) is attempting to create a form with data: {'slug': 'reorder-form', 'title': 'Reorder Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [], 'title': 'Section 1'}, {'id': '22222222-2222-2222-2222-222222222222', 'questions': [], 'title': 'Section 2'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form bc4137d8-6825-4d14-a2df-d0072557af36 created successfully by user admin_order (ID: a0ea22ed-6cbc-4e67-a504-79b87859ecd0)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_order@example.com', 'employee_id': 'ORD001', 'mobile': '6655443322', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_order'}
INFO:app:#x1F512 Password set for user: admin_order
INFO:app:✅ User registered successfully: admin_order (admin_order@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_order@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_order@example.com
INFO:app:Login successful for employee user admin_order@example.com
INFO:app:Issued JWT for user admin_order (ID: a0ea22ed-6cbc-4e67-a504-79b87859ecd0), roles: ['admin']
INFO:app:Returning JSON response for user admin_order
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_order (ID: a0ea22ed-6cbc-4e67-a504-79b87859ecd0) is attempting to create a form with data: {'slug': 'reorder-form', 'title': 'Reorder Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [], 'title': 'Section 1'}, {'id': '22222222-2222-2222-2222-222222222222', 'questions': [], 'title': 'Section 2'}], 'version': '1.0'}]}
INFO:app:Form bc4137d8-6825-4d14-a2df-d0072557af36 created successfully by user admin_order (ID: a0ea22ed-6cbc-4e67-a504-79b87859ecd0)

</system-err></testcase><testcase classname="tests.test_reordering" name="test_reorder_questions" time="0.500"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_order@example.com', 'employee_id': 'ORD001', 'mobile': '6655443322', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_order'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_order
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_order (admin_order@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_order@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_order@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_order@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_order (ID: 30ae5f8e-32fd-4794-a7c5-9014a7c5a5b6), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_order
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_order (ID: 30ae5f8e-32fd-4794-a7c5-9014a7c5a5b6) is attempting to create a form with data: {'slug': 'q-reorder-form', 'title': 'Question Reorder Form', 'versions': [{'sections': [{'id': '33333333-3333-3333-3333-333333333333', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'label': 'Q1'}, {'field_type': 'input', 'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'label': 'Q2'}, {'field_type': 'input', 'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'label': 'Q3'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form bdae6113-52ab-44fa-94f3-5e3a1854fa55 created successfully by user admin_order (ID: 30ae5f8e-32fd-4794-a7c5-9014a7c5a5b6)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_order@example.com', 'employee_id': 'ORD001', 'mobile': '6655443322', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_order'}
INFO:app:#x1F512 Password set for user: admin_order
INFO:app:✅ User registered successfully: admin_order (admin_order@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_order@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_order@example.com
INFO:app:Login successful for employee user admin_order@example.com
INFO:app:Issued JWT for user admin_order (ID: 30ae5f8e-32fd-4794-a7c5-9014a7c5a5b6), roles: ['admin']
INFO:app:Returning JSON response for user admin_order
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_order (ID: 30ae5f8e-32fd-4794-a7c5-9014a7c5a5b6) is attempting to create a form with data: {'slug': 'q-reorder-form', 'title': 'Question Reorder Form', 'versions': [{'sections': [{'id': '33333333-3333-3333-3333-333333333333', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'label': 'Q1'}, {'field_type': 'input', 'id': 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'label': 'Q2'}, {'field_type': 'input', 'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'label': 'Q3'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form bdae6113-52ab-44fa-94f3-5e3a1854fa55 created successfully by user admin_order (ID: 30ae5f8e-32fd-4794-a7c5-9014a7c5a5b6)

</system-err></testcase><testcase classname="tests.test_response_drafts" name="test_draft_lifecycle" time="0.497"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_drafts@example.com', 'employee_id': 'DRAFT001', 'mobile': '7788990011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_drafts'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_drafts
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_drafts (admin_drafts@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_drafts@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_drafts@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_drafts@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_drafts (ID: ae2bb6c1-7c20-459a-9c15-fc140207472f), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_drafts
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_drafts (ID: ae2bb6c1-7c20-459a-9c15-fc140207472f) is attempting to create a form with data: {'slug': 'draft-form', 'status': 'published', 'title': 'Draft Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form f27acf1b-330b-41ca-8540-d6b9f3e34f1b created successfully by user admin_drafts (ID: ae2bb6c1-7c20-459a-9c15-fc140207472f)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: f27acf1b-330b-41ca-8540-d6b9f3e34f1b
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: ae2bb6c1-7c20-459a-9c15-fc140207472f, Form title: Draft Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
#x1B[33mWARNING #x1B[0m app:validation.py:186 aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'error': 'Required field missing'}]
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: f27acf1b-330b-41ca-8540-d6b9f3e34f1b
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: ae2bb6c1-7c20-459a-9c15-fc140207472f, Form title: Draft Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=1d15d229-4a08-4bcf-b71e-f0da5ef0e5b7, is_draft=True
#x1B[32mINFO    #x1B[0m app:responses.py:306 Updating submission form=f27acf1b-330b-41ca-8540-d6b9f3e34f1b resp=1d15d229-4a08-4bcf-b71e-f0da5ef0e5b7
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:306 Updating submission form=f27acf1b-330b-41ca-8540-d6b9f3e34f1b resp=1d15d229-4a08-4bcf-b71e-f0da5ef0e5b7
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_drafts@example.com', 'employee_id': 'DRAFT001', 'mobile': '7788990011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_drafts'}
INFO:app:#x1F512 Password set for user: admin_drafts
INFO:app:✅ User registered successfully: admin_drafts (admin_drafts@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_drafts@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_drafts@example.com
INFO:app:Login successful for employee user admin_drafts@example.com
INFO:app:Issued JWT for user admin_drafts (ID: ae2bb6c1-7c20-459a-9c15-fc140207472f), roles: ['admin']
INFO:app:Returning JSON response for user admin_drafts
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_drafts (ID: ae2bb6c1-7c20-459a-9c15-fc140207472f) is attempting to create a form with data: {'slug': 'draft-form', 'status': 'published', 'title': 'Draft Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form f27acf1b-330b-41ca-8540-d6b9f3e34f1b created successfully by user admin_drafts (ID: ae2bb6c1-7c20-459a-9c15-fc140207472f)
INFO:app:Received submission for form_id: f27acf1b-330b-41ca-8540-d6b9f3e34f1b
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {}}
INFO:app:Current user: ae2bb6c1-7c20-459a-9c15-fc140207472f, Form title: Draft Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
WARNING:app:aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa: Required field missing
WARNING:app:Validation failed with errors: [{'id': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'error': 'Required field missing'}]
INFO:app:Received submission for form_id: f27acf1b-330b-41ca-8540-d6b9f3e34f1b
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {}}
INFO:app:Current user: ae2bb6c1-7c20-459a-9c15-fc140207472f, Form title: Draft Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
INFO:app:Submission saved: response_id=1d15d229-4a08-4bcf-b71e-f0da5ef0e5b7, is_draft=True
INFO:app:Updating submission form=f27acf1b-330b-41ca-8540-d6b9f3e34f1b resp=1d15d229-4a08-4bcf-b71e-f0da5ef0e5b7
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1
INFO:app:Updating submission form=f27acf1b-330b-41ca-8540-d6b9f3e34f1b resp=1d15d229-4a08-4bcf-b71e-f0da5ef0e5b7
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, label=Q1

</system-err></testcase><testcase classname="tests.test_response_drafts" name="test_draft_filtering" time="0.499"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_drafts@example.com', 'employee_id': 'DRAFT001', 'mobile': '7788990011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_drafts'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_drafts
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_drafts (admin_drafts@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_drafts@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_drafts@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_drafts@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_drafts (ID: 0cd9189f-4621-436e-a093-343580b1c56c), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_drafts
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_drafts (ID: 0cd9189f-4621-436e-a093-343580b1c56c) is attempting to create a form with data: {'slug': 'filter-form', 'status': 'published', 'title': 'Filter Form', 'versions': [{'sections': [], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 38b3b384-9ee8-4614-8f11-867163fe7afc created successfully by user admin_drafts (ID: 0cd9189f-4621-436e-a093-343580b1c56c)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 38b3b384-9ee8-4614-8f11-867163fe7afc
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 0cd9189f-4621-436e-a093-343580b1c56c, Form title: Filter Form
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=84f490b8-ab58-47a8-95d0-a875a72a21fc, is_draft=True
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 38b3b384-9ee8-4614-8f11-867163fe7afc
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 0cd9189f-4621-436e-a093-343580b1c56c, Form title: Filter Form
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=e921a8f2-6a54-4493-b2df-6d09f1803b39, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_drafts@example.com', 'employee_id': 'DRAFT001', 'mobile': '7788990011', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_drafts'}
INFO:app:#x1F512 Password set for user: admin_drafts
INFO:app:✅ User registered successfully: admin_drafts (admin_drafts@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_drafts@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_drafts@example.com
INFO:app:Login successful for employee user admin_drafts@example.com
INFO:app:Issued JWT for user admin_drafts (ID: 0cd9189f-4621-436e-a093-343580b1c56c), roles: ['admin']
INFO:app:Returning JSON response for user admin_drafts
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_drafts (ID: 0cd9189f-4621-436e-a093-343580b1c56c) is attempting to create a form with data: {'slug': 'filter-form', 'status': 'published', 'title': 'Filter Form', 'versions': [{'sections': [], 'version': '1.0'}]}
INFO:app:Form 38b3b384-9ee8-4614-8f11-867163fe7afc created successfully by user admin_drafts (ID: 0cd9189f-4621-436e-a093-343580b1c56c)
INFO:app:Received submission for form_id: 38b3b384-9ee8-4614-8f11-867163fe7afc
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 0cd9189f-4621-436e-a093-343580b1c56c, Form title: Filter Form
INFO:app:Submission saved: response_id=84f490b8-ab58-47a8-95d0-a875a72a21fc, is_draft=True
INFO:app:Received submission for form_id: 38b3b384-9ee8-4614-8f11-867163fe7afc
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 0cd9189f-4621-436e-a093-343580b1c56c, Form title: Filter Form
INFO:app:Submission saved: response_id=e921a8f2-6a54-4493-b2df-6d09f1803b39, is_draft=False

</system-err></testcase><testcase classname="tests.test_response_management" name="test_response_history_and_comments" time="0.506"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'resp_admin@example.com', 'mobile': '1112223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'resp_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: resp_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: resp_admin (resp_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'resp_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: resp_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user resp_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user resp_admin (ID: 5755ac0d-4e01-4024-941c-e882df3b880c), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user resp_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User resp_admin (ID: 5755ac0d-4e01-4024-941c-e882df3b880c) is attempting to create a form with data: {'id': '836e908a-2d76-403f-be7d-7b2ab61b9dbd', 'slug': 'hist-test-56a37c', 'status': 'published', 'title': 'History Test Form', 'versions': [{'sections': [{'id': 'bfc75717-f5a3-4aa2-ae46-c078c8964271', 'questions': [{'field_type': 'input', 'id': '6dbe8f0a-c4c1-4024-9f7e-eaa25b2527d8', 'label': 'Name'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 836e908a-2d76-403f-be7d-7b2ab61b9dbd created successfully by user resp_admin (ID: 5755ac0d-4e01-4024-941c-e882df3b880c)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 836e908a-2d76-403f-be7d-7b2ab61b9dbd
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'bfc75717-f5a3-4aa2-ae46-c078c8964271': {'6dbe8f0a-c4c1-4024-9f7e-eaa25b2527d8': 'Initial Name'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 5755ac0d-4e01-4024-941c-e882df3b880c, Form title: History Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: bfc75717-f5a3-4aa2-ae46-c078c8964271, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6dbe8f0a-c4c1-4024-9f7e-eaa25b2527d8, label=Name
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=fca7f1b6-66ee-48ca-9d14-f5fea94f1064, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:306 Updating submission form=836e908a-2d76-403f-be7d-7b2ab61b9dbd resp=fca7f1b6-66ee-48ca-9d14-f5fea94f1064
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: bfc75717-f5a3-4aa2-ae46-c078c8964271, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6dbe8f0a-c4c1-4024-9f7e-eaa25b2527d8, label=Name
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'resp_admin@example.com', 'mobile': '1112223334', 'roles': ['admin'], 'user_type': 'employee', 'username': 'resp_admin'}
INFO:app:#x1F512 Password set for user: resp_admin
INFO:app:✅ User registered successfully: resp_admin (resp_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'resp_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: resp_admin@example.com
INFO:app:Login successful for employee user resp_admin@example.com
INFO:app:Issued JWT for user resp_admin (ID: 5755ac0d-4e01-4024-941c-e882df3b880c), roles: ['admin']
INFO:app:Returning JSON response for user resp_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User resp_admin (ID: 5755ac0d-4e01-4024-941c-e882df3b880c) is attempting to create a form with data: {'id': '836e908a-2d76-403f-be7d-7b2ab61b9dbd', 'slug': 'hist-test-56a37c', 'status': 'published', 'title': 'History Test Form', 'versions': [{'sections': [{'id': 'bfc75717-f5a3-4aa2-ae46-c078c8964271', 'questions': [{'field_type': 'input', 'id': '6dbe8f0a-c4c1-4024-9f7e-eaa25b2527d8', 'label': 'Name'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 836e908a-2d76-403f-be7d-7b2ab61b9dbd created successfully by user resp_admin (ID: 5755ac0d-4e01-4024-941c-e882df3b880c)
INFO:app:Received submission for form_id: 836e908a-2d76-403f-be7d-7b2ab61b9dbd
INFO:app:Parsed JSON submission: {'bfc75717-f5a3-4aa2-ae46-c078c8964271': {'6dbe8f0a-c4c1-4024-9f7e-eaa25b2527d8': 'Initial Name'}}
INFO:app:Current user: 5755ac0d-4e01-4024-941c-e882df3b880c, Form title: History Test Form
INFO:app:Processing section: bfc75717-f5a3-4aa2-ae46-c078c8964271, repeatable=False
DEBUG:app:Checking question 6dbe8f0a-c4c1-4024-9f7e-eaa25b2527d8, label=Name
INFO:app:Submission saved: response_id=fca7f1b6-66ee-48ca-9d14-f5fea94f1064, is_draft=False
INFO:app:Updating submission form=836e908a-2d76-403f-be7d-7b2ab61b9dbd resp=fca7f1b6-66ee-48ca-9d14-f5fea94f1064
INFO:app:Processing section: bfc75717-f5a3-4aa2-ae46-c078c8964271, repeatable=False
DEBUG:app:Checking question 6dbe8f0a-c4c1-4024-9f7e-eaa25b2527d8, label=Name

</system-err></testcase><testcase classname="tests.test_response_merge" name="test_response_merge" time="0.503"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'merge_admin@example.com', 'mobile': '9990001112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'merge_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: merge_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: merge_admin (merge_admin@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'merge_admin@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: merge_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user merge_admin@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user merge_admin (ID: 00bca61b-6214-49b0-a042-542ee4a23d4d), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user merge_admin
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User merge_admin (ID: 00bca61b-6214-49b0-a042-542ee4a23d4d) is attempting to create a form with data: {'id': 'f6b28e1b-38fa-4aff-8cf5-e57f5d5211da', 'slug': 'merge-test-ca63d4', 'status': 'published', 'title': 'Merge Test Form', 'versions': [{'sections': [{'id': '22dc03c1-d176-46e2-99a5-694df686a615', 'questions': [{'field_type': 'input', 'id': '6071227c-1e94-400f-a4ad-d183d60d4d9e', 'label': 'Q1'}, {'field_type': 'input', 'id': '6e347932-2502-4a75-80c2-e57d8a9e5e56', 'label': 'Q2'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form f6b28e1b-38fa-4aff-8cf5-e57f5d5211da created successfully by user merge_admin (ID: 00bca61b-6214-49b0-a042-542ee4a23d4d)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: f6b28e1b-38fa-4aff-8cf5-e57f5d5211da
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'22dc03c1-d176-46e2-99a5-694df686a615': {'6071227c-1e94-400f-a4ad-d183d60d4d9e': 'Val 1'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 00bca61b-6214-49b0-a042-542ee4a23d4d, Form title: Merge Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 22dc03c1-d176-46e2-99a5-694df686a615, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6071227c-1e94-400f-a4ad-d183d60d4d9e, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6e347932-2502-4a75-80c2-e57d8a9e5e56, label=Q2
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=7daed586-fb82-4420-835f-8a91f9a71b6b, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: f6b28e1b-38fa-4aff-8cf5-e57f5d5211da
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'22dc03c1-d176-46e2-99a5-694df686a615': {'6e347932-2502-4a75-80c2-e57d8a9e5e56': 'Val 2'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 00bca61b-6214-49b0-a042-542ee4a23d4d, Form title: Merge Test Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 22dc03c1-d176-46e2-99a5-694df686a615, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6071227c-1e94-400f-a4ad-d183d60d4d9e, label=Q1
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 6e347932-2502-4a75-80c2-e57d8a9e5e56, label=Q2
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=60f40e69-3334-43d6-ab1c-f672705e0ce6, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'merge_admin@example.com', 'mobile': '9990001112', 'roles': ['admin'], 'user_type': 'employee', 'username': 'merge_admin'}
INFO:app:#x1F512 Password set for user: merge_admin
INFO:app:✅ User registered successfully: merge_admin (merge_admin@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'merge_admin@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: merge_admin@example.com
INFO:app:Login successful for employee user merge_admin@example.com
INFO:app:Issued JWT for user merge_admin (ID: 00bca61b-6214-49b0-a042-542ee4a23d4d), roles: ['admin']
INFO:app:Returning JSON response for user merge_admin
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User merge_admin (ID: 00bca61b-6214-49b0-a042-542ee4a23d4d) is attempting to create a form with data: {'id': 'f6b28e1b-38fa-4aff-8cf5-e57f5d5211da', 'slug': 'merge-test-ca63d4', 'status': 'published', 'title': 'Merge Test Form', 'versions': [{'sections': [{'id': '22dc03c1-d176-46e2-99a5-694df686a615', 'questions': [{'field_type': 'input', 'id': '6071227c-1e94-400f-a4ad-d183d60d4d9e', 'label': 'Q1'}, {'field_type': 'input', 'id': '6e347932-2502-4a75-80c2-e57d8a9e5e56', 'label': 'Q2'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form f6b28e1b-38fa-4aff-8cf5-e57f5d5211da created successfully by user merge_admin (ID: 00bca61b-6214-49b0-a042-542ee4a23d4d)
INFO:app:Received submission for form_id: f6b28e1b-38fa-4aff-8cf5-e57f5d5211da
INFO:app:Parsed JSON submission: {'22dc03c1-d176-46e2-99a5-694df686a615': {'6071227c-1e94-400f-a4ad-d183d60d4d9e': 'Val 1'}}
INFO:app:Current user: 00bca61b-6214-49b0-a042-542ee4a23d4d, Form title: Merge Test Form
INFO:app:Processing section: 22dc03c1-d176-46e2-99a5-694df686a615, repeatable=False
DEBUG:app:Checking question 6071227c-1e94-400f-a4ad-d183d60d4d9e, label=Q1
DEBUG:app:Checking question 6e347932-2502-4a75-80c2-e57d8a9e5e56, label=Q2
INFO:app:Submission saved: response_id=7daed586-fb82-4420-835f-8a91f9a71b6b, is_draft=False
INFO:app:Received submission for form_id: f6b28e1b-38fa-4aff-8cf5-e57f5d5211da
INFO:app:Parsed JSON submission: {'22dc03c1-d176-46e2-99a5-694df686a615': {'6e347932-2502-4a75-80c2-e57d8a9e5e56': 'Val 2'}}
INFO:app:Current user: 00bca61b-6214-49b0-a042-542ee4a23d4d, Form title: Merge Test Form
INFO:app:Processing section: 22dc03c1-d176-46e2-99a5-694df686a615, repeatable=False
DEBUG:app:Checking question 6071227c-1e94-400f-a4ad-d183d60d4d9e, label=Q1
DEBUG:app:Checking question 6e347932-2502-4a75-80c2-e57d8a9e5e56, label=Q2
INFO:app:Submission saved: response_id=60f40e69-3334-43d6-ab1c-f672705e0ce6, is_draft=False

</system-err></testcase><testcase classname="tests.test_response_status" name="test_response_status_workflow" time="0.990"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'status_admin_c98318@test.com', 'employee_id': 'EMP_352451', 'mobile': '9999575316', 'roles': ['admin'], 'user_type': 'employee', 'username': 'status_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: status_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: status_admin (status_admin_c98318@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'status_admin_c98318@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: status_admin_c98318@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user status_admin_c98318@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user status_admin (ID: 0ba85ba8-088e-4b71-b066-c6c9e2a95272), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user status_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'status_user_f370f0@test.com', 'employee_id': 'EMP_105017', 'mobile': '8883739372', 'roles': ['user'], 'user_type': 'employee', 'username': 'status_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: status_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: status_user (status_user_f370f0@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'status_user_f370f0@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: status_user_f370f0@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user status_user_f370f0@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user status_user (ID: d182895d-056c-40d6-a370-42b0d6b07190), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user status_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User status_admin (ID: 0ba85ba8-088e-4b71-b066-c6c9e2a95272) is attempting to create a form with data: {'is_public': True, 'slug': 'status-form-50189b', 'status': 'published', 'title': 'Status Workflow Form', 'versions': [{'sections': [{'id': 'ba530530-77bc-4469-ab2e-aa5b86ff315f', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 3d974cb6-cdd9-4fe8-a135-de38b656a9f9 created successfully by user status_admin (ID: 0ba85ba8-088e-4b71-b066-c6c9e2a95272)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 3d974cb6-cdd9-4fe8-a135-de38b656a9f9
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'foo': 'bar'}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: d182895d-056c-40d6-a370-42b0d6b07190, Form title: Status Workflow Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: ba530530-77bc-4469-ab2e-aa5b86ff315f, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=6516cf8a-4a5b-4fcc-8681-a134f7645163, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'status_admin_c98318@test.com', 'employee_id': 'EMP_352451', 'mobile': '9999575316', 'roles': ['admin'], 'user_type': 'employee', 'username': 'status_admin'}
INFO:app:#x1F512 Password set for user: status_admin
INFO:app:✅ User registered successfully: status_admin (status_admin_c98318@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'status_admin_c98318@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: status_admin_c98318@test.com
INFO:app:Login successful for employee user status_admin_c98318@test.com
INFO:app:Issued JWT for user status_admin (ID: 0ba85ba8-088e-4b71-b066-c6c9e2a95272), roles: ['admin']
INFO:app:Returning JSON response for user status_admin
INFO:app:Received registration data: {'email': 'status_user_f370f0@test.com', 'employee_id': 'EMP_105017', 'mobile': '8883739372', 'roles': ['user'], 'user_type': 'employee', 'username': 'status_user'}
INFO:app:#x1F512 Password set for user: status_user
INFO:app:✅ User registered successfully: status_user (status_user_f370f0@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'status_user_f370f0@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: status_user_f370f0@test.com
INFO:app:Login successful for employee user status_user_f370f0@test.com
INFO:app:Issued JWT for user status_user (ID: d182895d-056c-40d6-a370-42b0d6b07190), roles: ['user']
INFO:app:Returning JSON response for user status_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User status_admin (ID: 0ba85ba8-088e-4b71-b066-c6c9e2a95272) is attempting to create a form with data: {'is_public': True, 'slug': 'status-form-50189b', 'status': 'published', 'title': 'Status Workflow Form', 'versions': [{'sections': [{'id': 'ba530530-77bc-4469-ab2e-aa5b86ff315f', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 3d974cb6-cdd9-4fe8-a135-de38b656a9f9 created successfully by user status_admin (ID: 0ba85ba8-088e-4b71-b066-c6c9e2a95272)
INFO:app:Received submission for form_id: 3d974cb6-cdd9-4fe8-a135-de38b656a9f9
INFO:app:Parsed JSON submission: {'foo': 'bar'}
INFO:app:Current user: d182895d-056c-40d6-a370-42b0d6b07190, Form title: Status Workflow Form
INFO:app:Processing section: ba530530-77bc-4469-ab2e-aa5b86ff315f, repeatable=False
INFO:app:Submission saved: response_id=6516cf8a-4a5b-4fcc-8681-a134f7645163, is_draft=False

</system-err></testcase><testcase classname="tests.test_responses" name="test_submit_response_success" time="0.996"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: 38c5ddc1-36fd-45b5-b4fa-4da6f79aa560), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 19d7970d-49bf-4b47-9069-813327fb80f9), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: 38c5ddc1-36fd-45b5-b4fa-4da6f79aa560) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-form', 'status': 'published', 'title': 'Published Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': '22222222-2222-2222-2222-222222222222', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 37db1705-45c0-4ed5-837b-412cd39ca069 created successfully by user admin_resp (ID: 38c5ddc1-36fd-45b5-b4fa-4da6f79aa560)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 37db1705-45c0-4ed5-837b-412cd39ca069
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'Answer 1'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 19d7970d-49bf-4b47-9069-813327fb80f9, Form title: Published Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 22222222-2222-2222-2222-222222222222, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=14757a61-15d2-4d20-9d1d-aaea86aacbe4, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: 38c5ddc1-36fd-45b5-b4fa-4da6f79aa560), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 19d7970d-49bf-4b47-9069-813327fb80f9), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: 38c5ddc1-36fd-45b5-b4fa-4da6f79aa560) is attempting to create a form with data: {'is_public': True, 'slug': 'pub-form', 'status': 'published', 'title': 'Published Form', 'versions': [{'sections': [{'id': '11111111-1111-1111-1111-111111111111', 'questions': [{'field_type': 'input', 'id': '22222222-2222-2222-2222-222222222222', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 37db1705-45c0-4ed5-837b-412cd39ca069 created successfully by user admin_resp (ID: 38c5ddc1-36fd-45b5-b4fa-4da6f79aa560)
INFO:app:Received submission for form_id: 37db1705-45c0-4ed5-837b-412cd39ca069
INFO:app:Parsed JSON submission: {'11111111-1111-1111-1111-111111111111': {'22222222-2222-2222-2222-222222222222': 'Answer 1'}}
INFO:app:Current user: 19d7970d-49bf-4b47-9069-813327fb80f9, Form title: Published Form
INFO:app:Processing section: 11111111-1111-1111-1111-111111111111, repeatable=False
DEBUG:app:Checking question 22222222-2222-2222-2222-222222222222, label=Q1
INFO:app:Submission saved: response_id=14757a61-15d2-4d20-9d1d-aaea86aacbe4, is_draft=False

</system-err></testcase><testcase classname="tests.test_responses" name="test_submit_response_validation_failure" time="0.984"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: fae74b1a-dfcc-4948-b5cd-29ec714512bb), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 9cd96a5c-8f13-4be4-83c5-a78a83389c63), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: fae74b1a-dfcc-4948-b5cd-29ec714512bb) is attempting to create a form with data: {'is_public': True, 'slug': 'val-form', 'status': 'published', 'title': 'Val Form', 'versions': [{'sections': [{'id': '33333333-3333-3333-3333-333333333333', 'questions': [{'field_type': 'input', 'id': '44444444-4444-4444-4444-444444444444', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 28af068e-bf4c-47c3-ae6f-d9343220a568 created successfully by user admin_resp (ID: fae74b1a-dfcc-4948-b5cd-29ec714512bb)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 28af068e-bf4c-47c3-ae6f-d9343220a568
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'33333333-3333-3333-3333-333333333333': {'44444444-4444-4444-4444-444444444444': ''}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 9cd96a5c-8f13-4be4-83c5-a78a83389c63, Form title: Val Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 33333333-3333-3333-3333-333333333333, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 44444444-4444-4444-4444-444444444444, label=Q1
#x1B[33mWARNING #x1B[0m app:validation.py:186 44444444-4444-4444-4444-444444444444: Required field missing
#x1B[33mWARNING #x1B[0m app:responses.py:112 Validation failed with errors: [{'id': '44444444-4444-4444-4444-444444444444', 'error': 'Required field missing'}]
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: fae74b1a-dfcc-4948-b5cd-29ec714512bb), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 9cd96a5c-8f13-4be4-83c5-a78a83389c63), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: fae74b1a-dfcc-4948-b5cd-29ec714512bb) is attempting to create a form with data: {'is_public': True, 'slug': 'val-form', 'status': 'published', 'title': 'Val Form', 'versions': [{'sections': [{'id': '33333333-3333-3333-3333-333333333333', 'questions': [{'field_type': 'input', 'id': '44444444-4444-4444-4444-444444444444', 'is_required': True, 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 28af068e-bf4c-47c3-ae6f-d9343220a568 created successfully by user admin_resp (ID: fae74b1a-dfcc-4948-b5cd-29ec714512bb)
INFO:app:Received submission for form_id: 28af068e-bf4c-47c3-ae6f-d9343220a568
INFO:app:Parsed JSON submission: {'33333333-3333-3333-3333-333333333333': {'44444444-4444-4444-4444-444444444444': ''}}
INFO:app:Current user: 9cd96a5c-8f13-4be4-83c5-a78a83389c63, Form title: Val Form
INFO:app:Processing section: 33333333-3333-3333-3333-333333333333, repeatable=False
DEBUG:app:Checking question 44444444-4444-4444-4444-444444444444, label=Q1
WARNING:app:44444444-4444-4444-4444-444444444444: Required field missing
WARNING:app:Validation failed with errors: [{'id': '44444444-4444-4444-4444-444444444444', 'error': 'Required field missing'}]

</system-err></testcase><testcase classname="tests.test_responses" name="test_submit_to_draft_form" time="0.987"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: a9adeb7e-08ec-4059-918d-4462cdcea6d5), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: fee428f8-efb0-4634-8bc8-6d0d8e13c080), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: a9adeb7e-08ec-4059-918d-4462cdcea6d5) is attempting to create a form with data: {'is_public': True, 'slug': 'draft-form', 'status': 'draft', 'title': 'Draft Form'}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form c263bbfd-14f2-49a0-b37c-6e00b18cd37e created successfully by user admin_resp (ID: a9adeb7e-08ec-4059-918d-4462cdcea6d5)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: c263bbfd-14f2-49a0-b37c-6e00b18cd37e
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[33mWARNING #x1B[0m app:responses.py:80 Attempted submission to non-published form c263bbfd-14f2-49a0-b37c-6e00b18cd37e (status: draft)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: a9adeb7e-08ec-4059-918d-4462cdcea6d5), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: fee428f8-efb0-4634-8bc8-6d0d8e13c080), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: a9adeb7e-08ec-4059-918d-4462cdcea6d5) is attempting to create a form with data: {'is_public': True, 'slug': 'draft-form', 'status': 'draft', 'title': 'Draft Form'}
INFO:app:Form c263bbfd-14f2-49a0-b37c-6e00b18cd37e created successfully by user admin_resp (ID: a9adeb7e-08ec-4059-918d-4462cdcea6d5)
INFO:app:Received submission for form_id: c263bbfd-14f2-49a0-b37c-6e00b18cd37e
INFO:app:Parsed JSON submission: {}
WARNING:app:Attempted submission to non-published form c263bbfd-14f2-49a0-b37c-6e00b18cd37e (status: draft)

</system-err></testcase><testcase classname="tests.test_responses" name="test_search_responses" time="0.993"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: 5fcae22f-5b7b-4218-ae79-502c85e9778b), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 667a84b3-c60b-4ac2-81cb-35873389c779), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: 5fcae22f-5b7b-4218-ae79-502c85e9778b) is attempting to create a form with data: {'is_public': True, 'slug': 'search-form', 'status': 'published', 'title': 'Search Form', 'versions': [{'sections': [{'id': '55555555-5555-5555-5555-555555555555', 'questions': [{'field_type': 'input', 'id': '66666666-6666-6666-6666-666666666666', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form c9b143e9-bbdf-47a3-a6cd-21b52730c3e0 created successfully by user admin_resp (ID: 5fcae22f-5b7b-4218-ae79-502c85e9778b)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: c9b143e9-bbdf-47a3-a6cd-21b52730c3e0
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'55555555-5555-5555-5555-555555555555': {'66666666-6666-6666-6666-666666666666': 'Apple'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 667a84b3-c60b-4ac2-81cb-35873389c779, Form title: Search Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 55555555-5555-5555-5555-555555555555, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 66666666-6666-6666-6666-666666666666, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=964aec9c-e20f-43ae-921a-dd7cde7a73d0, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: c9b143e9-bbdf-47a3-a6cd-21b52730c3e0
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'55555555-5555-5555-5555-555555555555': {'66666666-6666-6666-6666-666666666666': 'Banana'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 667a84b3-c60b-4ac2-81cb-35873389c779, Form title: Search Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 55555555-5555-5555-5555-555555555555, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 66666666-6666-6666-6666-666666666666, label=Q1
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=13fc1bc2-4637-48e4-bd96-dc6bd95eb503, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:585 User admin_resp (ID: 5fcae22f-5b7b-4218-ae79-502c85e9778b) is searching responses for form ID: c9b143e9-bbdf-47a3-a6cd-21b52730c3e0
#x1B[35mDEBUG   #x1B[0m app:responses.py:590 Received filters: {'data': {'66666666-6666-6666-6666-666666666666': {'op': 'eq', 'type': 'string', 'value': 'Apple'}}}
#x1B[35mDEBUG   #x1B[0m app:responses.py:619 Applying filter on question ID 66666666-6666-6666-6666-666666666666: {'op': 'eq', 'type': 'string', 'value': 'Apple'}
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: 5fcae22f-5b7b-4218-ae79-502c85e9778b), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 667a84b3-c60b-4ac2-81cb-35873389c779), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: 5fcae22f-5b7b-4218-ae79-502c85e9778b) is attempting to create a form with data: {'is_public': True, 'slug': 'search-form', 'status': 'published', 'title': 'Search Form', 'versions': [{'sections': [{'id': '55555555-5555-5555-5555-555555555555', 'questions': [{'field_type': 'input', 'id': '66666666-6666-6666-6666-666666666666', 'label': 'Q1'}], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form c9b143e9-bbdf-47a3-a6cd-21b52730c3e0 created successfully by user admin_resp (ID: 5fcae22f-5b7b-4218-ae79-502c85e9778b)
INFO:app:Received submission for form_id: c9b143e9-bbdf-47a3-a6cd-21b52730c3e0
INFO:app:Parsed JSON submission: {'55555555-5555-5555-5555-555555555555': {'66666666-6666-6666-6666-666666666666': 'Apple'}}
INFO:app:Current user: 667a84b3-c60b-4ac2-81cb-35873389c779, Form title: Search Form
INFO:app:Processing section: 55555555-5555-5555-5555-555555555555, repeatable=False
DEBUG:app:Checking question 66666666-6666-6666-6666-666666666666, label=Q1
INFO:app:Submission saved: response_id=964aec9c-e20f-43ae-921a-dd7cde7a73d0, is_draft=False
INFO:app:Received submission for form_id: c9b143e9-bbdf-47a3-a6cd-21b52730c3e0
INFO:app:Parsed JSON submission: {'55555555-5555-5555-5555-555555555555': {'66666666-6666-6666-6666-666666666666': 'Banana'}}
INFO:app:Current user: 667a84b3-c60b-4ac2-81cb-35873389c779, Form title: Search Form
INFO:app:Processing section: 55555555-5555-5555-5555-555555555555, repeatable=False
DEBUG:app:Checking question 66666666-6666-6666-6666-666666666666, label=Q1
INFO:app:Submission saved: response_id=13fc1bc2-4637-48e4-bd96-dc6bd95eb503, is_draft=False
INFO:app:User admin_resp (ID: 5fcae22f-5b7b-4218-ae79-502c85e9778b) is searching responses for form ID: c9b143e9-bbdf-47a3-a6cd-21b52730c3e0
DEBUG:app:Received filters: {'data': {'66666666-6666-6666-6666-666666666666': {'op': 'eq', 'type': 'string', 'value': 'Apple'}}}
DEBUG:app:Applying filter on question ID 66666666-6666-6666-6666-666666666666: {'op': 'eq', 'type': 'string', 'value': 'Apple'}

</system-err></testcase><testcase classname="tests.test_responses" name="test_archive_response" time="1.005"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_resp (admin_resp@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_resp@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_resp (ID: f62650f8-eb50-48cd-9546-6c6a38ab7ae8), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_resp
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: submitter
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: submitter (sub@ex.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sub@ex.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user submitter (ID: 267230c7-fb86-43bf-a0c5-1ad327418a0a), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user submitter
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_resp (ID: f62650f8-eb50-48cd-9546-6c6a38ab7ae8) is attempting to create a form with data: {'is_public': True, 'slug': 'arc-form', 'status': 'published', 'title': 'Arc Form', 'versions': [{'sections': [{'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 07071ce7-5e17-4c7b-b85c-c60f847c770c created successfully by user admin_resp (ID: f62650f8-eb50-48cd-9546-6c6a38ab7ae8)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 07071ce7-5e17-4c7b-b85c-c60f847c770c
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 267230c7-fb86-43bf-a0c5-1ad327418a0a, Form title: Arc Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: cccccccc-cccc-cccc-cccc-cccccccccccc, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=04fd3e39-02a6-494d-9870-c49461e964cc, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_resp@ex.com', 'employee_id': 'ARESP1', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_resp'}
INFO:app:#x1F512 Password set for user: admin_resp
INFO:app:✅ User registered successfully: admin_resp (admin_resp@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_resp@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: admin_resp@ex.com
INFO:app:Login successful for employee user admin_resp@ex.com
INFO:app:Issued JWT for user admin_resp (ID: f62650f8-eb50-48cd-9546-6c6a38ab7ae8), roles: ['admin']
INFO:app:Returning JSON response for user admin_resp
INFO:app:Received registration data: {'email': 'sub@ex.com', 'employee_id': 'SUB1', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'submitter'}
INFO:app:#x1F512 Password set for user: submitter
INFO:app:✅ User registered successfully: submitter (sub@ex.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sub@ex.com', 'password': 'Pass'}
INFO:app:Employee login attempt with identifier: sub@ex.com
INFO:app:Login successful for employee user sub@ex.com
INFO:app:Issued JWT for user submitter (ID: 267230c7-fb86-43bf-a0c5-1ad327418a0a), roles: ['user']
INFO:app:Returning JSON response for user submitter
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_resp (ID: f62650f8-eb50-48cd-9546-6c6a38ab7ae8) is attempting to create a form with data: {'is_public': True, 'slug': 'arc-form', 'status': 'published', 'title': 'Arc Form', 'versions': [{'sections': [{'id': 'cccccccc-cccc-cccc-cccc-cccccccccccc', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 07071ce7-5e17-4c7b-b85c-c60f847c770c created successfully by user admin_resp (ID: f62650f8-eb50-48cd-9546-6c6a38ab7ae8)
INFO:app:Received submission for form_id: 07071ce7-5e17-4c7b-b85c-c60f847c770c
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 267230c7-fb86-43bf-a0c5-1ad327418a0a, Form title: Arc Form
INFO:app:Processing section: cccccccc-cccc-cccc-cccc-cccccccccccc, repeatable=False
INFO:app:Submission saved: response_id=04fd3e39-02a6-494d-9870-c49461e964cc, is_draft=False

</system-err></testcase><testcase classname="tests.test_scheduled_publishing" name="test_scheduled_publishing_future" time="1.013"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sched_admin_8e6376@test.com', 'employee_id': 'EMP_226791', 'mobile': '7725783257', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sched_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sched_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sched_admin (sched_admin_8e6376@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sched_admin_8e6376@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sched_admin_8e6376@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sched_admin_8e6376@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sched_admin (ID: 8d78b9be-8a6d-40b9-b4ca-da2e6e4f6640), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sched_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sched_user_39e7a8@test.com', 'employee_id': 'EMP_689420', 'mobile': '6656171770', 'roles': ['user'], 'user_type': 'employee', 'username': 'sched_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sched_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sched_user (sched_user_39e7a8@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sched_user_39e7a8@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sched_user_39e7a8@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sched_user_39e7a8@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sched_user (ID: f4299a25-ff6d-4373-8bb3-b1248e568bbe), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sched_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User sched_admin (ID: 8d78b9be-8a6d-40b9-b4ca-da2e6e4f6640) is attempting to create a form with data: {'is_public': True, 'publish_at': '2026-01-13T06:30:46', 'slug': 'future-form-32da0d', 'status': 'published', 'title': 'Future Form', 'versions': [{'sections': [{'id': '2259c386-02f9-40fa-a62d-58ce4999fcc3', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 6c75f87a-5895-4be1-b052-81da366a079a created successfully by user sched_admin (ID: 8d78b9be-8a6d-40b9-b4ca-da2e6e4f6640)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 6c75f87a-5895-4be1-b052-81da366a079a
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[33mWARNING #x1B[0m app:responses.py:93 Attempted submission to future scheduled form 6c75f87a-5895-4be1-b052-81da366a079a (publish at: 2026-01-13 06:30:46)
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'sched_admin_8e6376@test.com', 'employee_id': 'EMP_226791', 'mobile': '7725783257', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sched_admin'}
INFO:app:#x1F512 Password set for user: sched_admin
INFO:app:✅ User registered successfully: sched_admin (sched_admin_8e6376@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sched_admin_8e6376@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: sched_admin_8e6376@test.com
INFO:app:Login successful for employee user sched_admin_8e6376@test.com
INFO:app:Issued JWT for user sched_admin (ID: 8d78b9be-8a6d-40b9-b4ca-da2e6e4f6640), roles: ['admin']
INFO:app:Returning JSON response for user sched_admin
INFO:app:Received registration data: {'email': 'sched_user_39e7a8@test.com', 'employee_id': 'EMP_689420', 'mobile': '6656171770', 'roles': ['user'], 'user_type': 'employee', 'username': 'sched_user'}
INFO:app:#x1F512 Password set for user: sched_user
INFO:app:✅ User registered successfully: sched_user (sched_user_39e7a8@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sched_user_39e7a8@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: sched_user_39e7a8@test.com
INFO:app:Login successful for employee user sched_user_39e7a8@test.com
INFO:app:Issued JWT for user sched_user (ID: f4299a25-ff6d-4373-8bb3-b1248e568bbe), roles: ['user']
INFO:app:Returning JSON response for user sched_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User sched_admin (ID: 8d78b9be-8a6d-40b9-b4ca-da2e6e4f6640) is attempting to create a form with data: {'is_public': True, 'publish_at': '2026-01-13T06:30:46', 'slug': 'future-form-32da0d', 'status': 'published', 'title': 'Future Form', 'versions': [{'sections': [{'id': '2259c386-02f9-40fa-a62d-58ce4999fcc3', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 6c75f87a-5895-4be1-b052-81da366a079a created successfully by user sched_admin (ID: 8d78b9be-8a6d-40b9-b4ca-da2e6e4f6640)
INFO:app:Received submission for form_id: 6c75f87a-5895-4be1-b052-81da366a079a
INFO:app:Parsed JSON submission: {}
WARNING:app:Attempted submission to future scheduled form 6c75f87a-5895-4be1-b052-81da366a079a (publish at: 2026-01-13 06:30:46)

</system-err></testcase><testcase classname="tests.test_scheduled_publishing" name="test_scheduled_publishing_past" time="1.047"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sched_admin_76892d@test.com', 'employee_id': 'EMP_fc9420', 'mobile': '7702559069', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sched_admin'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sched_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sched_admin (sched_admin_76892d@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sched_admin_76892d@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sched_admin_76892d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sched_admin_76892d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sched_admin (ID: e2313806-413c-400d-94d9-dd324d882396), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sched_admin
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'sched_user_ad8b5d@test.com', 'employee_id': 'EMP_03db22', 'mobile': '6678195329', 'roles': ['user'], 'user_type': 'employee', 'username': 'sched_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: sched_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: sched_user (sched_user_ad8b5d@test.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'sched_user_ad8b5d@test.com', 'password': 'SecurePassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: sched_user_ad8b5d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user sched_user_ad8b5d@test.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user sched_user (ID: 1bcd9dd2-3e6c-46be-943c-9dfd67729f54), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user sched_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User sched_admin (ID: e2313806-413c-400d-94d9-dd324d882396) is attempting to create a form with data: {'is_public': True, 'publish_at': '2026-01-11T06:30:47', 'slug': 'past-form-262e5c', 'status': 'published', 'submitters': [], 'title': 'Past Form', 'versions': [{'sections': [{'id': 'e6199d41-0164-41b2-b8e7-491d34c9ca32', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 9c2eef84-258c-4231-99fd-7d35f1cc5b1e created successfully by user sched_admin (ID: e2313806-413c-400d-94d9-dd324d882396)
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: 9c2eef84-258c-4231-99fd-7d35f1cc5b1e
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 1bcd9dd2-3e6c-46be-943c-9dfd67729f54, Form title: Past Form
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: e6199d41-0164-41b2-b8e7-491d34c9ca32, repeatable=False
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=ac9268de-961f-43b2-8e1b-cb6c3540345a, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'sched_admin_76892d@test.com', 'employee_id': 'EMP_fc9420', 'mobile': '7702559069', 'roles': ['admin'], 'user_type': 'employee', 'username': 'sched_admin'}
INFO:app:#x1F512 Password set for user: sched_admin
INFO:app:✅ User registered successfully: sched_admin (sched_admin_76892d@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sched_admin_76892d@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: sched_admin_76892d@test.com
INFO:app:Login successful for employee user sched_admin_76892d@test.com
INFO:app:Issued JWT for user sched_admin (ID: e2313806-413c-400d-94d9-dd324d882396), roles: ['admin']
INFO:app:Returning JSON response for user sched_admin
INFO:app:Received registration data: {'email': 'sched_user_ad8b5d@test.com', 'employee_id': 'EMP_03db22', 'mobile': '6678195329', 'roles': ['user'], 'user_type': 'employee', 'username': 'sched_user'}
INFO:app:#x1F512 Password set for user: sched_user
INFO:app:✅ User registered successfully: sched_user (sched_user_ad8b5d@test.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'sched_user_ad8b5d@test.com', 'password': 'SecurePassword123'}
INFO:app:Employee login attempt with identifier: sched_user_ad8b5d@test.com
INFO:app:Login successful for employee user sched_user_ad8b5d@test.com
INFO:app:Issued JWT for user sched_user (ID: 1bcd9dd2-3e6c-46be-943c-9dfd67729f54), roles: ['user']
INFO:app:Returning JSON response for user sched_user
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User sched_admin (ID: e2313806-413c-400d-94d9-dd324d882396) is attempting to create a form with data: {'is_public': True, 'publish_at': '2026-01-11T06:30:47', 'slug': 'past-form-262e5c', 'status': 'published', 'submitters': [], 'title': 'Past Form', 'versions': [{'sections': [{'id': 'e6199d41-0164-41b2-b8e7-491d34c9ca32', 'questions': [], 'title': 'S1'}], 'version': '1.0'}]}
INFO:app:Form 9c2eef84-258c-4231-99fd-7d35f1cc5b1e created successfully by user sched_admin (ID: e2313806-413c-400d-94d9-dd324d882396)
INFO:app:Received submission for form_id: 9c2eef84-258c-4231-99fd-7d35f1cc5b1e
INFO:app:Parsed JSON submission: {}
INFO:app:Current user: 1bcd9dd2-3e6c-46be-943c-9dfd67729f54, Form title: Past Form
INFO:app:Processing section: e6199d41-0164-41b2-b8e7-491d34c9ca32, repeatable=False
INFO:app:Submission saved: response_id=ac9268de-961f-43b2-8e1b-cb6c3540345a, is_draft=False

</system-err></testcase><testcase classname="tests.test_user" name="test_list_users_admin" time="0.492"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_test@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 11969f0e-962c-4dd3-8db6-b933965e3c73), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_test@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_test@example.com
INFO:app:Login successful for employee user admin_test@example.com
INFO:app:Issued JWT for user admin_user (ID: 11969f0e-962c-4dd3-8db6-b933965e3c73), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_user" name="test_list_users_unauthorized" time="0.494"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'reg@example.com', 'employee_id': 'UR001', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'reg_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: reg_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: reg_user (reg@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'reg@example.com', 'password': 'UserPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: reg@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user reg@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user reg_user (ID: c722465c-5c9d-4b60-9cf9-19fbf7f51c6c), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user reg_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[33mWARNING #x1B[0m app:decorator.py:39 Access forbidden for user c722465c-5c9d-4b60-9cf9-19fbf7f51c6c. Required: ('admin', 'superadmin'), Actual: ['user']
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'reg@example.com', 'employee_id': 'UR001', 'mobile': '8877665544', 'roles': ['user'], 'user_type': 'employee', 'username': 'reg_user'}
INFO:app:#x1F512 Password set for user: reg_user
INFO:app:✅ User registered successfully: reg_user (reg@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'reg@example.com', 'password': 'UserPassword123'}
INFO:app:Employee login attempt with identifier: reg@example.com
INFO:app:Login successful for employee user reg@example.com
INFO:app:Issued JWT for user reg_user (ID: c722465c-5c9d-4b60-9cf9-19fbf7f51c6c), roles: ['user']
INFO:app:Returning JSON response for user reg_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
WARNING:app:Access forbidden for user c722465c-5c9d-4b60-9cf9-19fbf7f51c6c. Required: ('admin', 'superadmin'), Actual: ['user']

</system-err></testcase><testcase classname="tests.test_user" name="test_create_user_admin" time="0.655"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_test@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 69de392d-9b2e-413b-a918-f7ffae2bc92a), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_test@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_test@example.com
INFO:app:Login successful for employee user admin_test@example.com
INFO:app:Issued JWT for user admin_user (ID: 69de392d-9b2e-413b-a918-f7ffae2bc92a), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_user" name="test_lock_unlock_user" time="0.662"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_user
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_user (admin_test@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_test@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_user (ID: 36a531b6-f345-4ff9-b492-96785ef9552a), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_user
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[33mWARNING #x1B[0m auth:User.py:97 User 273e7eec-4b5f-47ed-b5d2-3e59987c4990 locked until 2026-01-13 06:30:49.729395+00:00
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[32mINFO    #x1B[0m auth:User.py:104 User 273e7eec-4b5f-47ed-b5d2-3e59987c4990 manually unlocked
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_test@example.com', 'employee_id': 'ADM001', 'mobile': '9988776655', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_user'}
INFO:app:#x1F512 Password set for user: admin_user
INFO:app:✅ User registered successfully: admin_user (admin_test@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_test@example.com', 'password': 'AdminPassword123'}
INFO:app:Employee login attempt with identifier: admin_test@example.com
INFO:app:Login successful for employee user admin_test@example.com
INFO:app:Issued JWT for user admin_user (ID: 36a531b6-f345-4ff9-b492-96785ef9552a), roles: ['admin']
INFO:app:Returning JSON response for user admin_user
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
WARNING:auth:User 273e7eec-4b5f-47ed-b5d2-3e59987c4990 locked until 2026-01-13 06:30:49.729395+00:00
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
INFO:auth:User 273e7eec-4b5f-47ed-b5d2-3e59987c4990 manually unlocked
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_user" name="test_change_password" time="0.983"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'pw@example.com', 'employee_id': 'PW001', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'pwuser'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: pwuser
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: pwuser (pw@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'pw@example.com', 'password': 'OldPassword123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: pw@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user pw@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user pwuser (ID: 8953c26c-b8db-49db-ae90-715ff1957c9d), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user pwuser
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'pw@example.com', 'password': 'NewPassword123!'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: pw@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user pw@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user pwuser (ID: 8953c26c-b8db-49db-ae90-715ff1957c9d), roles: ['user']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user pwuser
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'pw@example.com', 'employee_id': 'PW001', 'mobile': '6655443322', 'roles': ['user'], 'user_type': 'employee', 'username': 'pwuser'}
INFO:app:#x1F512 Password set for user: pwuser
INFO:app:✅ User registered successfully: pwuser (pw@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'pw@example.com', 'password': 'OldPassword123'}
INFO:app:Employee login attempt with identifier: pw@example.com
INFO:app:Login successful for employee user pw@example.com
INFO:app:Issued JWT for user pwuser (ID: 8953c26c-b8db-49db-ae90-715ff1957c9d), roles: ['user']
INFO:app:Returning JSON response for user pwuser
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'pw@example.com', 'password': 'NewPassword123!'}
INFO:app:Employee login attempt with identifier: pw@example.com
INFO:app:Login successful for employee user pw@example.com
INFO:app:Issued JWT for user pwuser (ID: 8953c26c-b8db-49db-ae90-715ff1957c9d), roles: ['user']
INFO:app:Returning JSON response for user pwuser

</system-err></testcase><testcase classname="tests.test_workflow" name="test_workflow_crud" time="0.503"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_wf@example.com', 'employee_id': 'ADM_WF', 'mobile': '9998887771', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_wf'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_wf
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_wf (admin_wf@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_wf@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_wf@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_wf@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_wf
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f) is attempting to create a form with data: {'slug': 'workflow-source', 'status': 'published', 'title': 'Workflow Source', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 2f816c30-2e71-4dc1-9b38-9536115a86f3 created successfully by user admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f) is attempting to create a form with data: {'slug': 'workflow-target', 'status': 'published', 'title': 'Workflow Target', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form 096676a7-583e-41ff-8dfe-36f12f12e0f7 created successfully by user admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_wf@example.com', 'employee_id': 'ADM_WF', 'mobile': '9998887771', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_wf'}
INFO:app:#x1F512 Password set for user: admin_wf
INFO:app:✅ User registered successfully: admin_wf (admin_wf@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_wf@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: admin_wf@example.com
INFO:app:Login successful for employee user admin_wf@example.com
INFO:app:Issued JWT for user admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f), roles: ['admin']
INFO:app:Returning JSON response for user admin_wf
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f) is attempting to create a form with data: {'slug': 'workflow-source', 'status': 'published', 'title': 'Workflow Source', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form 2f816c30-2e71-4dc1-9b38-9536115a86f3 created successfully by user admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f) is attempting to create a form with data: {'slug': 'workflow-target', 'status': 'published', 'title': 'Workflow Target', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form 096676a7-583e-41ff-8dfe-36f12f12e0f7 created successfully by user admin_wf (ID: 84ae2bf0-878c-41b0-a4e3-8e83bf8ee10f)
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False

</system-err></testcase><testcase classname="tests.test_workflow" name="test_workflow_execution" time="0.504"><system-out>--------------------------------- Captured Log ---------------------------------
#x1B[32mINFO    #x1B[0m app:auth_route.py:25 Received registration data: {'email': 'admin_wf@example.com', 'employee_id': 'ADM_WF', 'mobile': '9998887771', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_wf'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:46 #x1F512 Password set for user: admin_wf
#x1B[32mINFO    #x1B[0m app:auth_route.py:50 ✅ User registered successfully: admin_wf (admin_wf@example.com)
#x1B[32mINFO    #x1B[0m app:auth_route.py:59 Received login request
#x1B[35mDEBUG   #x1B[0m app:auth_route.py:62 Request JSON data: {'email': 'admin_wf@example.com', 'password': 'Password123'}
#x1B[32mINFO    #x1B[0m app:auth_route.py:77 Employee login attempt with identifier: admin_wf@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:104 Login successful for employee user admin_wf@example.com
#x1B[32mINFO    #x1B[0m app:auth_route.py:137 Issued JWT for user admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829), roles: ['admin']
#x1B[32mINFO    #x1B[0m app:auth_route.py:175 Returning JSON response for user admin_wf
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829) is attempting to create a form with data: {'slug': 'source-form-exec', 'status': 'published', 'title': 'Source Form Exec', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form dc930a03-2570-4343-8de3-32cee72c4ec0 created successfully by user admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('creator', 'admin'), require_all: False
#x1B[32mINFO    #x1B[0m app:form.py:29 User admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829) is attempting to create a form with data: {'slug': 'target-form-exec', 'status': 'published', 'title': 'Target Form Exec', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
#x1B[32mINFO    #x1B[0m app:form.py:46 Form e72fa15e-3347-498b-a21f-cab39980d401 created successfully by user admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829)
#x1B[35mDEBUG   #x1B[0m app:decorator.py:23 Checking access for roles: ('admin', 'superadmin'), require_all: False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: dc930a03-2570-4343-8de3-32cee72c4ec0
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'5f4e28c4-746e-4308-9b92-dcaa38c0a089': {'299906a9-40a7-410d-aaa8-ed114b845aab': 25, 'b14a5242-e2ae-4062-992f-eef42b7c119b': 'Alice'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 59558235-73da-4ed4-8587-56d5ebc9b829, Form title: Source Form Exec
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 5f4e28c4-746e-4308-9b92-dcaa38c0a089, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question b14a5242-e2ae-4062-992f-eef42b7c119b, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 299906a9-40a7-410d-aaa8-ed114b845aab, label=Age
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=2a2fdc08-afcf-48a2-990d-6a2d8ab677cb, is_draft=False
#x1B[32mINFO    #x1B[0m app:responses.py:26 Received submission for form_id: dc930a03-2570-4343-8de3-32cee72c4ec0
#x1B[32mINFO    #x1B[0m app:responses.py:61 Parsed JSON submission: {'5f4e28c4-746e-4308-9b92-dcaa38c0a089': {'299906a9-40a7-410d-aaa8-ed114b845aab': 15, 'b14a5242-e2ae-4062-992f-eef42b7c119b': 'Bob'}}
#x1B[32mINFO    #x1B[0m app:responses.py:98 Current user: 59558235-73da-4ed4-8587-56d5ebc9b829, Form title: Source Form Exec
#x1B[32mINFO    #x1B[0m app:validation.py:78 Processing section: 5f4e28c4-746e-4308-9b92-dcaa38c0a089, repeatable=False
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question b14a5242-e2ae-4062-992f-eef42b7c119b, label=Name
#x1B[35mDEBUG   #x1B[0m app:validation.py:126 Checking question 299906a9-40a7-410d-aaa8-ed114b845aab, label=Age
#x1B[32mINFO    #x1B[0m app:responses.py:125 Submission saved: response_id=b3aadeb0-8e74-45d6-9e06-9bbb8411c806, is_draft=False
--------------------------------- Captured Out ---------------------------------

</system-out><system-err>--------------------------------- Captured Err ---------------------------------
INFO:app:Received registration data: {'email': 'admin_wf@example.com', 'employee_id': 'ADM_WF', 'mobile': '9998887771', 'roles': ['admin'], 'user_type': 'employee', 'username': 'admin_wf'}
INFO:app:#x1F512 Password set for user: admin_wf
INFO:app:✅ User registered successfully: admin_wf (admin_wf@example.com)
INFO:app:Received login request
DEBUG:app:Request JSON data: {'email': 'admin_wf@example.com', 'password': 'Password123'}
INFO:app:Employee login attempt with identifier: admin_wf@example.com
INFO:app:Login successful for employee user admin_wf@example.com
INFO:app:Issued JWT for user admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829), roles: ['admin']
INFO:app:Returning JSON response for user admin_wf
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829) is attempting to create a form with data: {'slug': 'source-form-exec', 'status': 'published', 'title': 'Source Form Exec', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form dc930a03-2570-4343-8de3-32cee72c4ec0 created successfully by user admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829)
DEBUG:app:Checking access for roles: ('creator', 'admin'), require_all: False
INFO:app:User admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829) is attempting to create a form with data: {'slug': 'target-form-exec', 'status': 'published', 'title': 'Target Form Exec', 'versions': [{'sections': [{'questions': [{'field_type': 'input', 'is_required': False, 'label': 'Name'}, {'field_type': 'input', 'is_required': False, 'label': 'Age'}], 'title': 'Section 1'}], 'version': '1.0'}]}
INFO:app:Form e72fa15e-3347-498b-a21f-cab39980d401 created successfully by user admin_wf (ID: 59558235-73da-4ed4-8587-56d5ebc9b829)
DEBUG:app:Checking access for roles: ('admin', 'superadmin'), require_all: False
INFO:app:Received submission for form_id: dc930a03-2570-4343-8de3-32cee72c4ec0
INFO:app:Parsed JSON submission: {'5f4e28c4-746e-4308-9b92-dcaa38c0a089': {'299906a9-40a7-410d-aaa8-ed114b845aab': 25, 'b14a5242-e2ae-4062-992f-eef42b7c119b': 'Alice'}}
INFO:app:Current user: 59558235-73da-4ed4-8587-56d5ebc9b829, Form title: Source Form Exec
INFO:app:Processing section: 5f4e28c4-746e-4308-9b92-dcaa38c0a089, repeatable=False
DEBUG:app:Checking question b14a5242-e2ae-4062-992f-eef42b7c119b, label=Name
DEBUG:app:Checking question 299906a9-40a7-410d-aaa8-ed114b845aab, label=Age
INFO:app:Submission saved: response_id=2a2fdc08-afcf-48a2-990d-6a2d8ab677cb, is_draft=False
INFO:app:Received submission for form_id: dc930a03-2570-4343-8de3-32cee72c4ec0
INFO:app:Parsed JSON submission: {'5f4e28c4-746e-4308-9b92-dcaa38c0a089': {'299906a9-40a7-410d-aaa8-ed114b845aab': 15, 'b14a5242-e2ae-4062-992f-eef42b7c119b': 'Bob'}}
INFO:app:Current user: 59558235-73da-4ed4-8587-56d5ebc9b829, Form title: Source Form Exec
INFO:app:Processing section: 5f4e28c4-746e-4308-9b92-dcaa38c0a089, repeatable=False
DEBUG:app:Checking question b14a5242-e2ae-4062-992f-eef42b7c119b, label=Name
DEBUG:app:Checking question 299906a9-40a7-410d-aaa8-ed114b845aab, label=Age
INFO:app:Submission saved: response_id=b3aadeb0-8e74-45d6-9e06-9bbb8411c806, is_draft=False

</system-err></testcase></testsuite></testsuites>