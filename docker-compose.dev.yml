services:
  backend:
    environment:
      FLASK_ENV: development
      FLASK_DEBUG: "1"

      # helps when file change events don't propagate perfectly (common on some setups)
      WATCHFILES_FORCE_POLLING: "true"

    # mount the *entire repo* so changes on host reflect in container
    volumes:
      - .:/app
      - ./uploads:/app/uploads
      - ./logs:/app/logs

    # dev command: Using flask run for better hot-reloading in dev
    command: >
      flask run
      --host 0.0.0.0
      --port 5000
      --reload
      --debugger
